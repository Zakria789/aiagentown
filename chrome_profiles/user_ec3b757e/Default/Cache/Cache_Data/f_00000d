(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"00XV":function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var i=e("fXoL"),a=e("tk/3");let c=(()=>{class t{constructor(t){this.http=t}list(){return this.http.get("/api/10dlccampaigns/")}create(t){return this.http.post("/api/10dlccampaigns/",t)}get(t){return this.http.get(`/api/10dlccampaigns/${t}/`)}update(t,n){return this.http.patch(`/api/10dlccampaigns/${t}/`,n)}}return t.\u0275fac=function(n){return new(n||t)(i.nc(a.b))},t.\u0275prov=i.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"2Nh7":function(t,n,e){"use strict";e.d(n,"a",(function(){return B}));var i=e("3Pt+"),a=e("0IaG"),c=e("rryV"),r=e("+3se"),o=e("VxG0"),s=e("00XV"),u=e("Evvo"),l=e("zBIn"),d=e("N/25"),g=e("fXoL"),h=e("dNgK"),p=e("ofXK"),b=e("bTqV"),f=e("Qu3c");function P(t,n){if(1&t&&g.dc(0,"input",13),2&t){const t=g.uc();g.Bc("value",t.callerId.phone_number)}}function m(t,n){1&t&&g.dc(0,"input",14)}function v(t,n){if(1&t&&(g.ic(0,"option",16),g.dd(1),g.hc()),2&t){const t=n.$implicit;g.Bc("ngValue",t.id),g.Pb(1),g.fd(" ",t.name," ")}}function C(t,n){if(1&t&&(g.gc(0),g.ic(1,"div"),g.ic(2,"label"),g.dd(3,"10 DLC Campaign"),g.hc(),g.dc(4,"br"),g.ic(5,"select",15),g.dc(6,"option",16),g.bd(7,v,2,2,"option",17),g.hc(),g.ic(8,"p",8),g.dd(9," Associate this Caller ID with a SMS 10DLC campaign. Avoid frequent changes. Only for SMS enabled Caller IDs. "),g.hc(),g.hc(),g.dc(10,"hr"),g.fc()),2&t){const t=g.uc();g.Pb(5),g.Bc("matTooltipDisabled",null==t.callerId?null:t.callerId.sms_enabled),g.Pb(1),g.Bc("ngValue",null),g.Pb(1),g.Bc("ngForOf",t.tenDlcCampaigns)}}let B=(()=>{class t{constructor(t,n,e,a,c,r,o,s,u,l,d){this.permissionService=t,this.dialogRef=n,this.snackBar=e,this.fb=a,this.utils=c,this.callerIdService=r,this._dlcCampaignService=o,this._accountSettingService=s,this._userService=u,this._authService=l,this.data=d,this.tenDlcCampaigns=[],this.accountSettings=null,d?(this.title="Edit Caller ID",this.callerId=d,this.cidForm=this.fb.group({name:[d.name,i.z.required],cnam:d.cnam,tendlc_campaign:d.tendlc_campaign,campaign_enabled:d.campaign_enabled}),!1===this.callerId.sms_enabled?this.cidForm.get("tendlc_campaign").disable():this.cidForm.get("tendlc_campaign").enable()):(this.title="Create Caller ID",this.cidForm=this.fb.group({name:["",i.z.required],phone_number:["+1",i.z.required],cnam:"",tendlc_campaign:null,campaign_enabled:!0}))}ngOnInit(){this.callerId.sms_enabled&&this._userService.get(this._authService.getUserId()).subscribe({next:t=>{this._accountSettingService.getByAccountId(t.account_id).subscribe({next:t=>{this.accountSettings=t,this.accountSettings.show_tendlc_pages&&this.get10DlcCampaigns()}})}})}save(){this.cidForm.invalid?this.snackBar.open("Please Fill All Required Fields","X",{duration:3e3,verticalPosition:"top",panelClass:["error"]}):(this.processing=!0,this.callerId?this._updateCallerId():this._createCallerId())}_updateCallerId(){this.callerIdService.update(this.callerId.id,this.cidForm.value).subscribe({next:t=>{this.snackBar.open("Successfully Updated","X",{duration:3e3,verticalPosition:"top",panelClass:["success"]}),this.dialogRef.close(t)},error:t=>{this.processing=!1,this.snackBar.open(this.utils.handleErrorResponse(t,"Error Updating Caller ID"),"X",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}_createCallerId(){this.callerIdService.create(this.cidForm.value).subscribe({next:t=>{this.snackBar.open("Successfully Created","X",{duration:3e3,verticalPosition:"top",panelClass:["success"]}),this.dialogRef.close(t)},error:t=>{this.processing=!1,this.snackBar.open(this.utils.handleErrorResponse(t,"Error Creating Caller ID"),"X",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}get10DlcCampaigns(){this._dlcCampaignService.list().subscribe({next:t=>{this.tenDlcCampaigns=t.results}})}}return t.\u0275fac=function(n){return new(n||t)(g.bc(o.a),g.bc(a.g),g.bc(h.a),g.bc(i.f),g.bc(r.a),g.bc(c.a),g.bc(s.a),g.bc(u.a),g.bc(l.a),g.bc(d.a),g.bc(a.a))},t.\u0275cmp=g.Vb({type:t,selectors:[["ng-component"]],decls:36,vars:7,consts:[[3,"formGroup"],["type","text","formControlName","name",1,"dyn-full-width"],["type","text","class","dyn-full-width","disabled","",3,"value",4,"ngIf"],["type","text","formControlName","phone_number","class","dyn-full-width",4,"ngIf"],["type","text","formControlName","cnam",1,"dyn-full-width"],[4,"ngIf"],["id","campaign_enabled","type","checkbox","formControlName","campaign_enabled"],["for","campaign_enabled"],[1,"dyn-text-muted","dyn-text-sm"],[1,"dyn-flex","dyn-space-between"],["mat-stroked-button","","color","","mat-dialog-close",""],["matTooltip","You must have the 'caller_ids_write' permission to modify Caller IDs",1,"dyn-inline-block",3,"matTooltipDisabled"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","text","disabled","",1,"dyn-full-width",3,"value"],["type","text","formControlName","phone_number",1,"dyn-full-width"],["formControlName","tendlc_campaign","matTooltip","Only for SMS enabled Caller IDs",1,"dyn-full-width",3,"matTooltipDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(g.ic(0,"h1"),g.dd(1),g.hc(),g.ic(2,"form",0),g.ic(3,"div"),g.ic(4,"label"),g.dd(5,"Name*"),g.hc(),g.dc(6,"br"),g.dc(7,"input",1),g.hc(),g.dc(8,"hr"),g.ic(9,"div"),g.ic(10,"label"),g.dd(11,"Phone Number*"),g.hc(),g.dc(12,"br"),g.bd(13,P,1,1,"input",2),g.bd(14,m,1,0,"input",3),g.hc(),g.dc(15,"hr"),g.ic(16,"div"),g.ic(17,"label"),g.dd(18,"Cnam"),g.hc(),g.dc(19,"br"),g.dc(20,"input",4),g.hc(),g.dc(21,"hr"),g.bd(22,C,11,3,"ng-container",5),g.ic(23,"div"),g.dc(24,"input",6),g.ic(25,"label",7),g.dd(26,"Campaign Enabled"),g.hc(),g.ic(27,"p",8),g.dd(28," If unchecked this caller id will not be used by any campaigns except when configured on the contact level for a specific contact. "),g.hc(),g.hc(),g.dc(29,"hr"),g.ic(30,"div",9),g.ic(31,"button",10),g.dd(32,"Cancel"),g.hc(),g.ic(33,"div",11),g.ic(34,"button",12),g.qc("click",(function(){return n.save()})),g.dd(35,"Save"),g.hc(),g.hc(),g.hc(),g.hc()),2&t&&(g.Pb(1),g.ed(n.title),g.Pb(1),g.Bc("formGroup",n.cidForm),g.Pb(11),g.Bc("ngIf",n.callerId),g.Pb(1),g.Bc("ngIf",!n.callerId),g.Pb(8),g.Bc("ngIf",n.accountSettings&&(null==n.accountSettings?null:n.accountSettings.show_tendlc_pages)),g.Pb(11),g.Bc("matTooltipDisabled",n.permissionService.hasPermission("caller_ids_write")),g.Pb(1),g.Bc("disabled",n.processing||!n.permissionService.hasPermission("caller_ids_write")))},directives:[i.B,i.q,i.i,i.d,i.p,i.h,p.p,i.a,b.b,a.d,f.a,i.y,i.t,i.A,p.o],encapsulation:2}),t})()},b3De:function(t,n,e){"use strict";e.d(n,"a",(function(){return D}));var i=e("fXoL"),a=e("lJxs"),c=e("Kj3r"),r=e("xgIS"),o=e("tyNb"),s=e("0IaG"),u=e("dNgK"),l=e("ofXK"),d=e("3Pt+"),g=e("Xa2L");const h=["nextBtn"],p=["prevBtn"],b=["currentPageInput"];function f(t,n){1&t&&(i.ic(0,"button",18),i.dd(1,"..."),i.hc())}const P=function(t){return{active:t}};function m(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.second)})),i.dd(1),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(3,P,t.currentPage==t.paginator.second))("disabled",t.currentPage===t.paginator.second),i.Pb(1),i.ed(t.paginator.second)}}function v(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.third)})),i.dd(1),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(3,P,t.currentPage==t.paginator.third))("disabled",t.currentPage===t.paginator.third),i.Pb(1),i.ed(t.paginator.third)}}function C(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.fourth)})),i.dd(1),i.vc(2,"number"),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(5,P,t.currentPage==t.paginator.fourth))("disabled",t.currentPage===t.paginator.fourth),i.Pb(1),i.ed(i.wc(2,3,t.paginator.fourth))}}function B(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.fifth)})),i.dd(1),i.vc(2,"number"),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(5,P,t.currentPage==t.paginator.fifth))("disabled",t.currentPage===t.paginator.fifth),i.Pb(1),i.ed(i.wc(2,3,t.paginator.fifth))}}function _(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.sixth)})),i.dd(1),i.vc(2,"number"),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(5,P,t.currentPage==t.paginator.sixth))("disabled",t.currentPage===t.paginator.sixth),i.Pb(1),i.ed(i.wc(2,3,t.paginator.sixth))}}function I(t,n){if(1&t){const t=i.kc();i.ic(0,"button",4),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.seventh)})),i.dd(1),i.vc(2,"number"),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(5,P,t.currentPage==t.paginator.seventh))("disabled",t.currentPage===t.paginator.seventh),i.Pb(1),i.ed(i.wc(2,3,t.paginator.seventh))}}function x(t,n){1&t&&(i.ic(0,"button",18),i.dd(1,"..."),i.hc())}function y(t,n){if(1&t){const t=i.kc();i.ic(0,"button",19),i.qc("click",(function(){i.Qc(t);const n=i.uc();return n.goToPage(n.paginator.last)})),i.dd(1),i.vc(2,"number"),i.hc()}if(2&t){const t=i.uc();i.Bc("ngClass",i.Gc(4,P,t.currentPage==t.paginator.last)),i.Pb(1),i.ed(i.wc(2,2,t.paginator.last))}}function w(t,n){if(1&t&&(i.ic(0,"span",20),i.dd(1),i.vc(2,"number"),i.hc()),2&t){const t=i.uc();i.Pb(1),i.fd(" Total Results: ",i.wc(2,1,t.totalCount)," ")}}function S(t,n){1&t&&(i.ic(0,"div",21),i.dc(1,"mat-progress-spinner",22),i.dd(2," Loading... "),i.hc())}function k(t,n){if(1&t&&(i.ic(0,"option"),i.dd(1),i.hc()),2&t){const t=n.$implicit;i.Pb(1),i.ed(t)}}let D=(()=>{class t{constructor(t,n,e){this.route=t,this.dialog=n,this.snackBar=e,this.pageSizeOptions=[5,10,25,50,100,250],this.paginator={showLeftDots:!1,showRightDots:!1,first:1,second:null,third:null,fourth:null,fifth:null,sixth:null,seventh:null,last:null},this.goPage=new i.r,this.updatePerPage=new i.r}ngOnInit(){const t=this.nextBtnSub.nativeElement,n=this.prevBtnSub.nativeElement,e=this.currentPageInputSub.nativeElement;this.nextButtonSubscription=Object(r.a)(t,"click").pipe(Object(a.a)(t=>{this.currentPage>=this._getPageCount()||this.currentPage++}),Object(c.a)(400)).subscribe({next:t=>{this.goToPage(this.currentPage)}}),this.prevButtonSubscription=Object(r.a)(n,"click").pipe(Object(a.a)(t=>{1!=this.currentPage&&this.currentPage--}),Object(c.a)(400)).subscribe({next:t=>{this.goToPage(this.currentPage)}}),this.currentPageInputSubscription=Object(r.a)(e,"keyup").pipe(Object(a.a)(t=>{const n=this._getPageCount();return!(!e.value||(e.value%1!=0||e.value<1?(this.snackBar.open("Invalid Value","X",{duration:2500,verticalPosition:"top",panelClass:["error"]}),1):e.value>n&&(this.snackBar.open("Invalid Page Number","X",{duration:2500,verticalPosition:"top",panelClass:["error"]}),1)))}),Object(c.a)(400)).subscribe({next:t=>{t&&this.goToPage(parseInt(e.value))}})}ngOnDestroy(){this.nextButtonSubscription&&this.nextButtonSubscription.unsubscribe(),this.prevButtonSubscription&&this.prevButtonSubscription.unsubscribe()}ngOnChanges(t){let n=!1;t.nextButton&&(this.nextButton=t.nextButton.currentValue),t.prevButton&&(this.prevButton=t.prevButton.currentValue),t.perPage&&(this.perPage=t.perPage.currentValue,n=!0),t.totalCount&&(this.totalCount=t.totalCount.currentValue,n=!0),t.currentPage&&(this.currentPage=t.currentPage.currentValue,n=!0),n&&this._setPaginator()}goToPage(t){const n=this._getPageCount();t>n?this.snackBar.open("Page number must be less than "+n,"X",{duration:2500,verticalPosition:"top",panelClass:["error"]}):this.goPage.emit(t)}updatePageSize(t){const n=t;this.perPage=n,this.updatePerPage.emit(n)}_setPaginator(){const t=this._getPageCount();this.paginator.showLeftDots=this._showLeftDots(),this.paginator.showRightDots=this._showRightDots(),this.paginator.first=1,this.paginator.last=t>1&&this.currentPage!=t?t:null,1==this.currentPage&&(this._resetPaginator(),this.paginator.second=3==t?2:null,t>=4&&(this.paginator.second=2,this.paginator.third=3,this.paginator.fourth=5==t?4:null)),2==this.currentPage&&(this._resetPaginator(),this.paginator.second=2,this.paginator.third=t>=4?3:null,this.paginator.fourth=5==t?4:null),3==this.currentPage&&(this._resetPaginator(),this.paginator.second=2,this.paginator.third=3,this.paginator.fourth=5==t?4:null,t>=6&&(this.paginator.fourth=4,this.paginator.fifth=5,this.paginator.sixth=7==t?6:null)),4==this.currentPage&&(this._resetPaginator(),this.paginator.fourth=4,this.paginator.second=2,this.paginator.third=3,this.paginator.fifth=6==t?5:null,7==t?(this.paginator.fifth=5,this.paginator.sixth=6):t>7&&(this.paginator.fifth=5)),5==this.currentPage&&(this._resetPaginator(),this.paginator.fifth=5,this.paginator.fourth=4,5==t&&(this.paginator.second=2,this.paginator.third=3),this.paginator.sixth=t>=7?6:null,this.paginator.seventh=8==t?7:null),this.currentPage>=6&&(t-this.currentPage>3?(this._resetPaginator(),this.paginator.fourth=this.currentPage-1,this.paginator.fifth=this.currentPage,this.paginator.sixth=this.currentPage+1):t-this.currentPage==3?(this._resetPaginator(),this.paginator.fourth=this.currentPage-1,this.paginator.fifth=this.currentPage,this.paginator.sixth=this.currentPage+1,this.paginator.seventh=this.currentPage+2):t-this.currentPage==2?(this._resetPaginator(),this.paginator.fourth=this.currentPage-1,this.paginator.fifth=this.currentPage,this.paginator.sixth=this.currentPage+1):(this._resetPaginator(),this.paginator.fourth=this.currentPage-1,this.paginator.fifth=this.currentPage))}_resetPaginator(){this.paginator.second=null,this.paginator.third=null,this.paginator.fourth=null,this.paginator.fifth=null,this.paginator.sixth=null,this.paginator.seventh=null}_showLeftDots(){return this._getPageCount()>=6&&this.currentPage>=5}_showRightDots(){return!(this._getPageCount()<=5)&&(this._getPageCount()-this.currentPage>3?!(3==this.currentPage&&7==this._getPageCount()):void 0)}_getPageCount(){return Math.ceil(this.totalCount/this.perPage)}}return t.\u0275fac=function(n){return new(n||t)(i.bc(o.a),i.bc(s.b),i.bc(u.a))},t.\u0275cmp=i.Vb({type:t,selectors:[["paginator"]],viewQuery:function(t,n){var e;1&t&&(i.Wc(h,!0),i.Wc(p,!0),i.Wc(b,!0)),2&t&&(i.Lc(e=i.rc())&&(n.nextBtnSub=e.first),i.Lc(e=i.rc())&&(n.prevBtnSub=e.first),i.Lc(e=i.rc())&&(n.currentPageInputSub=e.first))},inputs:{showPaginationLoader:"showPaginationLoader",hideCount:"hideCount",totalCount:"totalCount",perPage:"perPage",currentPage:"currentPage",prevButton:"prevButton",nextButton:"nextButton"},outputs:{goPage:"goPage",updatePerPage:"updatePerPage"},features:[i.Nb],decls:32,vars:21,consts:[[1,"dyn-m-t-20","dyn-space-between","dyn-flex"],[1,"paginator"],[3,"disabled"],["prevBtn",""],[3,"ngClass","disabled","click"],["class","pagination-dots","disabled","",4,"ngIf"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["nextBtn",""],["class","dyn-text-sm dyn-text-muted dyn-italic dyn-m-l-20",4,"ngIf"],["class","dyn-inline-block dyn-m-l-20",4,"ngIf"],[1,"paginator-page-controls"],[1,"dyn-m-r-20"],[1,"dyn-text-sm"],["type","number","min","1",1,"cp-input",3,"ngModel"],["currentPageInput",""],[1,"per-page-dropdown",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["disabled","",1,"pagination-dots"],[3,"ngClass","click"],[1,"dyn-text-sm","dyn-text-muted","dyn-italic","dyn-m-l-20"],[1,"dyn-inline-block","dyn-m-l-20"],["mode","indeterminate","diameter","20",1,"dyn-inline-block","dyn-vertical-middle","dyn-m-r-5"]],template:function(t,n){1&t&&(i.ic(0,"div",0),i.ic(1,"div",1),i.ic(2,"button",2,3),i.dd(4," \u2190 Previous "),i.hc(),i.ic(5,"button",4),i.qc("click",(function(){return n.goToPage(n.paginator.first)})),i.dd(6),i.hc(),i.bd(7,f,2,0,"button",5),i.bd(8,m,2,5,"button",6),i.bd(9,v,2,5,"button",6),i.bd(10,C,3,7,"button",6),i.bd(11,B,3,7,"button",6),i.bd(12,_,3,7,"button",6),i.bd(13,I,3,7,"button",6),i.bd(14,x,2,0,"button",5),i.bd(15,y,3,6,"button",7),i.ic(16,"button",2,8),i.dd(18," Next \u2192 "),i.hc(),i.bd(19,w,3,3,"span",9),i.bd(20,S,3,0,"div",10),i.hc(),i.ic(21,"div",11),i.ic(22,"span",12),i.ic(23,"span",13),i.dd(24,"Current Page: "),i.hc(),i.dc(25,"input",14,15),i.hc(),i.ic(27,"span"),i.ic(28,"span",13),i.dd(29,"Page Size: "),i.hc(),i.ic(30,"select",16),i.qc("ngModelChange",(function(t){return n.updatePageSize(t)})),i.bd(31,k,2,1,"option",17),i.hc(),i.hc(),i.hc(),i.hc()),2&t&&(i.Pb(2),i.Bc("disabled",!n.prevButton),i.Pb(3),i.Bc("ngClass",i.Gc(19,P,n.currentPage==n.paginator.first))("disabled",n.currentPage===n.paginator.first),i.Pb(1),i.ed(n.paginator.first),i.Pb(1),i.Bc("ngIf",n.paginator.showLeftDots),i.Pb(1),i.Bc("ngIf",n.paginator.second),i.Pb(1),i.Bc("ngIf",n.paginator.third),i.Pb(1),i.Bc("ngIf",n.paginator.fourth),i.Pb(1),i.Bc("ngIf",n.paginator.fifth),i.Pb(1),i.Bc("ngIf",n.paginator.sixth),i.Pb(1),i.Bc("ngIf",n.paginator.seventh),i.Pb(1),i.Bc("ngIf",n.paginator.showRightDots),i.Pb(1),i.Bc("ngIf",n.paginator.last),i.Pb(1),i.Bc("disabled",!n.nextButton),i.Pb(3),i.Bc("ngIf",!1===n.hideCount||void 0===n.hideCount),i.Pb(1),i.Bc("ngIf",n.showPaginationLoader),i.Pb(5),i.Bc("ngModel",n.currentPage),i.Pb(5),i.Bc("ngModel",n.perPage),i.Pb(1),i.Bc("ngForOf",n.pageSizeOptions))},directives:[l.n,l.p,d.u,d.d,d.p,d.s,d.y,l.o,g.a,d.t,d.A],pipes:[l.g],styles:["button[_ngcontent-%COMP%]{padding:5px 10px;background:#fff;border:1px solid #ddd;outline:none;margin:0 1px;cursor:pointer}button.active[_ngcontent-%COMP%]{background:#3a8bff;color:#fff;outline:none;cursor:not-allowed}button.pagination-dots[_ngcontent-%COMP%]{border-color:#f1f1f1;cursor:not-allowed}button[_ngcontent-%COMP%]:hover{background:#eff3f6}button.active[_ngcontent-%COMP%]:hover{background:#3a8bff}.cp-input[_ngcontent-%COMP%]{min-width:60px!important;width:80px!important}.per-page-dropdown[_ngcontent-%COMP%]{min-width:auto!important;width:70px!important}"]}),t})()}}]);