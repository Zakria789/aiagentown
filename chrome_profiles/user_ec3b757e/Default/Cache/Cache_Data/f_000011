(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+2sm":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),c=n("tk/3");let a=(()=>{class e{constructor(e){this.http=e}listMinimal(){return this.http.get("/api/teams/minimal/")}list(e,t){return this.http.get(t?`/api/teams/?page=${t}&page_size=${e}`:"/api/teams/?page_size="+e)}create(e){return this.http.post("/api/teams/",{name:e})}delete(e){return this.http.delete(`/api/teams/${e}/`)}get(e){return this.http.get(`/api/teams/${e}/`)}update(e,t){return this.http.patch(`/api/teams/${e}/`,{name:t})}}return e.\u0275fac=function(t){return new(t||e)(i.nc(c.b))},e.\u0275prov=i.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},DD8m:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),c=n("tk/3");let a=(()=>{class e{constructor(e){this.http=e}getDestinationsByType(e,t){return this.http.get(`/api/destinations/?${e}=${t}`)}getDestinationParents(e){return this.http.get(`/api/destinations/${e}/parents/`)}list(e,t,n){return this.http.get(t?`/api/destinations/?ordering=destination_type&page=${t}&page_size=${e}${n?"&has_extension=true":""}`:`/api/destinations/?ordering=destination_type&page_size=${e}${n?"&has_extension=true":""}`)}get(e){return this.http.get(`/api/destinations/${e}/`)}getByIds(e){return this.http.get("/api/destinations/?page_size=max&id__in="+e)}getByUrl(e){return this.http.get(""+e)}search(e,t){return this.http.get(`/api/destinations/?page=${e}&page_size=250&search=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(i.nc(c.b))},e.\u0275prov=i.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"P/1d":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("ofXK"),c=n("fXoL"),a=n("R9SF");const o=function(e,t){return{input:e,label:t}};function s(e,t){if(1&e){const e=c.kc();c.ic(0,"div",8),c.ic(1,"color-editable-input",9),c.qc("onChange",(function(t){return c.Qc(e),c.uc().handleChange(t)})),c.hc(),c.hc()}if(2&e){const e=c.uc();c.Pb(1),c.Xc(c.Hc(5,o,e.input,e.label)),c.Bc("value",e.round(100*e.rgb.a))("dragLabel",!0)("dragMax",100)}}function r(e,t){if(1&e){const e=c.kc();c.ic(0,"div",2),c.ic(1,"color-swatch",3),c.qc("onClick",(function(t){return c.Qc(e),c.uc().handleClick(t)}))("onHover",(function(t){return c.Qc(e),c.uc().onSwatchHover.emit(t)})),c.hc(),c.hc()}if(2&e){const e=t.$implicit,n=c.uc();c.Pb(1),c.Xc(n.swatchStyle),c.Bc("color",n.normalizeValue(e).color)("focusStyle",n.focusStyle(e))}}let d=(()=>{let e=class{constructor(){this.disableAlpha=!1,this.onChange=new c.r,this.input={width:"100%",padding:"4px 10% 3px",border:"none",boxSizing:"border-box",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},this.label={display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}}round(e){return Math.round(e)}handleChange({data:e,$event:t}){e.hex?Object(a.n)(e.hex)&&this.onChange.emit({data:{hex:e.hex,source:"hex"},$event:t}):e.r||e.g||e.b?this.onChange.emit({data:{r:e.r||this.rgb.r,g:e.g||this.rgb.g,b:e.b||this.rgb.b,source:"rgb"},$event:t}):e.a?(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},$event:t})):(e.h||e.s||e.l)&&this.onChange.emit({data:{h:e.h||this.hsl.h,s:Number(e.s&&e.s||this.hsl.s),l:Number(e.l&&e.l||this.hsl.l),source:"hsl"},$event:t})}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Vb({type:e,selectors:[["color-sketch-fields"]],inputs:{disableAlpha:"disableAlpha",hsl:"hsl",rgb:"rgb",hex:"hex"},outputs:{onChange:"onChange"},decls:10,vars:31,consts:[[1,"sketch-fields"],[1,"sketch-double"],["label","hex",3,"value","onChange"],[1,"sketch-single"],["label","r",3,"value","dragLabel","dragMax","onChange"],["label","g",3,"value","dragLabel","dragMax","onChange"],["label","b",3,"value","dragLabel","dragMax","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-alpha"],["label","a",3,"value","dragLabel","dragMax","onChange"]],template:function(e,t){1&e&&(c.ic(0,"div",0),c.ic(1,"div",1),c.ic(2,"color-editable-input",2),c.qc("onChange",(function(e){return t.handleChange(e)})),c.hc(),c.hc(),c.ic(3,"div",3),c.ic(4,"color-editable-input",4),c.qc("onChange",(function(e){return t.handleChange(e)})),c.hc(),c.hc(),c.ic(5,"div",3),c.ic(6,"color-editable-input",5),c.qc("onChange",(function(e){return t.handleChange(e)})),c.hc(),c.hc(),c.ic(7,"div",3),c.ic(8,"color-editable-input",6),c.qc("onChange",(function(e){return t.handleChange(e)})),c.hc(),c.hc(),c.bd(9,s,2,8,"div",7),c.hc()),2&e&&(c.Pb(2),c.Xc(c.Hc(19,o,t.input,t.label)),c.Bc("value",t.hex.replace("#","")),c.Pb(2),c.Xc(c.Hc(22,o,t.input,t.label)),c.Bc("value",t.rgb.r)("dragLabel",!0)("dragMax",255),c.Pb(2),c.Xc(c.Hc(25,o,t.input,t.label)),c.Bc("value",t.rgb.g)("dragLabel",!0)("dragMax",255),c.Pb(2),c.Xc(c.Hc(28,o,t.input,t.label)),c.Bc("value",t.rgb.b)("dragLabel",!0)("dragMax",255),c.Pb(1),c.Bc("ngIf",!1===t.disableAlpha))},directives:[a.f,i.p],styles:[".sketch-fields[_ngcontent-%COMP%] {\n      display: flex;\n      padding-top: 4px;\n    }\n    .sketch-double[_ngcontent-%COMP%] {\n      -webkit-box-flex: 2;\n      flex: 2 1 0%;\n    }\n    .sketch-single[_ngcontent-%COMP%] {\n      flex: 1 1 0%;\n      padding-left: 6px;\n    }\n    .sketch-alpha[_ngcontent-%COMP%] {\n      -webkit-box-flex: 1;\n      flex: 1 1 0%;\n      padding-left: 6px;\n    }"],changeDetection:0}),e})(),l=(()=>{let e=class{constructor(){this.onClick=new c.r,this.onSwatchHover=new c.r,this.swatchStyle={borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}}handleClick({hex:e,$event:t}){this.onClick.emit({hex:e,$event:t})}normalizeValue(e){return"string"==typeof e?{color:e}:e}focusStyle(e){return{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+this.normalizeValue(e).color}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Vb({type:e,selectors:[["color-sketch-preset-colors"]],inputs:{colors:"colors"},outputs:{onClick:"onClick",onSwatchHover:"onSwatchHover"},decls:2,vars:1,consts:[[1,"sketch-swatches"],["class","sketch-wrap",4,"ngFor","ngForOf"],[1,"sketch-wrap"],[1,"swatch",3,"color","focusStyle","onClick","onHover"]],template:function(e,t){1&e&&(c.ic(0,"div",0),c.bd(1,r,2,4,"div",1),c.hc()),2&e&&(c.Pb(1),c.Bc("ngForOf",t.colors))},directives:[i.o,a.l],styles:[".sketch-swatches[_ngcontent-%COMP%] {\n      margin: 0px -10px;\n      padding: 10px 0px 0px 10px;\n      border-top: 1px solid rgb(238, 238, 238);\n      display: flex;\n      flex-wrap: wrap;\n      position: relative;\n    }\n    .sketch-wrap[_ngcontent-%COMP%] {\n      width: 16px;\n      height: 16px;\n      margin: 0px 10px 10px 0px;\n    }"],changeDetection:0}),e})(),h=(()=>{let e=class extends a.e{constructor(){super(),this.disableAlpha=!1,this.presetColors=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],this.width=200}afterValidChange(){this.activeBackground=`rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, ${this.rgb.a})`}handleValueChange({data:e,$event:t}){this.handleChange(e,t)}handleBlockChange({hex:e,$event:t}){Object(a.n)(e)&&this.handleChange({hex:e,source:"hex"},t)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Vb({type:e,selectors:[["color-sketch"]],inputs:{disableAlpha:"disableAlpha",presetColors:"presetColors",width:"width"},features:[c.Mb],decls:16,vars:18,consts:[[1,"sketch-saturation"],[3,"hsl","hsv","onChange"],[1,"sketch-controls"],[1,"sketch-sliders"],[1,"sketch-hue"],[3,"hsl","onChange"],[1,"sketch-alpha"],[3,"radius","rgb","hsl","onChange"],[1,"sketch-color"],[1,"sketch-active"],[3,"rgb","hsl","hex","disableAlpha","onChange"],[3,"colors","onClick","onSwatchHover"]],template:function(e,t){1&e&&(c.ic(0,"div"),c.ic(1,"div",0),c.ic(2,"color-saturation",1),c.qc("onChange",(function(e){return t.handleValueChange(e)})),c.hc(),c.hc(),c.ic(3,"div",2),c.ic(4,"div",3),c.ic(5,"div",4),c.ic(6,"color-hue",5),c.qc("onChange",(function(e){return t.handleValueChange(e)})),c.hc(),c.hc(),c.ic(7,"div",6),c.ic(8,"color-alpha",7),c.qc("onChange",(function(e){return t.handleValueChange(e)})),c.hc(),c.hc(),c.hc(),c.ic(9,"div",8),c.dc(10,"color-checkboard"),c.dc(11,"div",9),c.hc(),c.hc(),c.ic(12,"div",2),c.ic(13,"color-sketch-fields",10),c.qc("onChange",(function(e){return t.handleValueChange(e)})),c.hc(),c.hc(),c.ic(14,"div",2),c.ic(15,"color-sketch-preset-colors",11),c.qc("onClick",(function(e){return t.handleBlockChange(e)}))("onSwatchHover",(function(e){return t.onSwatchHover.emit(e)})),c.hc(),c.hc(),c.hc()),2&e&&(c.Sb("sketch-picker ",t.className,""),c.Yc("width",t.width),c.Pb(2),c.Bc("hsl",t.hsl)("hsv",t.hsv),c.Pb(4),c.Bc("hsl",t.hsl),c.Pb(2),c.Bc("radius",2)("rgb",t.rgb)("hsl",t.hsl),c.Pb(3),c.Yc("background",t.activeBackground),c.Pb(2),c.Bc("rgb",t.rgb)("hsl",t.hsl)("hex",t.hex)("disableAlpha",t.disableAlpha),c.Pb(2),c.Bc("colors",t.presetColors))},directives:[a.j,a.h,a.a,a.c,d,l],styles:[".sketch-picker[_ngcontent-%COMP%] {\n      padding: 10px 10px 0;\n      box-sizing: initial;\n      background: #fff;\n      border-radius: 4px;\n      box-shadow: 0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15);\n    }\n    .sketch-saturation[_ngcontent-%COMP%] {\n      width: 100%;\n      padding-bottom: 75%;\n      position: relative;\n      overflow: hidden;\n    }\n    .sketch-controls[_ngcontent-%COMP%] {\n      display: flex;\n    }\n    .sketch-sliders[_ngcontent-%COMP%] {\n      padding: 4px 0px;\n      -webkit-box-flex: 1;\n      flex: 1 1 0%;\n    }\n    .sketch-hue[_ngcontent-%COMP%] {\n      position: relative;\n      height: 10px;\n      overflow: hidden;\n    }\n    .sketch-alpha[_ngcontent-%COMP%] {\n      position: relative;\n      height: 10px;\n      margin-top: 4px;\n      overflow: hidden;\n    }\n    .sketch-color[_ngcontent-%COMP%] {\n      width: 24px;\n      height: 24px;\n      position: relative;\n      margin-top: 4px;\n      margin-left: 4px;\n      border-radius: 3px;\n    }\n    .sketch-active[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0px;\n      right: 0px;\n      bottom: 0px;\n      left: 0px;\n      border-radius: 2px;\n      box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.25) 0px 0px 4px inset;\n    }"],changeDetection:0}),e})(),u=(()=>{let e=class{};return e.\u0275mod=c.Zb({type:e}),e.\u0275inj=c.Yb({factory:function(t){return new(t||e)},imports:[[i.c,a.b,a.d,a.g,a.i,a.k,a.m]]}),e})()},df5u:function(e,t,n){"use strict";n.r(t),n.d(t,"ManagerCampaignsModule",(function(){return Bo}));var i=n("PCNd"),c=n("tyNb"),a=n("FHnY"),o=n("2X0z"),s=n("N/25"),r=n("+3se"),d=n("Q0oM"),l=n("VxG0"),h=n("7JKk"),u=n("XNiG"),m=n("R0Ic"),g=n("Evvo"),p=n("fXoL"),b=n("tk/3");let _=(()=>{class e{constructor(e){this.http=e}getDidLimit(e){return this.http.get("/api/softwarelicenses/?"+(e?"feature_name=Toll%20Free%20Number":"feature_name=DID"))}getCampaignChannelsPerAgent(){return this.http.get("/api/softwarelicenses/?feature_name=Campaign%20Channel%20Per%20Agent")}getPredictiveCampaignSeats(){return this.http.get("/api/softwarelicenses/?feature_name=Predictive%20Campaign%20Seat")}}return e.\u0275fac=function(t){return new(t||e)(p.nc(b.b))},e.\u0275prov=p.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=n("0IaG"),v=n("7Drp");let y=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.showButton=!0}}return e.\u0275fac=function(t){return new(t||e)(p.bc(f.g),p.bc(f.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:1,vars:3,consts:[[3,"height","showUpcomingHolidayTable","showBorder"]],template:function(e,t){1&e&&p.dc(0,"us-canada-map",0),2&e&&p.Bc("height",500)("showUpcomingHolidayTable",!0)("showBorder",!1)},directives:[v.a],styles:[""]}),e})();var C=n("0EQZ"),x=n("pN+a"),w=n("drTf"),P=n("TGtB"),k=n("ssNL"),S=n("3Pt+"),B=n("dNgK"),D=n("Qu3c"),M=n("ofXK"),F=n("bTqV");function I(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd("",e.name," (count: ",e.count,")")}}function A(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd(" ",e.name," ",e.active?"(Count: "+e.count+")":"(Not Active)"," ")}}function T(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function O(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function L(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e),p.Pb(1),p.fd(" ",e," ")}}function N(e,t){if(1&e&&(p.ic(0,"option",6),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd("",e.name," (count: ",e.count,")")}}let $=(()=>{class e{constructor(e,t,n,i,c,a,o,s,r,d,l){this.dialogRef=e,this.utils=t,this._fb=n,this._liveFilterService=i,this._salesFunnelsService=c,this._bucketService=a,this._callerIdStrategyService=o,this._softwareLicenseService=s,this._campaignService=r,this._snackBar=d,this.data=l,this.campaignsToEdit=[],this.submitDisabled=!1,this.maxChannelsPerAgent=[],this.liveFilters=[],this.buckets=[],this.callerIdStrategies=[],this.salesFunnels=[],this.selectedType="selected",this.campaignsToEdit=l.campaigns,this.selectedType=l.selectedType,this.searchParams=l.searchParams,this.form=this._fb.group({active:null,live_filter:null,bucket:null,sales_funnel:null,caller_id_strategy:null,call_recording:null,suppress_federal_dnc:null,channels_per_agent:null,hot_lead_bucket:null})}ngOnInit(){this._getMaxChannelsPerAgent(),this._getLiveFilters(),this._getBuckets(),this._getCallerIdStrategies(),this._getSalesFunnels()}onSubmit(){this.submitDisabled=!0;const e=Object.keys(this.form.value).reduce((e,t)=>(null!==this.form.value[t]&&(e[t]=this.form.value[t]),e),{});e.live_filter?e.bucket=null:e.bucket&&(e.live_filter=null),"selected"===this.selectedType?this._bulkUpdate(e):"all"===this.selectedType&&this._updateAll(e)}_bulkUpdate(e){const t=this.campaignsToEdit.map(e=>e.id);this._campaignService.bulkUpdate(t,e).subscribe({next:e=>{this._snackBar.open("Campaigns Updated Successfully","X",{duration:5e3,verticalPosition:"top",panelClass:["success"]}),this.dialogRef.close(!0)},error:e=>{var t;400===e.status&&this._snackBar.open(null===(t=e.error)||void 0===t?void 0:t.message,"X",{duration:3e4,verticalPosition:"top",panelClass:["error"]}),this.submitDisabled=!1}})}_updateAll(e){let t="";Object.keys(this.searchParams).forEach(e=>{null!==this.searchParams[e]&&""!==this.searchParams[e]&&(t+=(t.length?"&":"?")+e+"="+this.searchParams[e])}),this._campaignService.updateAll(t,e).subscribe({next:e=>{this._snackBar.open("Campaigns Updated Successfully","X",{duration:5e3,verticalPosition:"top",panelClass:["success"]}),this.dialogRef.close(!0)},error:e=>{var t;400===e.status&&this._snackBar.open(null===(t=e.error)||void 0===t?void 0:t.message,"X",{duration:3e4,verticalPosition:"top",panelClass:["error"]}),this.submitDisabled=!1}})}_getSalesFunnels(){this._salesFunnelsService.list("max").subscribe({next:e=>{this.salesFunnels=e.results}})}_getMaxChannelsPerAgent(){this._softwareLicenseService.getCampaignChannelsPerAgent().subscribe({next:e=>{const t=e["Campaign Channel Per Agent"].license_quantity;let n=[];for(let i=1;i<t+1;i++)n.push(i);this.maxChannelsPerAgent=n}})}_getLiveFilters(){this._liveFilterService.list("max").subscribe({next:e=>{this.liveFilters=e.results}})}_getBuckets(){this._bucketService.list("max").subscribe({next:e=>{this.buckets=e.results}})}_getCallerIdStrategies(){this._callerIdStrategyService.list("max").subscribe({next:e=>{this.callerIdStrategies=e.results}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(f.g),p.bc(r.a),p.bc(S.f),p.bc(x.a),p.bc(w.a),p.bc(P.a),p.bc(k.a),p.bc(_),p.bc(a.a),p.bc(B.a),p.bc(f.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:93,vars:29,consts:[[1,"dyn-m-0"],[1,"dyn-m-b-5","dyn-m-t-5"],[3,"formGroup"],[1,"dyn-flex","dyn-align-items"],[1,"dyn-full-width"],["formControlName","active",1,"dyn-full-width"],[3,"ngValue"],[1,"dyn-m-b-10","dyn-m-t-10"],[1,"dyn-full-width","dyn-inline-block",2,"width","105%!important",3,"matTooltip","matTooltipDisabled"],["formControlName","bucket",1,"dyn-full-width"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","live_filter",1,"dyn-full-width"],["formControlName","sales_funnel",1,"dyn-full-width"],["formControlName","caller_id_strategy",1,"dyn-full-width"],["formControlName","call_recording",1,"dyn-full-width"],["formControlName","suppress_federal_dnc",1,"dyn-full-width"],["formControlName","channels_per_agent",1,"dyn-full-width"],["formControlName","hot_lead_bucket",1,"dyn-full-width"],[1,"dyn-flex","dyn-space-between"],["mat-stroked-button","","color","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(p.ic(0,"div"),p.ic(1,"h1",0),p.dd(2,"Edit Campaigns"),p.hc(),p.dc(3,"hr",1),p.ic(4,"form",2),p.ic(5,"div",3),p.ic(6,"div",4),p.ic(7,"label"),p.dd(8,"Active"),p.hc(),p.hc(),p.ic(9,"select",5),p.dc(10,"option",6),p.ic(11,"option",6),p.dd(12,"True"),p.hc(),p.ic(13,"option",6),p.dd(14,"False"),p.hc(),p.hc(),p.hc(),p.dc(15,"hr",7),p.ic(16,"div",3),p.ic(17,"div",4),p.ic(18,"label"),p.dd(19,"Bucket"),p.hc(),p.hc(),p.ic(20,"div",8),p.ic(21,"select",9),p.dc(22,"option",6),p.bd(23,I,2,3,"option",10),p.hc(),p.hc(),p.hc(),p.dc(24,"hr",7),p.ic(25,"div",3),p.ic(26,"div",4),p.ic(27,"label"),p.dd(28,"Live Filter"),p.hc(),p.hc(),p.ic(29,"div",8),p.ic(30,"select",11),p.dc(31,"option",6),p.bd(32,A,2,3,"option",10),p.hc(),p.hc(),p.hc(),p.dc(33,"hr",7),p.ic(34,"div",3),p.ic(35,"div",4),p.ic(36,"label"),p.dd(37,"Redial Rules"),p.hc(),p.hc(),p.ic(38,"select",12),p.dc(39,"option",6),p.bd(40,T,2,2,"option",10),p.hc(),p.hc(),p.dc(41,"hr",7),p.ic(42,"div",3),p.ic(43,"div",4),p.ic(44,"label"),p.dd(45,"Caller ID Strategy"),p.hc(),p.hc(),p.ic(46,"select",13),p.dc(47,"option",6),p.bd(48,O,2,2,"option",10),p.hc(),p.hc(),p.dc(49,"hr",7),p.ic(50,"div",3),p.ic(51,"div",4),p.ic(52,"label"),p.dd(53,"Call Recording"),p.hc(),p.hc(),p.ic(54,"select",14),p.dc(55,"option",6),p.ic(56,"option",6),p.dd(57,"True"),p.hc(),p.ic(58,"option",6),p.dd(59,"False"),p.hc(),p.hc(),p.hc(),p.dc(60,"hr",7),p.ic(61,"div",3),p.ic(62,"div",4),p.ic(63,"label"),p.dd(64,"Suppress FDNC"),p.hc(),p.hc(),p.ic(65,"select",15),p.dc(66,"option",6),p.ic(67,"option",6),p.dd(68,"True"),p.hc(),p.ic(69,"option",6),p.dd(70,"False"),p.hc(),p.hc(),p.hc(),p.dc(71,"hr",7),p.ic(72,"div",3),p.ic(73,"div",4),p.ic(74,"label"),p.dd(75,"Channels Per Agent"),p.hc(),p.hc(),p.ic(76,"select",16),p.dc(77,"option",6),p.bd(78,L,2,2,"option",10),p.hc(),p.hc(),p.dc(79,"hr",7),p.ic(80,"div",3),p.ic(81,"div",4),p.ic(82,"label"),p.dd(83,"Hot Lead Bucket"),p.hc(),p.hc(),p.ic(84,"select",17),p.dc(85,"option",6),p.bd(86,N,2,3,"option",10),p.hc(),p.hc(),p.hc(),p.dc(87,"hr",7),p.ic(88,"div",18),p.ic(89,"button",19),p.dd(90,"Cancel"),p.hc(),p.ic(91,"button",20),p.qc("click",(function(){return t.onSubmit()})),p.dd(92,"Submit"),p.hc(),p.hc(),p.hc()),2&e&&(p.Pb(4),p.Bc("formGroup",t.form),p.Pb(6),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngValue",!0),p.Pb(2),p.Bc("ngValue",!1),p.Pb(7),p.Bc("matTooltip","Bucket is not selectable if a live filter is selected.")("matTooltipDisabled",!t.form.get("live_filter").value),p.Pb(1),p.Qb("disabled",t.form.get("live_filter").value),p.Pb(1),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.buckets),p.Pb(6),p.Bc("matTooltip","Live Filter is not selectable if a bucket is selected.")("matTooltipDisabled",!t.form.get("bucket").value),p.Pb(1),p.Qb("disabled",t.form.get("bucket").value),p.Pb(1),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.liveFilters),p.Pb(7),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.salesFunnels),p.Pb(7),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.callerIdStrategies),p.Pb(7),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngValue",!0),p.Pb(2),p.Bc("ngValue",!1),p.Pb(8),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngValue",!0),p.Pb(2),p.Bc("ngValue",!1),p.Pb(8),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.maxChannelsPerAgent),p.Pb(7),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.buckets),p.Pb(5),p.Bc("disabled",t.submitDisabled))},directives:[S.B,S.q,S.i,S.y,S.p,S.h,S.t,S.A,D.a,M.o,F.b,f.d],encapsulation:2}),e})();var q=n("+0xr"),V=n("Dh3D"),R=n("NFeN"),E=n("z17N"),z=n("bSwM"),Q=n("STbY"),G=n("Xa2L"),j=n("b3De");const H=["campaignTable"],X=["tableContainer"],W=function(){return["/manager/fdnc-certification"]},U=function(){return{return_url:"/manager/campaigns"}};function Y(e,t){1&e&&(p.ic(0,"div",98),p.dd(1," FDNC calling has been disabled, to re-certify your account click "),p.ic(2,"span",99),p.dd(3,"here"),p.hc(),p.dd(4,".\n"),p.hc()),2&e&&(p.Pb(2),p.Bc("routerLink",p.Fc(2,W))("queryParams",p.Fc(3,U)))}function Z(e,t){if(1&e){const e=p.kc();p.ic(0,"div",98),p.ic(1,"div",100),p.ic(2,"div",101),p.ic(3,"mat-icon",102),p.dd(4,"help_outline"),p.hc(),p.dd(5," The live update feed for this table is currently paused, please click resume to continue updating. "),p.hc(),p.ic(6,"div"),p.ic(7,"button",103),p.qc("click",(function(){return p.Qc(e),p.uc().userIsIdle=!1})),p.dd(8,"Resume "),p.ic(9,"mat-icon"),p.dd(10,"autorenew"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}2&e&&p.Bc("@slideInOut",void 0)}function J(e,t){1&e&&(p.ic(0,"mat-icon",104),p.dd(1,"search"),p.hc())}function K(e,t){1&e&&(p.ic(0,"mat-icon",104),p.dd(1,"close"),p.hc())}const ee=function(e){return{"dyn-m-b-20":e}};function te(e,t){if(1&e){const e=p.kc();p.ic(0,"div",105),p.ic(1,"form",106),p.qc("keydown.enter",(function(t){p.Qc(e);const n=p.uc();return t.preventDefault(),n.onFilterResults()})),p.ic(2,"div",107),p.ic(3,"div"),p.ic(4,"label"),p.dd(5,"Search"),p.hc(),p.dc(6,"br"),p.dc(7,"input",108),p.hc(),p.ic(8,"div"),p.ic(9,"label"),p.dd(10,"Active"),p.hc(),p.dc(11,"br"),p.ic(12,"select",109),p.dc(13,"option",110),p.ic(14,"option",110),p.dd(15,"Active"),p.hc(),p.ic(16,"option",110),p.dd(17,"Inactive"),p.hc(),p.hc(),p.hc(),p.ic(18,"div"),p.ic(19,"label"),p.dd(20,"Calls"),p.hc(),p.dc(21,"br"),p.ic(22,"div",111),p.dc(23,"input",112),p.ic(24,"div",113),p.dd(25,"-"),p.hc(),p.dc(26,"input",114),p.hc(),p.hc(),p.ic(27,"div"),p.ic(28,"label"),p.dd(29,"Calls Connected to a Human"),p.hc(),p.dc(30,"br"),p.ic(31,"div",111),p.dc(32,"input",115),p.ic(33,"div",113),p.dd(34,"-"),p.hc(),p.dc(35,"input",116),p.hc(),p.hc(),p.ic(36,"div"),p.ic(37,"label"),p.dd(38,"Calls Connected to a Machine"),p.hc(),p.dc(39,"br"),p.ic(40,"div",111),p.dc(41,"input",117),p.ic(42,"div",113),p.dd(43,"-"),p.hc(),p.dc(44,"input",118),p.hc(),p.hc(),p.ic(45,"div"),p.ic(46,"label"),p.dd(47,"Calls Connected to an Agent"),p.hc(),p.dc(48,"br"),p.ic(49,"div",111),p.dc(50,"input",119),p.ic(51,"div",113),p.dd(52,"-"),p.hc(),p.dc(53,"input",120),p.hc(),p.hc(),p.ic(54,"div"),p.ic(55,"label"),p.dd(56,"Abandoned Calls"),p.hc(),p.dc(57,"br"),p.ic(58,"div",111),p.dc(59,"input",121),p.ic(60,"div",113),p.dd(61,"-"),p.hc(),p.dc(62,"input",122),p.hc(),p.hc(),p.ic(63,"div"),p.ic(64,"label"),p.dd(65,"No Answer Calls"),p.hc(),p.dc(66,"br"),p.ic(67,"div",111),p.dc(68,"input",123),p.ic(69,"div",113),p.dd(70,"-"),p.hc(),p.dc(71,"input",124),p.hc(),p.hc(),p.ic(72,"div"),p.ic(73,"label"),p.dd(74,"Busy Calls"),p.hc(),p.dc(75,"br"),p.ic(76,"div",111),p.dc(77,"input",125),p.ic(78,"div",113),p.dd(79,"-"),p.hc(),p.dc(80,"input",126),p.hc(),p.hc(),p.ic(81,"div"),p.ic(82,"label"),p.dd(83,"Failed Calls"),p.hc(),p.dc(84,"br"),p.ic(85,"div",111),p.dc(86,"input",127),p.ic(87,"div",113),p.dd(88,"-"),p.hc(),p.dc(89,"input",128),p.hc(),p.hc(),p.ic(90,"div"),p.ic(91,"label"),p.dd(92,"Transfers"),p.hc(),p.dc(93,"br"),p.ic(94,"div",111),p.dc(95,"input",129),p.ic(96,"div",113),p.dd(97,"-"),p.hc(),p.dc(98,"input",130),p.hc(),p.hc(),p.ic(99,"div"),p.ic(100,"label"),p.dd(101,"Calls Under 1min"),p.hc(),p.dc(102,"br"),p.ic(103,"div",111),p.dc(104,"input",131),p.ic(105,"div",113),p.dd(106,"-"),p.hc(),p.dc(107,"input",132),p.hc(),p.hc(),p.ic(108,"div"),p.ic(109,"label"),p.dd(110,"Calls Under 2mins"),p.hc(),p.dc(111,"br"),p.ic(112,"div",111),p.dc(113,"input",133),p.ic(114,"div",113),p.dd(115,"-"),p.hc(),p.dc(116,"input",134),p.hc(),p.hc(),p.ic(117,"div"),p.ic(118,"label"),p.dd(119,"Calls Over 3mins"),p.hc(),p.dc(120,"br"),p.ic(121,"div",111),p.dc(122,"input",135),p.ic(123,"div",113),p.dd(124,"-"),p.hc(),p.dc(125,"input",136),p.hc(),p.hc(),p.ic(126,"div"),p.ic(127,"label"),p.dd(128,"Calls Over 5mins"),p.hc(),p.dc(129,"br"),p.ic(130,"div",111),p.dc(131,"input",137),p.ic(132,"div",113),p.dd(133,"-"),p.hc(),p.dc(134,"input",138),p.hc(),p.hc(),p.ic(135,"div"),p.ic(136,"label"),p.dd(137,"SMS Sent"),p.hc(),p.dc(138,"br"),p.ic(139,"div",111),p.dc(140,"input",139),p.ic(141,"div",113),p.dd(142,"-"),p.hc(),p.dc(143,"input",140),p.hc(),p.hc(),p.ic(144,"div"),p.ic(145,"label"),p.dd(146,"SMS Received"),p.hc(),p.dc(147,"br"),p.ic(148,"div",111),p.dc(149,"input",141),p.ic(150,"div",113),p.dd(151,"-"),p.hc(),p.dc(152,"input",142),p.hc(),p.hc(),p.ic(153,"div"),p.ic(154,"label"),p.dd(155,"Emails Sent"),p.hc(),p.dc(156,"br"),p.ic(157,"div",111),p.dc(158,"input",143),p.ic(159,"div",113),p.dd(160,"-"),p.hc(),p.dc(161,"input",144),p.hc(),p.hc(),p.ic(162,"div"),p.ic(163,"label"),p.dd(164,"Connector Button Clicks"),p.hc(),p.dc(165,"br"),p.ic(166,"div",111),p.dc(167,"input",145),p.ic(168,"div",113),p.dd(169,"-"),p.hc(),p.dc(170,"input",146),p.hc(),p.hc(),p.ic(171,"div"),p.ic(172,"label"),p.dd(173,"Goals"),p.hc(),p.dc(174,"br"),p.ic(175,"div",111),p.dc(176,"input",147),p.ic(177,"div",113),p.dd(178,"-"),p.hc(),p.dc(179,"input",148),p.hc(),p.hc(),p.ic(180,"div"),p.ic(181,"label"),p.dd(182,"Calendar Events"),p.hc(),p.dc(183,"br"),p.ic(184,"div",111),p.dc(185,"input",149),p.ic(186,"div",113),p.dd(187,"-"),p.hc(),p.dc(188,"input",150),p.hc(),p.hc(),p.ic(189,"div"),p.ic(190,"label"),p.dd(191,"Opportunities"),p.hc(),p.dc(192,"br"),p.ic(193,"div",111),p.dc(194,"input",151),p.ic(195,"div",113),p.dd(196,"-"),p.hc(),p.dc(197,"input",152),p.hc(),p.hc(),p.ic(198,"div"),p.ic(199,"label"),p.dd(200,"Logs Total"),p.hc(),p.dc(201,"br"),p.ic(202,"div",111),p.dc(203,"input",153),p.ic(204,"div",113),p.dd(205,"-"),p.hc(),p.dc(206,"input",154),p.hc(),p.hc(),p.ic(207,"div"),p.ic(208,"label"),p.dd(209,"Agents Logged In"),p.hc(),p.dc(210,"br"),p.ic(211,"div",111),p.dc(212,"input",155),p.ic(213,"div",113),p.dd(214,"-"),p.hc(),p.dc(215,"input",156),p.hc(),p.hc(),p.ic(216,"div"),p.ic(217,"label"),p.dd(218,"Agents Waiting"),p.hc(),p.dc(219,"br"),p.ic(220,"div",111),p.dc(221,"input",157),p.ic(222,"div",113),p.dd(223,"-"),p.hc(),p.dc(224,"input",158),p.hc(),p.hc(),p.ic(225,"div"),p.ic(226,"label"),p.dd(227,"Agents on a Call"),p.hc(),p.dc(228,"br"),p.ic(229,"div",111),p.dc(230,"input",159),p.ic(231,"div",113),p.dd(232,"-"),p.hc(),p.dc(233,"input",160),p.hc(),p.hc(),p.ic(234,"div"),p.ic(235,"label"),p.dd(236,"Agents in Post Call Wrap Up"),p.hc(),p.dc(237,"br"),p.ic(238,"div",111),p.dc(239,"input",161),p.ic(240,"div",113),p.dd(241,"-"),p.hc(),p.dc(242,"input",162),p.hc(),p.hc(),p.ic(243,"div"),p.ic(244,"label"),p.dd(245,"Avg Wait Time (Today)"),p.hc(),p.dc(246,"br"),p.ic(247,"div",111),p.dc(248,"input",163),p.ic(249,"div",113),p.dd(250,"-"),p.hc(),p.dc(251,"input",164),p.hc(),p.hc(),p.ic(252,"div"),p.ic(253,"label"),p.dd(254,"Avg Wait Time (Now)"),p.hc(),p.dc(255,"br"),p.ic(256,"div",111),p.dc(257,"input",165),p.ic(258,"div",113),p.dd(259,"-"),p.hc(),p.dc(260,"input",166),p.hc(),p.hc(),p.ic(261,"div"),p.ic(262,"label"),p.dd(263,"Last Call Outbound"),p.hc(),p.dc(264,"br"),p.dc(265,"input",167),p.dc(266,"owl-date-time",168,169),p.hc(),p.ic(268,"div"),p.ic(269,"label"),p.dd(270,"Has Warnings"),p.hc(),p.dc(271,"br"),p.ic(272,"select",170),p.dc(273,"option",171),p.ic(274,"option",171),p.dd(275,"True"),p.hc(),p.ic(276,"option",171),p.dd(277,"False"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(278,"hr"),p.ic(279,"div",172),p.ic(280,"button",173),p.qc("click",(function(){return p.Qc(e),p.uc().clearFilterForm()})),p.dd(281,"Clear Filters"),p.hc(),p.ic(282,"button",174),p.qc("click",(function(){return p.Qc(e),p.uc().onFilterResults()})),p.dd(283,"Filter"),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.Mc(267),t=p.uc();p.Bc("ngClass",p.Gc(11,ee,t.showFilterSection)),p.Pb(1),p.Bc("formGroup",t.filterForm),p.Pb(12),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngValue",!0),p.Pb(2),p.Bc("ngValue",!1),p.Pb(249),p.Bc("selectMode","range")("owlDateTime",e)("owlDateTimeTrigger",e),p.Pb(8),p.Bc("value",null),p.Pb(1),p.Bc("value",!0),p.Pb(2),p.Bc("value",!1)}}function ne(e,t){if(1&e){const e=p.kc();p.gc(0),p.dd(1),p.ic(2,"button",177),p.qc("click",(function(){return p.Qc(e),p.uc(2).selectedType="all"})),p.dd(3),p.vc(4,"number"),p.hc(),p.fc()}if(2&e){const e=p.uc(2);p.Pb(1),p.fd(" All ",e.selection.selected.length," Campaigns on this page are selected. "),p.Pb(2),p.fd("Select all ",p.wc(4,2,e.paginator.totalCount)," Campaigns")}}function ie(e,t){if(1&e){const e=p.kc();p.gc(0),p.dd(1),p.vc(2,"number"),p.ic(3,"button",177),p.qc("click",(function(){p.Qc(e);const t=p.uc(2);return t.selection.clear(),t.selectedType="selected"})),p.dd(4,"Clear Selection"),p.hc(),p.fc()}if(2&e){const e=p.uc(2);p.Pb(1),p.fd(" All ",p.wc(2,1,e.paginator.totalCount)," Campaigns are selected. ")}}function ce(e,t){if(1&e&&(p.ic(0,"div",175),p.bd(1,ne,5,4,"ng-container",176),p.bd(2,ie,5,3,"ng-container",176),p.hc()),2&e){const e=p.uc();p.Pb(1),p.Bc("ngIf","selected"===e.selectedType),p.Pb(1),p.Bc("ngIf","all"===e.selectedType)}}function ae(e,t){if(1&e){const e=p.kc();p.ic(0,"th",178),p.ic(1,"mat-checkbox",179),p.qc("change",(function(t){p.Qc(e);const n=p.uc();return t?n.masterToggle():null})),p.hc(),p.hc()}if(2&e){const e=p.uc();p.Pb(1),p.Bc("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function oe(e,t){if(1&e){const e=p.kc();p.ic(0,"td",180),p.ic(1,"mat-checkbox",181),p.qc("click",(function(t){return p.Qc(e),t.stopPropagation()}))("change",(function(n){p.Qc(e);const i=t.$implicit,c=p.uc();return n&&c.selection.toggle(i),n.checked?null:c.selectedType="selected"})),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=p.uc();p.Pb(1),p.Bc("checked",n.selection.isSelected(e))}}function se(e,t){1&e&&(p.ic(0,"th",182),p.dd(1,"Name "),p.hc())}function re(e,t){1&e&&(p.ic(0,"span",185),p.ic(1,"mat-icon"),p.dd(2,"error_outline"),p.hc(),p.hc())}function de(e,t){if(1&e&&(p.ic(0,"td",183),p.bd(1,re,3,0,"span",184),p.dd(2),p.hc()),2&e){const e=t.$implicit;p.Bc("matTooltip",e.warning_message?e.warning_message:"")("matTooltipDisabled",!e.warning_message),p.Pb(1),p.Bc("ngIf",e.warning_message),p.Pb(1),p.fd(" ",e.name," ")}}function le(e,t){1&e&&(p.ic(0,"th",186),p.dd(1,"Active "),p.hc())}function he(e,t){1&e&&(p.gc(0),p.dc(1,"img",189),p.fc())}function ue(e,t){1&e&&(p.gc(0),p.dc(1,"img",190),p.fc())}function me(e,t){if(1&e){const e=p.kc();p.ic(0,"td",187),p.ic(1,"button",188),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc().showActiveStateConfirmationDialog(n)})),p.bd(2,he,2,0,"ng-container",176),p.bd(3,ue,2,0,"ng-container",176),p.hc(),p.hc()}if(2&e){const e=t.$implicit;p.Pb(1),p.Bc("matTooltip",e.active?"Stop Campaign":"Start Campaign"),p.Pb(1),p.Bc("ngIf",e.active),p.Pb(1),p.Bc("ngIf",!e.active)}}function ge(e,t){1&e&&(p.ic(0,"th",186),p.dd(1,"Count"),p.hc())}function pe(e,t){if(1&e){const e=p.kc();p.ic(0,"td",191),p.ic(1,"span",192),p.dd(2),p.vc(3,"number"),p.hc(),p.ic(4,"mat-menu",null,193),p.ic(6,"button",194),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc().viewCampaignContacts(n)})),p.dd(7," View Contacts "),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=p.Mc(5);p.Pb(1),p.Bc("matMenuTriggerFor",n),p.Pb(1),p.fd(" ",p.wc(3,2,e.total_contact_count)," ")}}function be(e,t){1&e&&(p.ic(0,"th",195),p.dd(1,"Total"),p.hc())}const _e=function(){return["/manager/campaign-logs"]},fe=function(e){return{campaign:e}};function ve(e,t){if(1&e&&(p.ic(0,"td",187),p.ic(1,"span",196),p.dd(2),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("routerLink",p.Fc(3,_e))("queryParams",p.Gc(4,fe,e.campaign)),p.Pb(1),p.fd(" ",null!=e&&e.logs_total?null==e?null:e.logs_total:0," ")}}function ye(e,t){1&e&&(p.ic(0,"th",195),p.dd(1,"Per Agent"),p.hc())}function Ce(e,t){1&e&&(p.gc(0),p.dc(1,"img",198),p.fc())}function xe(e,t){if(1&e&&(p.ic(0,"option",171),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("value",e),p.Pb(1),p.ed(e)}}function we(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"select",199),p.qc("ngModelChange",(function(t){return p.Qc(e),p.uc(3).$implicit.channels_per_agent=t}))("change",(function(t){p.Qc(e);const n=p.uc(3).$implicit;return p.uc().updateCampaignChannels(n,t)})),p.bd(2,xe,2,2,"option",200),p.hc(),p.fc()}if(2&e){const e=p.uc(3).$implicit,t=p.uc();p.Pb(1),p.Bc("ngModel",e.channels_per_agent),p.Pb(1),p.Bc("ngForOf",t.maxChannelsPerAgent)}}function Pe(e,t){if(1&e&&(p.gc(0),p.dd(1),p.fc()),2&e){const e=p.uc(3).$implicit;p.Pb(1),p.fd(" ",e.channels_per_agent," ")}}function ke(e,t){if(1&e&&(p.gc(0),p.bd(1,we,3,2,"ng-container",176),p.bd(2,Pe,2,1,"ng-container",176),p.fc()),2&e){const e=p.uc(3);p.Pb(1),p.Bc("ngIf",e.permissionService.hasPermission("campaigns_write")),p.Pb(1),p.Bc("ngIf",!e.permissionService.hasPermission("campaigns_write"))}}function Se(e,t){if(1&e&&(p.gc(0),p.bd(1,Ce,2,0,"ng-container",176),p.bd(2,ke,3,2,"ng-container",176),p.fc()),2&e){const e=p.uc().$implicit;p.Pb(1),p.Bc("ngIf",e.auto_pilot&&e.active),p.Pb(1),p.Bc("ngIf",!e.auto_pilot)}}function Be(e,t){if(1&e&&(p.ic(0,"td",197),p.bd(1,Se,3,2,"ng-container",176),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("ngIf",e.originate_calls)}}function De(e,t){1&e&&(p.ic(0,"th",201),p.dd(1,"Now"),p.hc())}function Me(e,t){1&e&&(p.gc(0),p.dd(1," 300+ "),p.fc())}function Fe(e,t){if(1&e&&(p.gc(0),p.dd(1),p.fc()),2&e){const e=p.uc().$implicit;p.Pb(1),p.fd(" ",null==e?null:e.now_avg_wait_time," ")}}function Ie(e,t){if(1&e&&(p.ic(0,"td",202),p.bd(1,Me,2,0,"ng-container",176),p.bd(2,Fe,2,1,"ng-container",176),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("ngIf",(null==e?null:e.now_avg_wait_time)>300),p.Pb(1),p.Bc("ngIf",(null==e?null:e.now_avg_wait_time)<300)}}function Ae(e,t){1&e&&(p.ic(0,"th",203),p.dd(1,"Today"),p.hc())}function Te(e,t){1&e&&(p.gc(0),p.dd(1," 300+ "),p.fc())}function Oe(e,t){if(1&e&&(p.gc(0),p.dd(1),p.fc()),2&e){const e=p.uc().$implicit;p.Pb(1),p.fd(" ",null==e?null:e.today_avg_wait_time," ")}}function Le(e,t){if(1&e&&(p.ic(0,"td",204),p.bd(1,Te,2,0,"ng-container",176),p.bd(2,Oe,2,1,"ng-container",176),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("ngIf",(null==e?null:e.today_avg_wait_time)>300),p.Pb(1),p.Bc("ngIf",(null==e?null:e.today_avg_wait_time)<300)}}function Ne(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Total"),p.hc())}function $e(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound?null==e?null:e.calls_outbound:0," ")}}function qe(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Human"),p.hc())}function Ve(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_human?null==e?null:e.calls_outbound_human:0," ")}}function Re(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Machine"),p.hc())}function Ee(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_machine?null==e?null:e.calls_outbound_machine:0," ")}}function ze(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"To Agents"),p.hc())}function Qe(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_agent_connect?null==e?null:e.calls_outbound_agent_connect:0," ")}}function Ge(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Abandoned"),p.hc())}function je(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.ic(2,"span",207),p.dd(3),p.vc(4,"number"),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_abandoned?null==e?null:e.calls_outbound_abandoned:0," "),p.Pb(2),p.fd(" (",(null==e?null:e.calls_outbound_agent_connect_attempt)<1?0:(null==e?null:e.calls_outbound_abandoned)/(null==e?null:e.calls_outbound_agent_connect_attempt)*100>100?100:p.xc(4,2,(null==e?null:e.calls_outbound_abandoned)/(null==e?null:e.calls_outbound_agent_connect_attempt)*100,"1.0-2"),"%) ")}}function He(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," No Ans "),p.hc())}function Xe(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_noanswer?null==e?null:e.calls_outbound_noanswer:0," ")}}function We(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," Busy "),p.hc())}function Ue(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_busy?null==e?null:e.calls_outbound_busy:0," ")}}function Ye(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," Failed "),p.hc())}function Ze(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_outbound_failed?null==e?null:e.calls_outbound_failed:0," ")}}function Je(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," <1min "),p.hc())}function Ke(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_under_1min?null==e?null:e.calls_under_1min:0," ")}}function et(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," <2min "),p.hc())}function tt(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_under_2min?null==e?null:e.calls_under_2min:0," ")}}function nt(e,t){1&e&&(p.ic(0,"th",205),p.dd(1," >3min "),p.hc())}function it(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_over_3min?null==e?null:e.calls_over_3min:0," ")}}function ct(e,t){1&e&&(p.ic(0,"th",195),p.dd(1," >5min "),p.hc())}function at(e,t){if(1&e&&(p.ic(0,"td",187),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calls_over_5min?null==e?null:e.calls_over_5min:0," ")}}function ot(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Sent"),p.hc())}function st(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.sms_sent?null==e?null:e.sms_sent:0," ")}}function rt(e,t){1&e&&(p.ic(0,"th",195),p.dd(1,"Received"),p.hc())}function dt(e,t){if(1&e&&(p.ic(0,"td",187),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.sms_received?null==e?null:e.sms_received:0," ")}}function lt(e,t){1&e&&(p.ic(0,"th",195),p.dd(1,"Sent"),p.hc())}function ht(e,t){if(1&e&&(p.ic(0,"td",187),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.emails_sent?null==e?null:e.emails_sent:0," ")}}function ut(e,t){1&e&&(p.ic(0,"th",208),p.dd(1,"Logged In"),p.hc())}const mt=function(e){return{logged_in_agents_for_campaign:e}};function gt(e,t){if(1&e&&(p.ic(0,"td",206),p.ic(1,"span",209),p.dd(2),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("queryParams",p.Gc(2,mt,e.campaign)),p.Pb(1),p.fd(" ",null!=e&&e.logged_in_agents?null==e?null:e.logged_in_agents:0," ")}}function pt(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Waiting"),p.hc())}const bt=function(e){return{waiting_agents_for_campaign:e}};function _t(e,t){if(1&e&&(p.ic(0,"td",206),p.ic(1,"span",209),p.dd(2),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("queryParams",p.Gc(2,bt,e.campaign)),p.Pb(1),p.fd(" ",null!=e&&e.waiting_agents?null==e?null:e.waiting_agents:0," ")}}function ft(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"On Call"),p.hc())}const vt=function(e){return{phone_call_agents_for_campaign:e}};function yt(e,t){if(1&e&&(p.ic(0,"td",206),p.ic(1,"span",209),p.dd(2),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("queryParams",p.Gc(2,vt,e.campaign)),p.Pb(1),p.fd(" ",e.phone_call_agents?e.phone_call_agents:0," ")}}function Ct(e,t){1&e&&(p.ic(0,"th",195),p.dd(1,"Post Call"),p.hc())}const xt=function(e){return{post_call_agents_for_campaign:e}};function wt(e,t){if(1&e&&(p.ic(0,"td",187),p.ic(1,"span",209),p.dd(2),p.hc(),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("queryParams",p.Gc(2,xt,e.campaign)),p.Pb(1),p.fd(" ",null!=e&&e.post_call_wrap_up_agents?null==e?null:e.post_call_wrap_up_agents:0," ")}}function Pt(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Calendar Events"),p.hc())}function kt(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.calendar_events?null==e?null:e.calendar_events:0," ")}}function St(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Opportunities"),p.hc())}function Bt(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.opportunities?null==e?null:e.opportunities:0," ")}}function Dt(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Goals"),p.hc())}function Mt(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.goals?null==e?null:e.goals:0," ")}}function Ft(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Transfers"),p.hc())}function It(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.transfers?null==e?null:e.transfers:0," ")}}function At(e,t){1&e&&(p.ic(0,"th",205),p.dd(1,"Connectors"),p.hc())}function Tt(e,t){if(1&e&&(p.ic(0,"td",206),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.fd(" ",null!=e&&e.connector_button_clicks?null==e?null:e.connector_button_clicks:0," ")}}function Ot(e,t){1&e&&(p.ic(0,"th",210),p.dd(1," Controls "),p.hc())}const Lt=function(e){return["/manager/campaigns/connectors",e]};function Nt(e,t){if(1&e&&(p.ic(0,"button",219),p.dd(1,"Connectors"),p.hc()),2&e){const e=p.uc().$implicit;p.Bc("routerLink",p.Gc(1,Lt,e.campaign))}}const $t=function(e){return["/manager/campaigns/edit",e]},qt=function(e){return["/manager/campaigns/members",e]},Vt=function(e){return["/manager/campaigns/call-dispositions",e]},Rt=function(e){return["/manager/campaigns/agent-dashboard-settings",e]},Et=function(e){return["/manager/campaigns/change-logs",e]},zt=function(e){return["/manager/campaign-priority-redials",e]};function Qt(e,t){if(1&e){const e=p.kc();p.ic(0,"td",211),p.ic(1,"button",212),p.ic(2,"mat-icon",213),p.dd(3,"settings"),p.hc(),p.hc(),p.ic(4,"button",214),p.ic(5,"mat-icon",213),p.dd(6,"group"),p.hc(),p.hc(),p.ic(7,"button",215),p.dc(8,"img",216),p.hc(),p.ic(9,"button",217),p.ic(10,"mat-icon",213),p.dd(11,"more_vert"),p.hc(),p.hc(),p.ic(12,"mat-menu",null,218),p.ic(14,"button",194),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc().updateCampaignActiveState(n.campaign,n.active)})),p.dd(15),p.hc(),p.ic(16,"button",219),p.dd(17,"Settings"),p.hc(),p.ic(18,"button",219),p.dd(19,"Members"),p.hc(),p.ic(20,"div",220),p.ic(21,"button",221),p.dd(22,"Recycle Contacts"),p.hc(),p.hc(),p.bd(23,Nt,2,3,"button",222),p.ic(24,"button",219),p.dd(25," Call Dispositions "),p.hc(),p.ic(26,"button",219),p.dd(27," Agent Dashboard Settings "),p.hc(),p.ic(28,"div",223),p.ic(29,"button",224),p.dd(30," View Change Log "),p.hc(),p.hc(),p.ic(31,"button",219),p.dd(32," View Priority Redials "),p.hc(),p.ic(33,"button",194),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc().showCopyCampaignDialog(n)})),p.dd(34,"Copy"),p.hc(),p.ic(35,"button",194),p.qc("click",(function(){p.Qc(e);const n=t.$implicit,i=t.index;return p.uc().showDeleteConfirmationDialog(n,i)})),p.dd(36,"Delete"),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=t.first,i=p.Mc(13),c=p.uc();p.Pb(1),p.Tb("first-campaign-edit-btn",n),p.Bc("disableRipple",!0)("routerLink",p.Gc(25,$t,e.campaign)),p.Pb(1),p.Tb("first-campaign-edit-btn",n),p.Pb(2),p.Bc("disableRipple",!0)("routerLink",p.Gc(27,qt,e.campaign)),p.Pb(3),p.Bc("disableRipple",!0)("routerLink",p.Gc(29,Lt,e.campaign)),p.Pb(2),p.Bc("disableRipple",!0)("matMenuTriggerFor",i),p.Pb(6),p.fd(" ",e.active?"Stop Campaign":"Start Campaign"," "),p.Pb(1),p.Bc("routerLink",p.Gc(31,$t,e.campaign)),p.Pb(2),p.Bc("routerLink",p.Gc(33,qt,e.campaign)),p.Pb(2),p.Bc("matTooltipDisabled",c.permissionService.hasPermission("campaigns_write")),p.Pb(1),p.Bc("disabled",!c.permissionService.hasPermission("campaigns_write"))("queryParams",p.Gc(35,fe,e.campaign)),p.Pb(2),p.Bc("ngIf",c.accountFeatureService.accountFeaturesSubject.value&&c.accountFeatureService.accountFeaturesSubject.value.connectors),p.Pb(1),p.Bc("routerLink",p.Gc(37,Vt,e.campaign)),p.Pb(2),p.Bc("routerLink",p.Gc(39,Rt,e.campaign)),p.Pb(2),p.Bc("matTooltipDisabled",c.permissionService.hasPermission("campaigns_page")),p.Pb(1),p.Bc("disabled",!c.permissionService.hasPermission("campaigns_page"))("routerLink",p.Gc(41,Et,e.campaign)),p.Pb(2),p.Bc("routerLink",p.Gc(43,zt,e.campaign))}}function Gt(e,t){1&e&&p.dc(0,"th",225),2&e&&p.Qb("colspan",2)}function jt(e,t){1&e&&p.dc(0,"th",225),2&e&&p.Qb("colspan",1)}function Ht(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Contact "),p.hc()),2&e&&p.Qb("colspan",1)}function Xt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1,"Logs"),p.hc()),2&e&&p.Qb("colspan",1)}function Wt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1,"Channels"),p.hc()),2&e&&p.Qb("colspan",1)}function Ut(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Agent Wait Time (Seconds)"),p.hc()),2&e&&p.Qb("colspan",2)}function Yt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Calls (Today) "),p.ic(2,"mat-icon",226),p.dd(3,"help"),p.hc(),p.hc()),2&e&&p.Qb("colspan",12)}function Zt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," SMS "),p.hc()),2&e&&p.Qb("colspan",2)}function Jt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Email "),p.hc()),2&e&&p.Qb("colspan",1)}function Kt(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Agents "),p.hc()),2&e&&p.Qb("colspan",4)}function en(e,t){1&e&&(p.ic(0,"th",225),p.dd(1," Outcomes "),p.ic(2,"mat-icon",227),p.dd(3,"help"),p.hc(),p.hc()),2&e&&p.Qb("colspan",5)}function tn(e,t){1&e&&p.dc(0,"th",228),2&e&&p.Qb("colspan",1)}function nn(e,t){1&e&&p.dc(0,"tr",229)}function cn(e,t){1&e&&p.dc(0,"tr",229)}const an=function(e){return{warning:e}};function on(e,t){1&e&&p.dc(0,"tr",230),2&e&&p.Bc("ngClass",p.Gc(1,an,t.$implicit.warning_message))}function sn(e,t){1&e&&(p.ic(0,"div",231),p.dc(1,"mat-progress-spinner",232),p.dd(2," Loading... "),p.hc())}function rn(e,t){1&e&&(p.ic(0,"div",233),p.dd(1," No Results Found "),p.hc())}function dn(e,t){if(1&e){const e=p.kc();p.ic(0,"paginator",234),p.qc("updatePerPage",(function(t){return p.Qc(e),p.uc().updateResultsPerPage(t)}))("goPage",(function(t){return p.Qc(e),p.uc().goToPage(t)})),p.hc()}if(2&e){const e=p.uc();p.Bc("showPaginationLoader",e.paginator.showPaginationLoader)("totalCount",e.paginator.totalCount)("perPage",e.paginator.resultsPerPage)("currentPage",e.paginator.currentPage)("prevButton",e.paginator.prevButton)("nextButton",e.paginator.nextButton)}}const ln=function(){return["campaign_name","campaign_active","contacts","logs","channels","wait-time","calls","sms","email","agents","outcomes","controls-group"]},hn=function(e){return{show:e}};let un=(()=>{class e{constructor(e,t,n,i,c,a,o,s,r,d,l,h){this.permissionService=e,this.accountFeatureService=t,this._fb=n,this._router=i,this._dialog=c,this._campaignService=a,this._snackBar=o,this._authService=s,this._campaignStatService=r,this._utils=d,this._accountSettingService=l,this._softwareLicenseService=h,this.userInactive=new u.a,this.disableIdleTimeout=!1,this.campaigns=[],this.campaignStatMap=[],this.loading=!1,this.userIsIdle=!1,this.maxChannelsPerAgent=[],this.showFilterSection=!1,this.sortBy=null,this.isCampaignTableScrolledRight=!1,this.selection=new C.c(!0,[]),this.selectedType="selected",this.tableColumns=["select","campaign__name","campaign__active","total_saved_contact_count","logs_total","campaign__channels_per_agent","cached_now_avg_wait_time","recent_avg_wait_time","calls_outbound","calls_outbound_human","calls_outbound_machine","calls_outbound_agent_connect","calls_outbound_abandoned","calls_outbound_noanswer","calls_outbound_busy","calls_outbound_failed","calls_under_1min","calls_under_2min","calls_over_3min","calls_over_5min","sms_sent","sms_received","emails_sent","cached_logged_in_agents","cached_waiting_agents","cached_phone_call_agents","cached_post_call_wrap_up_agents","calendar_events","opportunities","goals","transfers","connector_button_clicks","controls"],this.paginator={showPaginationLoader:!1,totalCount:null,prevButton:"",nextButton:"",currentPage:1,resultsPerPage:25},this.filterForm=this._fb.group({search:"",campaign__active:null,calls_outbound__range_min:null,calls_outbound__range_max:null,calls_outbound_human__range_min:null,calls_outbound_human__range_max:null,calls_outbound_machine__range_min:null,calls_outbound_machine__range_max:null,calls_outbound_agent_connect__range_min:null,calls_outbound_agent_connect__range_max:null,calls_outbound_busy__range_min:null,calls_outbound_busy__range_max:null,calls_outbound_failed__range_min:null,calls_outbound_failed__range_max:null,calls_outbound_noanswer__range_min:null,calls_outbound_noanswer__range_max:null,calls_outbound_abandoned__range_min:null,calls_outbound_abandoned__range_max:null,recent_avg_wait_time__range_min:null,recent_avg_wait_time__range_max:null,transfers__range_min:null,transfers__range_max:null,calls_under_1min__range_min:null,calls_under_1min__range_max:null,calls_under_2min__range_min:null,calls_under_2min__range_max:null,calls_over_3min__range_min:null,calls_over_3min__range_max:null,calls_over_5min__range_min:null,calls_over_5min__range_max:null,sms_sent__range_min:null,sms_sent__range_max:null,sms_received__range_min:null,sms_received__range_max:null,emails_sent__range_min:null,emails_sent__range_max:null,connector_button_clicks__range_min:null,connector_button_clicks__range_max:null,goals__range_min:null,goals__range_max:null,calendar_events__range_min:null,calendar_events__range_max:null,opportunities__range_min:null,opportunities__range_max:null,logs_total__range_min:null,logs_total__range_max:null,cached_logged_in_agents__range_min:null,cached_logged_in_agents__range_max:null,cached_waiting_agents__range_min:null,cached_waiting_agents__range_max:null,cached_phone_call_agents__range_min:null,cached_phone_call_agents__range_max:null,cached_post_call_wrap_up_agents__range_min:null,cached_post_call_wrap_up_agents__range_max:null,cached_now_avg_wait_time__range_min:null,cached_now_avg_wait_time__range_max:null,last_call_outbound:null,has_warning:null})}refreshUserState(){clearTimeout(this.userActivity),this.setIdleTimeout()}ngOnInit(){this.setIdleTimeout(),this.userInactive.subscribe(()=>{this.userIsIdle=!0}),this.timerInterval=setInterval(()=>{this.userIsIdle||this._getCampaigns()},3e4),this.loading=!0,this._getCampaigns(),this._getMaxChannelsPerAgent(),this._authService.currentUser.subscribe({next:e=>{e&&this._getAccountSettings(e.account_id)}})}ngOnDestroy(){clearInterval(this.timerInterval),this.timerInterval=null,this.userInactive.unsubscribe(),clearTimeout(this.userActivity)}isAllSelected(){return this.selection.selected.length===this.campaigns.length}showBulkEditDialog(){this._dialog.open($,{width:"600px",data:{campaigns:this.selection.selected,selectedType:this.selectedType,searchParams:this.filterForm.value}}).afterClosed().subscribe({next:e=>{e&&(this._getCampaigns(),this.selection.clear())}})}masterToggle(){this.isAllSelected()?this.selection.clear():this.campaigns.forEach(e=>this.selection.select(e))}showUsCanadaMapDialog(){this._dialog.open(y,{width:"800px",data:[]})}onCampaignTableScroll(e){const t=Math.ceil(this.tableContainer.nativeElement.scrollLeft+e.target.offsetWidth);this.isCampaignTableScrolledRight=t>=this.tableContainer.nativeElement.scrollWidth}onSortData(e){this.paginator.currentPage=1,this.sortBy=""===e.direction?null:{field:e.active,direction:e.direction},this._getCampaigns()}clearFilterForm(){this.paginator.currentPage=1,this.filterForm.setValue({search:"",campaign__active:null,calls_outbound__range_min:null,calls_outbound__range_max:null,calls_outbound_human__range_min:null,calls_outbound_human__range_max:null,calls_outbound_machine__range_min:null,calls_outbound_machine__range_max:null,calls_outbound_agent_connect__range_min:null,calls_outbound_agent_connect__range_max:null,calls_outbound_busy__range_min:null,calls_outbound_busy__range_max:null,calls_outbound_failed__range_min:null,calls_outbound_failed__range_max:null,calls_outbound_noanswer__range_min:null,calls_outbound_noanswer__range_max:null,calls_outbound_abandoned__range_min:null,calls_outbound_abandoned__range_max:null,recent_avg_wait_time__range_min:null,recent_avg_wait_time__range_max:null,transfers__range_min:null,transfers__range_max:null,calls_under_1min__range_min:null,calls_under_1min__range_max:null,calls_under_2min__range_min:null,calls_under_2min__range_max:null,calls_over_3min__range_min:null,calls_over_3min__range_max:null,calls_over_5min__range_min:null,calls_over_5min__range_max:null,sms_sent__range_min:null,sms_sent__range_max:null,sms_received__range_min:null,sms_received__range_max:null,emails_sent__range_min:null,emails_sent__range_max:null,connector_button_clicks__range_min:null,connector_button_clicks__range_max:null,goals__range_min:null,goals__range_max:null,calendar_events__range_min:null,calendar_events__range_max:null,opportunities__range_min:null,opportunities__range_max:null,logs_total__range_min:null,logs_total__range_max:null,cached_logged_in_agents__range_min:null,cached_logged_in_agents__range_max:null,cached_waiting_agents__range_min:null,cached_waiting_agents__range_max:null,cached_phone_call_agents__range_min:null,cached_phone_call_agents__range_max:null,cached_post_call_wrap_up_agents__range_min:null,cached_post_call_wrap_up_agents__range_max:null,cached_now_avg_wait_time__range_min:null,cached_now_avg_wait_time__range_max:null,last_call_outbound:null,has_warning:null}),this._getCampaigns()}onFilterResults(){this.paginator.currentPage=1,this.selection.clear(),this._snackBar.open("Filtering..","X",{duration:2e3,verticalPosition:"top",panelClass:"success"}),this._getCampaigns()}updateCampaignChannels(e,t){if(!this.permissionService.hasPermission("campaigns_write"))return void this._snackBar.open("You don't have permission to update campaigns","X",{duration:3e3,verticalPosition:"top",panelClass:"error"});const n=parseInt(t.target.value);this._campaignService.update(e.campaign,{channels_per_agent:n}).subscribe({next:()=>{this._snackBar.open("Campaign Updated Successfully","X",{duration:3e3,verticalPosition:"top",panelClass:"success"})},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error updating campaign"),"X",{duration:3e3,verticalPosition:"top",panelClass:"error"})}})}setIdleTimeout(){this.userActivity=setTimeout(()=>{this.userIsIdle||this.disableIdleTimeout||this.userInactive.next(!0)},9e5)}showActiveStateConfirmationDialog(e){this._dialog.open(d.a,{width:"400px",data:{title:`Set Campaign to ${e.active?"Not Active":"Active"}?`,buttonText:"Submit"}}).afterClosed().subscribe({next:t=>{t&&this.updateCampaignActiveState(e.campaign,e.active)}})}showCopyCampaignDialog(e){this.permissionService.hasPermission("campaigns_write")?this._dialog.open(d.a,{width:"500px",data:{title:`Are you sure you want to duplicate ${e.name}?`,buttonText:"Copy"}}).afterClosed().subscribe({next:t=>{t&&this._campaignService.copy(e.campaign).subscribe({next:()=>{this._snackBar.open("Campaign copied successfully","X",{duration:5e3,verticalPosition:"top",panelClass:"success"}),this._getCampaigns()},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error duplicating this campaign"),"",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}})}}):this._snackBar.open("You are missing the campaigns_write permission","X",{duration:3e3,panelClass:"error",verticalPosition:"top"})}showDeleteConfirmationDialog(e,t){this._dialog.open(d.a,{width:"400px",data:{title:`Delete ${e.name}?`,buttonText:"Delete"}}).afterClosed().subscribe({next:n=>{n&&this._deleteCampaign(e.id,t)}})}updateCampaignActiveState(e,t){this._campaignService.update(e,{active:!t}).subscribe({next:e=>{this._getCampaigns(),this._snackBar.open(e.active?"Campaign has been started":"Campaign has been stopped","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})},error:e=>{const t=e.error.non_field_errors;t&&this._snackBar.open(t[0],"X",{duration:2500,verticalPosition:"top",panelClass:["error"]})}})}goToPage(e){this.paginator.currentPage=e,this._getCampaigns(),this.selection.clear()}updateResultsPerPage(e){this.paginator.currentPage=1,this.paginator.resultsPerPage=e,this._getCampaigns(),this.selection.clear()}viewCampaignContacts(e){this._campaignService.get(e.campaign).subscribe({next:e=>{e.live_filter?this._router.navigate(["/manager/live-filters/preview/",e.live_filter]):e.bucket&&this._router.navigate(["/manager/contacts"],{queryParams:{bucket:e.bucket}})}})}_getMaxChannelsPerAgent(){this._softwareLicenseService.getCampaignChannelsPerAgent().subscribe({next:e=>{const t=e["Campaign Channel Per Agent"].license_quantity;let n=[];for(let i=1;i<t+1;i++)n.push(i);this.maxChannelsPerAgent=n}})}_getAccountSettings(e){this._accountSettingService.getByAccountId(e).subscribe({next:e=>{this.accountSettings=e,this.disableIdleTimeout=e.live_reports_dont_timeout}})}_deleteCampaign(e,t){this._campaignService.delete(e).subscribe({next:()=>{this.campaigns.splice(t,1),this.campaignTable.renderRows(),this._snackBar.open("Campaign Deleted Successfully","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error deleting campaign"),"X",{duration:3e4,verticalPosition:"top",panelClass:["error"]})}})}_getCampaigns(){this.paginator.showPaginationLoader=!0,this._campaignStatService.filter(this.paginator.resultsPerPage,this.paginator.currentPage,this.filterForm.value,this.sortBy).subscribe({next:e=>{this.paginator.showPaginationLoader=!1,this.campaigns=e.results,this.paginator.nextButton=e.next,this.paginator.prevButton=e.previous,this.paginator.totalCount=e.count,this.loading=!1},error:()=>{this.paginator.showPaginationLoader=!1,this.loading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(l.a),p.bc(h.a),p.bc(S.f),p.bc(c.g),p.bc(f.b),p.bc(a.a),p.bc(B.a),p.bc(s.a),p.bc(o.a),p.bc(r.a),p.bc(g.a),p.bc(_))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&(p.Wc(H,!0),p.jd(X,!0)),2&e&&(p.Lc(n=p.rc())&&(t.campaignTable=n.first),p.Lc(n=p.rc())&&(t.tableContainer=n.first))},hostBindings:function(e,t){1&e&&p.qc("mousemove",(function(){return t.refreshUserState()}),!1,p.Pc)},decls:185,vars:22,consts:[["class","dyn-large-rounded-btn dyn-block dyn-m-b-20","style","display: block!important;",4,"ngIf"],[1,"dyn-card"],[1,"dyn-flex","dyn-space-between","dyn-align-items"],[1,"dyn-m-t-10","dyn-m-b-10"],[1,"dyn-m-0","dyn-text-muted"],["routerLink","/manager/live-filters",1,"dyn-underline","dyn-link","dyn-cursor-pointer"],["routerLink","/manager/sales-funnels",1,"dyn-underline","dyn-link","dyn-cursor-pointer"],["routerLink","/manager/caller-id-strategies",1,"dyn-underline","dyn-link","dyn-cursor-pointer"],[1,"dyn-inline-block","dyn-m-r-10"],["mat-stroked-button","","color","",3,"click"],["class","dyn-vertical-middle",4,"ngIf"],["matTooltip","You must have the 'campaigns_write' permission to create campaigns",1,"dyn-inline-block",3,"matTooltipDisabled"],["mat-raised-button","","color","primary","routerLink","/manager/campaigns/create","id","create-campaign-btn",1,"create-campaign-btn",3,"disabled"],["class","dyn-bg-grey dyn-p-20 dyn-m-t-10",3,"ngClass",4,"ngIf"],["class","dyn-p-10 dyn-m-t-10 dyn-text-center","style","background: #eff3f6;",4,"ngIf"],[1,"dyn-m-t-10",2,"overflow","auto",3,"scroll"],["tableContainer",""],["mat-table","","matSort","",1,"dyn-full-width",3,"dataSource","matSortChange"],["campaignTable",""],["matColumnDef","select","sticky",""],["mat-header-cell","","style","padding-right: 20px!important;",4,"matHeaderCellDef"],["mat-cell","","style","padding-right: 10px!important;",4,"matCellDef"],["matColumnDef","campaign__name","sticky",""],["mat-header-cell","","mat-sort-header","","class","dyn-text-left dyn-border-right",4,"matHeaderCellDef"],["mat-cell","","class","dyn-text-left dyn-p-r-20 dyn-border-right dyn-m-l-10",3,"matTooltip","matTooltipDisabled",4,"matCellDef"],["matColumnDef","campaign__active"],["mat-header-cell","","class","dyn-p-r-10 dyn-p-l-10 dyn-border-right",4,"matHeaderCellDef"],["mat-cell","","class","dyn-border-right",4,"matCellDef"],["matColumnDef","total_saved_contact_count"],["mat-cell","","class","dyn-border-right dyn-p-r-10 dyn-p-l-10",4,"matCellDef"],["matColumnDef","logs_total"],["mat-header-cell","","mat-sort-header","","class","dyn-p-r-10 dyn-p-l-10 dyn-border-right",4,"matHeaderCellDef"],["matColumnDef","campaign__channels_per_agent"],["mat-cell","","class","dyn-border-right","style","padding-right: 5px!important;padding-left:5px!important;",4,"matCellDef"],["matColumnDef","cached_now_avg_wait_time"],["mat-header-cell","","mat-sort-header","","class","now-avg-wait-time-header dyn-p-r-10 dyn-p-l-10",4,"matHeaderCellDef"],["mat-cell","","class","dyn-p-r-10 dyn-p-l-10",4,"matCellDef"],["matColumnDef","recent_avg_wait_time"],["mat-header-cell","","mat-sort-header","","class","recent-avg-wait-time-header dyn-p-r-10 dyn-p-l-10 dyn-border-right",4,"matHeaderCellDef"],["mat-cell","","class","dyn-border-right dyn-p-r-10",4,"matCellDef"],["matColumnDef","calls_outbound"],["mat-header-cell","","mat-sort-header","","class","dyn-p-r-10 dyn-p-l-10",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","calls_outbound_human"],["matColumnDef","calls_outbound_machine"],["matColumnDef","calls_outbound_agent_connect"],["matColumnDef","calls_outbound_abandoned"],["matColumnDef","calls_outbound_noanswer"],["matColumnDef","calls_outbound_busy"],["matColumnDef","calls_outbound_failed"],["matColumnDef","calls_under_1min"],["matColumnDef","calls_under_2min"],["matColumnDef","calls_over_3min"],["matColumnDef","calls_over_5min"],["matColumnDef","sms_sent"],["matColumnDef","sms_received"],["matColumnDef","emails_sent"],["matColumnDef","cached_logged_in_agents"],["mat-header-cell","","mat-sort-header","","class","dyn-p-r-10 dyn-p-l-10 dyn-p-l-10",4,"matHeaderCellDef"],["matColumnDef","cached_waiting_agents"],["matColumnDef","cached_phone_call_agents"],["matColumnDef","cached_post_call_wrap_up_agents"],["matColumnDef","calendar_events"],["matColumnDef","opportunities"],["matColumnDef","goals"],["matColumnDef","transfers"],["matColumnDef","connector_button_clicks"],["matColumnDef","controls","stickyEnd",""],["mat-header-cell","","class","dyn-p-l-10 dyn-border-left",4,"matHeaderCellDef"],["mat-cell","","class","dyn-border-left","style","padding-right: 0!important;",4,"matCellDef"],["matColumnDef","campaign_name","sticky",""],["mat-header-cell","","class","top-header dyn-text-center dyn-bg-grey dyn-p-l-10 dyn-p-r-10",4,"matHeaderCellDef"],["matColumnDef","campaign_active"],["matColumnDef","contacts"],["matColumnDef","logs"],["matColumnDef","channels"],["matColumnDef","wait-time"],["matColumnDef","calls"],["matColumnDef","sms"],["matColumnDef","email"],["matColumnDef","agents"],["matColumnDef","outcomes"],["matColumnDef","controls-group","stickyEnd",""],["mat-header-cell","","class","top-header dyn-text-center dyn-bg-grey dyn-p-l-10",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","dyn-table-hover",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","dyn-p-20",4,"ngIf"],["class","dyn-text-center dyn-p-20 dyn-text-muted",4,"ngIf"],[3,"showPaginationLoader","totalCount","perPage","currentPage","prevButton","nextButton","updatePerPage","goPage",4,"ngIf"],[1,"dyn-m-t-10","dyn-flex","dyn-space-between","dyn-align-items"],["src","assets/img/infinity-dark.svg","height","25px",1,"dyn-vertical-middle"],[1,"dyn-link","dyn-underline","dyn-text-sm",3,"click"],[1,"dyn-table-pop-up","dyn-flex","dyn-align-items","dyn-space-between",3,"ngClass"],[1,"dyn-p-r-50"],["mat-stroked-button","","color","",1,"dyn-m-r-15",2,"border-color","#fff",3,"click"],[1,"material-icons","dyn-vertical-middle"],[1,"dyn-inline-block","dyn-m-r-15"],["mat-raised-button","",1,"dyn-m-r-15",3,"click"],[1,"dyn-large-rounded-btn","dyn-block","dyn-m-b-20",2,"display","block!important"],[1,"dyn-link","dyn-underline",3,"routerLink","queryParams"],[1,"dyn-flex","dyn-space-between"],[1,"dyn-flex","dyn-align-items"],[1,"dyn-vertical-middle","dyn-m-r-10"],["mat-raised-button","","color","primary",3,"click"],[1,"dyn-vertical-middle"],[1,"dyn-bg-grey","dyn-p-20","dyn-m-t-10",3,"ngClass"],[3,"formGroup","keydown.enter"],[1,"filter-options-container"],["type","search","formControlName","search",2,"width","150px"],["formControlName","campaign__active",2,"width","150px"],[3,"ngValue"],[1,"dyn-flex",2,"align-items","center"],["formControlName","calls_outbound__range_min","type","number",2,"width","50%"],[1,"dyn-m-l-5","dyn-m-r-5"],["formControlName","calls_outbound__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_human__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_human__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_machine__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_machine__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_agent_connect__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_agent_connect__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_abandoned__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_abandoned__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_noanswer__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_noanswer__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_busy__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_busy__range_max","type","number",2,"width","50%"],["formControlName","calls_outbound_failed__range_min","type","number",2,"width","50%"],["formControlName","calls_outbound_failed__range_max","type","number",2,"width","50%"],["formControlName","transfers__range_min","type","number",2,"width","50%"],["formControlName","transfers__range_max","type","number",2,"width","50%"],["formControlName","calls_under_1min__range_min","type","number",2,"width","50%"],["formControlName","calls_under_1min__range_max","type","number",2,"width","50%"],["formControlName","calls_under_2min__range_min","type","number",2,"width","50%"],["formControlName","calls_under_2min__range_max","type","number",2,"width","50%"],["formControlName","calls_over_3min__range_min","type","number",2,"width","50%"],["formControlName","calls_over_3min__range_max","type","number",2,"width","50%"],["formControlName","calls_over_5min__range_min","type","number",2,"width","50%"],["formControlName","calls_over_5min__range_max","type","number",2,"width","50%"],["formControlName","sms_sent__range_min","type","number",2,"width","50%"],["formControlName","sms_sent__range_max","type","number",2,"width","50%"],["formControlName","sms_received__range_min","type","number",2,"width","50%"],["formControlName","sms_received__range_max","type","number",2,"width","50%"],["formControlName","emails_sent__range_min","type","number",2,"width","50%"],["formControlName","emails_sent__range_max","type","number",2,"width","50%"],["formControlName","connector_button_clicks__range_min","type","number",2,"width","50%"],["formControlName","connector_button_clicks__range_max","type","number",2,"width","50%"],["formControlName","goals__range_min","type","number",2,"width","50%"],["formControlName","goals__range_max","type","number",2,"width","50%"],["formControlName","calendar_events__range_min","type","number",2,"width","50%"],["formControlName","calendar_events__range_max","type","number",2,"width","50%"],["formControlName","opportunities__range_min","type","number",2,"width","50%"],["formControlName","opportunities__range_max","type","number",2,"width","50%"],["formControlName","logs_total__range_min","type","number",2,"width","50%"],["formControlName","logs_total__range_max","type","number",2,"width","50%"],["formControlName","cached_logged_in_agents__range_min","type","number",2,"width","50%"],["formControlName","cached_logged_in_agents__range_max","type","number",2,"width","50%"],["formControlName","cached_waiting_agents__range_min","type","number",2,"width","50%"],["formControlName","cached_waiting_agents__range_max","type","number",2,"width","50%"],["formControlName","cached_phone_call_agents__range_min","type","number",2,"width","50%"],["formControlName","cached_phone_call_agents__range_max","type","number",2,"width","50%"],["formControlName","cached_post_call_wrap_up_agents__range_min","type","number",2,"width","50%"],["formControlName","cached_post_call_wrap_up_agents__range_max","type","number",2,"width","50%"],["formControlName","recent_avg_wait_time__range_min","type","number",2,"width","50%"],["formControlName","recent_avg_wait_time__range_max","type","number",2,"width","50%"],["formControlName","cached_now_avg_wait_time__range_min","type","number",2,"width","50%"],["formControlName","cached_now_avg_wait_time__range_max","type","number",2,"width","50%"],["type","text","formControlName","last_call_outbound",3,"selectMode","owlDateTime","owlDateTimeTrigger"],["hour12Timer","true"],["dt1",""],["formControlName","has_warning",2,"width","150px"],[3,"value"],[1,"dyn-text-center"],["mat-raised-button","","color","",3,"click"],["mat-raised-button","","color","primary",1,"dyn-m-l-10",3,"click"],[1,"dyn-p-10","dyn-m-t-10","dyn-text-center",2,"background","#eff3f6"],[4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-header-cell","",2,"padding-right","20px!important"],[3,"checked","indeterminate","change"],["mat-cell","",2,"padding-right","10px!important"],[2,"position","relative","left","-5px",3,"checked","click","change"],["mat-header-cell","","mat-sort-header","",1,"dyn-text-left","dyn-border-right"],["mat-cell","",1,"dyn-text-left","dyn-p-r-20","dyn-border-right","dyn-m-l-10",3,"matTooltip","matTooltipDisabled"],["class","warning-icon",4,"ngIf"],[1,"warning-icon"],["mat-header-cell","",1,"dyn-p-r-10","dyn-p-l-10","dyn-border-right"],["mat-cell","",1,"dyn-border-right"],["mat-mini-fab","","color","",1,"dyn-no-shadow","dyn-transparent",3,"matTooltip","click"],["src","/assets/img/check-icon.svg",1,"dyn-vertical-middle"],["src","/assets/img/cancel-icon.svg",1,"dyn-vertical-middle"],["mat-cell","",1,"dyn-border-right","dyn-p-r-10","dyn-p-l-10"],[1,"dyn-link",3,"matMenuTriggerFor"],["contactMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"dyn-p-r-10","dyn-p-l-10","dyn-border-right"],[1,"dyn-link",3,"routerLink","queryParams"],["mat-cell","",1,"dyn-border-right",2,"padding-right","5px!important","padding-left","5px!important"],["alt","Channels Per Agent","matTooltip","Dynamic Channel Speed","src","/assets/img/campaigns/predictive-channels-indicator.svg",1,"dyn-vertical-middle",2,"height","30px"],[2,"width","60px","min-width","60px",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["mat-header-cell","","mat-sort-header","",1,"now-avg-wait-time-header","dyn-p-r-10","dyn-p-l-10"],["mat-cell","",1,"dyn-p-r-10","dyn-p-l-10"],["mat-header-cell","","mat-sort-header","",1,"recent-avg-wait-time-header","dyn-p-r-10","dyn-p-l-10","dyn-border-right"],["mat-cell","",1,"dyn-border-right","dyn-p-r-10"],["mat-header-cell","","mat-sort-header","",1,"dyn-p-r-10","dyn-p-l-10"],["mat-cell",""],[1,"dyn-text-muted"],["mat-header-cell","","mat-sort-header","",1,"dyn-p-r-10","dyn-p-l-10","dyn-p-l-10"],["routerLink","/manager/campaign-agents",1,"dyn-link",3,"queryParams"],["mat-header-cell","",1,"dyn-p-l-10","dyn-border-left"],["mat-cell","",1,"dyn-border-left",2,"padding-right","0!important"],["mat-icon-button","","matTooltip","Settings",2,"width","27px","height","27px","line-height","27px",3,"disableRipple","routerLink"],[1,"dyn-icon-x-sm"],["mat-icon-button","","matTooltip","Members",2,"width","27px","height","27px","line-height","27px",3,"disableRipple","routerLink"],["mat-icon-button","","matTooltip","Connectors",2,"width","27px","height","27px","line-height","27px",3,"disableRipple","routerLink"],["src","/assets/img/chain-icon.svg",2,"height","12px"],["mat-icon-button","","color","",1,"dyn-transparent","dyn-no-shadow",2,"width","27px","height","27px","line-height","27px",3,"disableRipple","matMenuTriggerFor"],["pdCampaignOptionsMenu","matMenu"],["mat-menu-item","",3,"routerLink"],["matTooltip","You must have the 'campaigns_write' permission to recycle contacts",3,"matTooltipDisabled"],["mat-menu-item","","routerLink","/manager/recycle-contacts/create",3,"disabled","queryParams"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["matTooltip","You must have the 'campaigns_page' permission to view campaign change logs",3,"matTooltipDisabled"],["mat-menu-item","",3,"disabled","routerLink"],["mat-header-cell","",1,"top-header","dyn-text-center","dyn-bg-grey","dyn-p-l-10","dyn-p-r-10"],["matTooltip","In Campaigns, these are real-time stats referring to daily call activity.\n                              These values display an aggregate count that will reset to zero the following day.",1,"dyn-button-help-icon"],["matTooltip","A real-time campaign statistic in reference to daily call activity.\n                              These values display an aggregate daily count and reset to zero the following day.",1,"dyn-button-help-icon"],["mat-header-cell","",1,"top-header","dyn-text-center","dyn-bg-grey","dyn-p-l-10"],["mat-header-row",""],["mat-row","",1,"dyn-table-hover",3,"ngClass"],[1,"dyn-p-20"],["mode","indeterminate","diameter","20",1,"dyn-inline-block","dyn-vertical-middle"],[1,"dyn-text-center","dyn-p-20","dyn-text-muted"],[3,"showPaginationLoader","totalCount","perPage","currentPage","prevButton","nextButton","updatePerPage","goPage"]],template:function(e,t){1&e&&(p.bd(0,Y,5,4,"div",0),p.bd(1,Z,11,1,"div",0),p.ic(2,"div",1),p.ic(3,"div",2),p.ic(4,"div"),p.ic(5,"h1",3),p.dd(6,"Campaigns"),p.hc(),p.ic(7,"p",4),p.dd(8," A campaign is a system that allows agents to call multiple numbers in a more targeted and efficient form."),p.dc(9,"br"),p.dd(10," This includes "),p.ic(11,"b",5),p.dd(12,"Live Filters"),p.hc(),p.dd(13,", "),p.ic(14,"b",6),p.dd(15,"Sales Funnels / Redial Rules"),p.hc(),p.dd(16,", "),p.ic(17,"b",7),p.dd(18,"Caller ID Strategies"),p.hc(),p.dd(19,". "),p.hc(),p.hc(),p.ic(20,"div"),p.ic(21,"div",8),p.ic(22,"button",9),p.qc("click",(function(){return t.showFilterSection=!t.showFilterSection})),p.bd(23,J,2,0,"mat-icon",10),p.bd(24,K,2,0,"mat-icon",10),p.dd(25),p.hc(),p.hc(),p.ic(26,"div",11),p.ic(27,"button",12),p.dd(28," Create Campaign "),p.hc(),p.hc(),p.hc(),p.hc(),p.bd(29,te,284,13,"div",13),p.bd(30,ce,3,2,"div",14),p.ic(31,"div",15,16),p.qc("scroll",(function(e){return t.onCampaignTableScroll(e)})),p.ic(33,"table",17,18),p.qc("matSortChange",(function(e){return t.onSortData(e)})),p.gc(35,19),p.bd(36,ae,2,2,"th",20),p.bd(37,oe,2,1,"td",21),p.fc(),p.gc(38,22),p.bd(39,se,2,0,"th",23),p.bd(40,de,3,4,"td",24),p.fc(),p.gc(41,25),p.bd(42,le,2,0,"th",26),p.bd(43,me,4,3,"td",27),p.fc(),p.gc(44,28),p.bd(45,ge,2,0,"th",26),p.bd(46,pe,8,4,"td",29),p.fc(),p.gc(47,30),p.bd(48,be,2,0,"th",31),p.bd(49,ve,3,6,"td",27),p.fc(),p.gc(50,32),p.bd(51,ye,2,0,"th",31),p.bd(52,Be,2,1,"td",33),p.fc(),p.gc(53,34),p.bd(54,De,2,0,"th",35),p.bd(55,Ie,3,2,"td",36),p.fc(),p.gc(56,37),p.bd(57,Ae,2,0,"th",38),p.bd(58,Le,3,2,"td",39),p.fc(),p.ic(59,"div"),p.gc(60,40),p.bd(61,Ne,2,0,"th",41),p.bd(62,$e,2,1,"td",42),p.fc(),p.gc(63,43),p.bd(64,qe,2,0,"th",41),p.bd(65,Ve,2,1,"td",42),p.fc(),p.gc(66,44),p.bd(67,Re,2,0,"th",41),p.bd(68,Ee,2,1,"td",42),p.fc(),p.gc(69,45),p.bd(70,ze,2,0,"th",41),p.bd(71,Qe,2,1,"td",42),p.fc(),p.gc(72,46),p.bd(73,Ge,2,0,"th",41),p.bd(74,je,5,5,"td",42),p.fc(),p.gc(75,47),p.bd(76,He,2,0,"th",41),p.bd(77,Xe,2,1,"td",42),p.fc(),p.gc(78,48),p.bd(79,We,2,0,"th",41),p.bd(80,Ue,2,1,"td",42),p.fc(),p.gc(81,49),p.bd(82,Ye,2,0,"th",41),p.bd(83,Ze,2,1,"td",42),p.fc(),p.gc(84,50),p.bd(85,Je,2,0,"th",41),p.bd(86,Ke,2,1,"td",42),p.fc(),p.gc(87,51),p.bd(88,et,2,0,"th",41),p.bd(89,tt,2,1,"td",42),p.fc(),p.gc(90,52),p.bd(91,nt,2,0,"th",41),p.bd(92,it,2,1,"td",42),p.fc(),p.gc(93,53),p.bd(94,ct,2,0,"th",31),p.bd(95,at,2,1,"td",27),p.fc(),p.hc(),p.gc(96,54),p.bd(97,ot,2,0,"th",41),p.bd(98,st,2,1,"td",42),p.fc(),p.gc(99,55),p.bd(100,rt,2,0,"th",31),p.bd(101,dt,2,1,"td",27),p.fc(),p.gc(102,56),p.bd(103,lt,2,0,"th",31),p.bd(104,ht,2,1,"td",27),p.fc(),p.gc(105,57),p.bd(106,ut,2,0,"th",58),p.bd(107,gt,3,4,"td",42),p.fc(),p.gc(108,59),p.bd(109,pt,2,0,"th",41),p.bd(110,_t,3,4,"td",42),p.fc(),p.gc(111,60),p.bd(112,ft,2,0,"th",41),p.bd(113,yt,3,4,"td",42),p.fc(),p.gc(114,61),p.bd(115,Ct,2,0,"th",31),p.bd(116,wt,3,4,"td",27),p.fc(),p.gc(117,62),p.bd(118,Pt,2,0,"th",41),p.bd(119,kt,2,1,"td",42),p.fc(),p.gc(120,63),p.bd(121,St,2,0,"th",41),p.bd(122,Bt,2,1,"td",42),p.fc(),p.gc(123,64),p.bd(124,Dt,2,0,"th",41),p.bd(125,Mt,2,1,"td",42),p.fc(),p.gc(126,65),p.bd(127,Ft,2,0,"th",41),p.bd(128,It,2,1,"td",42),p.fc(),p.gc(129,66),p.bd(130,At,2,0,"th",41),p.bd(131,Tt,2,1,"td",42),p.fc(),p.gc(132,67),p.bd(133,Ot,2,0,"th",68),p.bd(134,Qt,37,45,"td",69),p.fc(),p.gc(135,70),p.bd(136,Gt,1,1,"th",71),p.fc(),p.gc(137,72),p.bd(138,jt,1,1,"th",71),p.fc(),p.gc(139,73),p.bd(140,Ht,2,1,"th",71),p.fc(),p.gc(141,74),p.bd(142,Xt,2,1,"th",71),p.fc(),p.gc(143,75),p.bd(144,Wt,2,1,"th",71),p.fc(),p.gc(145,76),p.bd(146,Ut,2,1,"th",71),p.fc(),p.gc(147,77),p.bd(148,Yt,4,1,"th",71),p.fc(),p.gc(149,78),p.bd(150,Zt,2,1,"th",71),p.fc(),p.gc(151,79),p.bd(152,Jt,2,1,"th",71),p.fc(),p.gc(153,80),p.bd(154,Kt,2,1,"th",71),p.fc(),p.gc(155,81),p.bd(156,en,4,1,"th",71),p.fc(),p.gc(157,82),p.bd(158,tn,1,1,"th",83),p.fc(),p.bd(159,nn,1,0,"tr",84),p.bd(160,cn,1,0,"tr",84),p.bd(161,on,1,3,"tr",85),p.hc(),p.bd(162,sn,3,0,"div",86),p.bd(163,rn,2,0,"div",87),p.hc(),p.bd(164,dn,1,6,"paginator",88),p.hc(),p.ic(165,"div",89),p.ic(166,"div"),p.dc(167,"img",90),p.dd(168," Real Time Data "),p.hc(),p.ic(169,"div"),p.ic(170,"span",91),p.qc("click",(function(){return t.showUsCanadaMapDialog()})),p.dd(171," View Calling Hours & Holidays "),p.hc(),p.hc(),p.hc(),p.ic(172,"div",92),p.ic(173,"div",93),p.ic(174,"button",94),p.qc("click",(function(){return t.selection.clear()})),p.ic(175,"i",95),p.dd(176,"close"),p.hc(),p.dd(177," Clear Selection "),p.hc(),p.hc(),p.ic(178,"div"),p.ic(179,"span",96),p.dd(180),p.hc(),p.ic(181,"button",97),p.qc("click",(function(){return t.showBulkEditDialog()})),p.ic(182,"i",95),p.dd(183,"edit"),p.hc(),p.dd(184),p.hc(),p.hc(),p.hc()),2&e&&(p.Bc("ngIf",t.accountSettings&&!t.accountSettings.call_fdnc&&!t.accountSettings.call_fdnc_ban),p.Pb(1),p.Bc("ngIf",t.userIsIdle),p.Pb(22),p.Bc("ngIf",!t.showFilterSection),p.Pb(1),p.Bc("ngIf",t.showFilterSection),p.Pb(1),p.fd(" ",t.showFilterSection?"Hide Filters":"Filter Results"," "),p.Pb(1),p.Bc("matTooltipDisabled",t.permissionService.hasPermission("campaigns_write")),p.Pb(1),p.Bc("disabled",!t.permissionService.hasPermission("campaigns_write")),p.Pb(2),p.Bc("ngIf",t.showFilterSection),p.Pb(1),p.Bc("ngIf",t.selection.hasValue()&&t.isAllSelected()&&t.selection.selected.length===t.paginator.resultsPerPage),p.Pb(3),p.Bc("dataSource",t.campaigns),p.Pb(126),p.Bc("matHeaderRowDef",p.Fc(19,ln)),p.Pb(1),p.Bc("matHeaderRowDef",t.tableColumns),p.Pb(1),p.Bc("matRowDefColumns",t.tableColumns),p.Pb(1),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.campaigns.length&&!t.loading),p.Pb(1),p.Bc("ngIf",t.campaigns.length),p.Pb(8),p.Bc("ngClass",p.Gc(20,hn,t.selection.selected.length)),p.Pb(8),p.fd(" (",t.selection.selected.length,") Campaigns Selected "),p.Pb(4),p.fd(" Edit ",t.selection.selected.length>1?"Campaigns":"Campaign"," "))},directives:[M.p,c.h,F.b,D.a,q.n,V.a,q.c,q.i,q.b,q.k,q.m,M.n,R.a,S.B,S.q,S.i,S.d,S.p,S.h,S.y,S.t,S.A,S.u,E.b,E.d,E.a,q.h,z.a,q.a,V.b,Q.e,Q.f,Q.c,S.s,M.o,q.j,q.l,G.a,j.a],pipes:[M.g],styles:[".filter-options-container[_ngcontent-%COMP%]{display:grid;width:100%;grid-gap:10px 20px;align-items:center;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.filter-options-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-options-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%!important;max-width:100%}.mat-header-row[_ngcontent-%COMP%]{height:30px!important}tr.mat-header-row[_ngcontent-%COMP%]{height:40px}.top-header[_ngcontent-%COMP%]{text-align:center!important;border-right:1px solid #e2e2e2;padding-right:1px;box-sizing:border-box}.top-header[_ngcontent-%COMP%]:last-child{border-right:none}.top-header.dyn-bg-grey[_ngcontent-%COMP%]{background:#eff3f6;color:#191919}.dyn-p-l-10[_ngcontent-%COMP%]{padding-left:10px!important}td[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{text-align:center!important}.dyn-text-left[_ngcontent-%COMP%], th.mat-header-cell.dyn-text-left[_ngcontent-%COMP%]{text-align:left!important}.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap}.mat-table[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{background:#fff4f4}.mat-table[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:18px!important;width:18px!important;height:18px!important;color:#c72121}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #ddd;position:relative;cursor:pointer}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;background:#4ad8c4;border-radius:100px;top:-10px;right:-10px}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#2a79ff;color:#fff;border-radius:5px;padding:3px 10px;box-sizing:border-box;font-size:.7rem;white-space:nowrap}.campaign-type-container[_ngcontent-%COMP%]   .type.active[_ngcontent-%COMP%]{border-color:#4ec9b7}.speed-slot[_ngcontent-%COMP%]{box-sizing:border-box;background-color:#fff;border:1px solid #d4d4d4;border-radius:5px;padding:12px 16px;box-shadow:0 0 7px 0 rgba(0,0,0,.1);margin-bottom:10px;width:100%}.slider-container-left[_ngcontent-%COMP%], .slider-container-right[_ngcontent-%COMP%]{width:50%}.left-side-container[_ngcontent-%COMP%]{width:70%}.slot-number[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100px;background:#eff6ff;color:#1d73d8;line-height:30px;text-align:center;margin-right:20px;border:1px solid #e5e7eb}@media (max-width:1600px){.left-side-container[_ngcontent-%COMP%]{width:40%}.left-side-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}"],data:{animation:[Object(m.o)("slideInOut",[Object(m.n)(":enter",[Object(m.m)({height:0,opacity:0,overflow:"hidden"}),Object(m.e)("200ms ease-out",Object(m.m)({height:"*",opacity:1,overflow:"hidden"}))]),Object(m.n)(":leave",[Object(m.m)({height:"*",opacity:1,overflow:"hidden"}),Object(m.e)("200ms ease-in",Object(m.m)({height:0,opacity:0,overflow:"hidden"}))])])]}}),e})();var mn=n("iwRK");let gn=(()=>{class e{constructor(e){this.http=e}list(e,t){return this.http.get(t?`/api/amdsettings/?page=${t}&page_size=${e}`:"/api/amdsettings/?page_size="+e)}create(e){return this.http.post("/api/amdsettings/",e)}get(e){return this.http.get(`/api/amdsettings/${e}/`)}update(e,t){return this.http.patch(`/api/amdsettings/${e}/`,t)}delete(e){return this.http.delete(`/api/amdsettings/${e}/`)}}return e.\u0275fac=function(t){return new(t||e)(p.nc(b.b))},e.\u0275prov=p.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var pn=n("ksn6"),bn=n("DD8m"),_n=n("Mc+Y"),fn=n("zBIn"),vn=n("wZkO");let yn=(()=>{class e{constructor(e,t,n,i,c){this.dialogRef=e,this.data=t,this.amdService=n,this.snackBar=i,this.fb=c,this.title="",this.selectedTab=0,t?(this.title="Edit AMD Setting",this.amdSettings=t,this.amdSettingsForm=this.fb.group({id:t.id,name:[t.name,S.z.required],description:t.description,initial_silence:[t.initial_silence,[S.z.required,S.z.min(0),S.z.max(5e3)]],greeting:[t.greeting,[S.z.required,S.z.min(0),S.z.max(1e4)]],after_greeting_silence:[t.after_greeting_silence,[S.z.required,S.z.min(300),S.z.max(3e3)]],total_analysis_time:[t.total_analysis_time,[S.z.required,S.z.min(2e3),S.z.max(1e4)]],minimum_word_length:[t.minimum_word_length,[S.z.required,S.z.min(30),S.z.max(300)]],between_word_silence:[t.between_word_silence,[S.z.required,S.z.min(10),S.z.max(250)]],maximum_number_of_words:[t.maximum_number_of_words,[S.z.required,S.z.min(1),S.z.max(20)]],silence_threshold:[t.silence_threshold,[S.z.required,S.z.min(50),S.z.max(500)]],maximum_word_length:[t.maximum_word_length,[S.z.required,S.z.min(300),S.z.max(4e3)]]})):(this.title="Create AMD Setting",this.amdSettingsForm=this.fb.group({name:["",S.z.required],description:"",initial_silence:[2e3,[S.z.required,S.z.min(0),S.z.max(5e3)]],greeting:[2e3,[S.z.required,S.z.min(0),S.z.max(1e4)]],after_greeting_silence:[1e3,[S.z.required,S.z.min(300),S.z.max(3e3)]],total_analysis_time:[5e3,[S.z.required,S.z.min(2e3),S.z.max(1e4)]],minimum_word_length:[120,[S.z.required,S.z.min(30),S.z.max(300)]],between_word_silence:[50,[S.z.required,S.z.min(10),S.z.max(250)]],maximum_number_of_words:[2,[S.z.required,S.z.min(1),S.z.max(20)]],silence_threshold:[256,[S.z.required,S.z.min(50),S.z.max(500)]],maximum_word_length:[1e3,[S.z.required,S.z.min(300),S.z.max(4e3)]]}))}onSubmit(){this.amdSettings?this._updateAmdSetting():this._createAmdSetting()}_createAmdSetting(){this.amdService.create(this.amdSettingsForm.value).subscribe({next:e=>{this.snackBar.open("AMD Setting created successfully","",{duration:2500,verticalPosition:"top",panelClass:"success"}),this.dialogRef.close(e)},error:()=>{this.snackBar.open("Error creating AMD Setting","",{duration:2500,verticalPosition:"top",panelClass:"error"})}})}_updateAmdSetting(){this.amdService.update(this.amdSettings.id,this.amdSettingsForm.value).subscribe({next:e=>{this.snackBar.open("AMD Setting updated successfully","",{duration:2500,verticalPosition:"top",panelClass:"success"}),this.dialogRef.close(e)},error:()=>{this.snackBar.open("Error updating AMD Setting","",{duration:2500,verticalPosition:"top",panelClass:"error"})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(f.g),p.bc(f.a),p.bc(gn),p.bc(B.a),p.bc(S.f))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:142,vars:5,consts:[[1,"hide-mat-tab-header",3,"selectedIndex"],["label","Create Form"],[1,"dyn-flex","dyn-space-between","dyn-vertical-middle"],[1,"dyn-m-0"],[1,"dyn-text-muted","dyn-italic"],["mat-button","","color","primary",3,"click"],[1,"dyn-m-t-20",3,"formGroup"],[1,"dyn-flex","dyn-space-between"],[1,"dyn-full-width"],[1,"dyn-text-sm","dyn-text-muted"],["type","text","formControlName","name",1,"dyn-full-width"],["formControlName","description",1,"dyn-full-width"],["matTooltip","\n                                is the maximum length of a greeting.\n                                If this is exceeded we determine it is a  MACHINE",1,"dyn-text-sm","dyn-cursor-pointer"],[1,"dyn-full-width","dyn-flex"],[1,"dyn-vertical-middle"],["type","number","formControlName","initial_silence",1,"dyn-full-width"],[1,"dyn-italic","dyn-text-sm","dyn-text-muted","dyn-m-l-5","dyn-m-t-5","dyn-m-0","dyn-vertical-middle"],["matTooltip","\n                                Is maximum initial silence duration before greeting.\n                                If this is exceeded we determine it is a MACHINE",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","greeting",1,"dyn-full-width"],["matTooltip","\n                                Is the silence after detecting a greeting.\n                                If this is exceeded we determine it is a  HUMAN",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","after_greeting_silence",1,"dyn-full-width"],["matTooltip","\n                                Is the maximum time allowed for the software to decide HUMAN or MACHINE",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","total_analysis_time",1,"dyn-full-width"],["matTooltip","\n                                Is the minimum duration of voice considered to be a word",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","minimum_word_length",1,"dyn-full-width"],["matTooltip","\n                                Is the minimum duration of silence after a word to consider\n                                the audio that follows to be a new word",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","between_word_silence",1,"dyn-full-width"],["matTooltip","\n                                Is the maximum number of words in a greeting.\n                                If this is exceeded we determine it is a MACHINE",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","maximum_number_of_words",1,"dyn-full-width"],["matTooltip","How long do we consider silence",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","silence_threshold"],["matTooltip","\n                                Is the maximum duration of a word to accept.\n                                If exceeded we determine it is a MACHINE",1,"dyn-text-sm","dyn-cursor-pointer"],["type","number","formControlName","maximum_word_length",1,"dyn-full-width"],["mat-stroked-button","","color","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],["label","what is AMD"]],template:function(e,t){1&e&&(p.ic(0,"mat-tab-group",0),p.ic(1,"mat-tab",1),p.ic(2,"div",2),p.ic(3,"h1",3),p.dd(4),p.ic(5,"span",4),p.dd(6,"(Answer Machine Detection)"),p.hc(),p.hc(),p.ic(7,"button",5),p.qc("click",(function(){return t.selectedTab=1})),p.dd(8,"What is AMD?"),p.hc(),p.hc(),p.dc(9,"hr"),p.ic(10,"form",6),p.ic(11,"div",7),p.ic(12,"div",8),p.ic(13,"span",9),p.dd(14,"Name (required)"),p.hc(),p.hc(),p.ic(15,"div",8),p.dc(16,"input",10),p.hc(),p.hc(),p.dc(17,"hr"),p.ic(18,"div",7),p.ic(19,"div",8),p.ic(20,"span",9),p.dd(21,"Description"),p.hc(),p.hc(),p.ic(22,"div",8),p.dc(23,"textarea",11),p.hc(),p.hc(),p.dc(24,"hr"),p.ic(25,"div",7),p.ic(26,"div",8),p.ic(27,"span",9),p.dd(28," Initial Silence "),p.ic(29,"mat-icon",12),p.dd(30,"help"),p.hc(),p.hc(),p.hc(),p.ic(31,"div",13),p.ic(32,"div",14),p.dc(33,"input",15),p.hc(),p.ic(34,"p",16),p.dd(35," Milliseconds (0 - 5000ms) "),p.hc(),p.hc(),p.hc(),p.dc(36,"hr"),p.ic(37,"div",7),p.ic(38,"div",8),p.ic(39,"span",9),p.dd(40," Greeting "),p.ic(41,"mat-icon",17),p.dd(42,"help"),p.hc(),p.hc(),p.hc(),p.ic(43,"div",13),p.ic(44,"div",14),p.dc(45,"input",18),p.hc(),p.ic(46,"p",16),p.dd(47," Milliseconds (0 - 10000ms) "),p.hc(),p.hc(),p.hc(),p.dc(48,"hr"),p.ic(49,"div",7),p.ic(50,"div",8),p.ic(51,"span",9),p.dd(52," After Greeting Silence "),p.ic(53,"mat-icon",19),p.dd(54,"help"),p.hc(),p.hc(),p.hc(),p.ic(55,"div",13),p.ic(56,"div",14),p.dc(57,"input",20),p.hc(),p.ic(58,"p",16),p.dd(59," Milliseconds (300 - 3000ms) "),p.hc(),p.hc(),p.hc(),p.dc(60,"hr"),p.ic(61,"div",7),p.ic(62,"div",8),p.ic(63,"span",9),p.dd(64," Total Analysis Time "),p.ic(65,"mat-icon",21),p.dd(66,"help"),p.hc(),p.hc(),p.hc(),p.ic(67,"div",13),p.ic(68,"div",14),p.dc(69,"input",22),p.hc(),p.ic(70,"p",16),p.dd(71," Milliseconds (2000 - 10000ms) "),p.hc(),p.hc(),p.hc(),p.dc(72,"hr"),p.ic(73,"div",7),p.ic(74,"div",8),p.ic(75,"span",9),p.dd(76," Minimum Word Length "),p.ic(77,"mat-icon",23),p.dd(78,"help"),p.hc(),p.hc(),p.hc(),p.ic(79,"div",13),p.ic(80,"div",14),p.dc(81,"input",24),p.hc(),p.ic(82,"p",16),p.dd(83," Milliseconds (30 - 300ms) "),p.hc(),p.hc(),p.hc(),p.dc(84,"hr"),p.ic(85,"div",7),p.ic(86,"div",8),p.ic(87,"span",9),p.dd(88," Between Word Silence "),p.ic(89,"mat-icon",25),p.dd(90,"help"),p.hc(),p.hc(),p.hc(),p.ic(91,"div",13),p.ic(92,"div",14),p.dc(93,"input",26),p.hc(),p.ic(94,"p",16),p.dd(95," Milliseconds (10 - 250ms) "),p.hc(),p.hc(),p.hc(),p.dc(96,"hr"),p.ic(97,"div",7),p.ic(98,"div",8),p.ic(99,"span",9),p.dd(100," Maximum Number of Words "),p.ic(101,"mat-icon",27),p.dd(102,"help"),p.hc(),p.hc(),p.hc(),p.ic(103,"div",13),p.ic(104,"div",14),p.dc(105,"input",28),p.hc(),p.ic(106,"p",16),p.dd(107," Words (1 - 20 words) "),p.hc(),p.hc(),p.hc(),p.dc(108,"hr"),p.ic(109,"div",7),p.ic(110,"div",8),p.ic(111,"span",9),p.dd(112," Silence Threshold "),p.ic(113,"mat-icon",29),p.dd(114,"help"),p.hc(),p.hc(),p.hc(),p.ic(115,"div",8),p.dc(116,"input",30),p.hc(),p.hc(),p.dc(117,"hr"),p.ic(118,"div",7),p.ic(119,"div",8),p.ic(120,"span",9),p.dd(121," Maximum Word Length "),p.ic(122,"mat-icon",31),p.dd(123,"help"),p.hc(),p.hc(),p.hc(),p.ic(124,"div",13),p.ic(125,"div",14),p.dc(126,"input",32),p.hc(),p.ic(127,"p",16),p.dd(128," Milliseconds (300 - 4000ms) "),p.hc(),p.hc(),p.hc(),p.dc(129,"hr"),p.ic(130,"div",7),p.ic(131,"button",33),p.dd(132,"Cancel"),p.hc(),p.ic(133,"button",34),p.qc("click",(function(){return t.onSubmit()})),p.dd(134,"Save"),p.hc(),p.hc(),p.hc(),p.hc(),p.ic(135,"mat-tab",35),p.ic(136,"button",5),p.qc("click",(function(){return t.selectedTab=0})),p.ic(137,"mat-icon"),p.dd(138,"keyboard_backspace"),p.hc(),p.dd(139," Back "),p.hc(),p.ic(140,"p"),p.dd(141," Answering machine detection is the software that estimates if a call has been answered by a human or a machine (voicemail or other). It does this by analyzing noise patterns (assumed to be a human voice either live or voicemail greeting) and comparing those noise durations against a series of time thresholds. These settings represent those time thresholds. Using these settings you can affect 1. the ratio of calls that are determined to be machine (voicemail) vs human (false positives) and 2. the speed at which a agent is connected to the live human call. Utilize these settings at your own risk and be sure to test all settings before using them on a production campaign. "),p.hc(),p.hc(),p.hc()),2&e&&(p.Bc("selectedIndex",t.selectedTab)("@.disabled",!0),p.Pb(4),p.fd(" ",t.title," "),p.Pb(6),p.Bc("formGroup",t.amdSettingsForm),p.Pb(123),p.Bc("disabled",t.amdSettingsForm.invalid))},directives:[vn.b,vn.a,F.b,S.B,S.q,S.i,S.d,S.p,S.h,R.a,D.a,S.u,f.d],encapsulation:2}),e})();var Cn=n("+WsV"),xn=n("hbWM"),wn=n("2RLy"),Pn=n("+Iak"),kn=n("/6YT"),Sn=n("DY0z"),Bn=n("00XV"),Dn=n("vwZS");const Mn=function(e,t,n){return{width:e,height:t,"border-radius":n}};let Fn=(()=>{class e{constructor(){this.width="100%",this.height="1rem",this.borderRadius="4px"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Vb({type:e,selectors:[["loading-skeleton"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius"},decls:2,vars:5,consts:[[1,"loading-skeleton-container"],[1,"loading-skeleton",3,"ngStyle"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.dc(1,"div",1),p.hc()),2&e&&(p.Pb(1),p.Bc("ngStyle",p.Ic(1,Mn,t.width,t.height,t.borderRadius)))},directives:[M.q],styles:[".loading-skeleton-container[_ngcontent-%COMP%]{margin:3px 0;display:block}.loading-skeleton[_ngcontent-%COMP%]{display:inline-block;background:#eff3f6;border-radius:4px;animation:skeleton-pulse 1.6s ease-in-out infinite}@keyframes skeleton-pulse{0%{background-color:#e6eaee}50%{background-color:#d8dde0}to{background-color:#e6eaee}}"]}),e})();var In=n("5RNC");const An=function(e,t){return{val:e,i:t}};function Tn(e,t){if(1&e&&(p.gc(0),p.ec(1,12),p.fc()),2&e){const e=t.$implicit,n=t.index;p.uc(2);const i=p.Mc(4);p.Pb(1),p.Bc("ngTemplateOutlet",i)("ngTemplateOutletContext",p.Hc(2,An,e,n))}}function On(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",3),p.ic(2,"div",4),p.ic(3,"div",5),p.dd(4),p.hc(),p.dc(5,"div",6),p.ic(6,"div",7),p.dd(7),p.hc(),p.hc(),p.ic(8,"div",8),p.bd(9,Tn,2,5,"ng-container",9),p.hc(),p.ic(10,"div",10),p.ic(11,"button",11),p.qc("click",(function(){return p.Qc(e),p.uc().addSlot()})),p.ic(12,"mat-icon"),p.dd(13,"add"),p.hc(),p.dd(14," Add slot "),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc();p.Pb(4),p.ed(e.topLabel),p.Pb(3),p.ed(e.bottomLabel),p.Pb(2),p.Bc("ngForOf",e.items)("ngForTrackBy",e.trackByIndex),p.Pb(2),p.Bc("disabled",((null==e.items?null:e.items.length)||0)>=e.MAX_SLOTS)}}function Ln(e,t){if(1&e){const e=p.kc();p.ic(0,"div",10),p.ic(1,"button",13),p.qc("click",(function(){return p.Qc(e),p.uc().addSlot()})),p.ic(2,"mat-icon"),p.dd(3,"add"),p.hc(),p.dd(4," Add slot "),p.hc(),p.hc()}}function Nn(e,t){if(1&e){const e=p.kc();p.ic(0,"div",14),p.ic(1,"div",15),p.tc(),p.ic(2,"svg",16,17),p.qc("mousedown",(function(){p.Qc(e);const n=t.i,i=p.Mc(3);return p.uc().onSlotRailDown(n,i)})),p.ic(4,"text",18),p.dd(5),p.hc(),p.dc(6,"rect",19),p.dc(7,"rect",20),p.ic(8,"g",21),p.qc("mousedown",(function(n){p.Qc(e);const i=t.i,c=p.Mc(3);return p.uc().onSlotThumbDown(i,c,n)})),p.dc(9,"circle"),p.hc(),p.hc(),p.sc(),p.ic(10,"div",22),p.ic(11,"input",23),p.qc("blur",(function(){return p.Qc(e),p.uc().onAgentFieldBlur()}))("input",(function(n){p.Qc(e);const i=t.i;return p.uc().onAgentsInputFor(i,n.target.value)})),p.hc(),p.hc(),p.ic(12,"div",24),p.ic(13,"button",25),p.qc("click",(function(){p.Qc(e);const n=t.i;return p.uc().removeSlot(n)})),p.ic(14,"mat-icon"),p.dd(15,"close"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.val,n=t.i,i=p.uc();p.Pb(2),p.Qb("viewBox","0 -16 "+i.W+" "+(i.H+18)),p.Pb(2),p.Qb("x",i.W/2)("y",i.Math.max(12,.6*i.PAD_T)-4),p.Pb(1),p.fd(" ",e.cpa," "),p.Pb(1),p.Qb("x",i.W/2-4)("y",i.PAD_T)("height",i.H-i.PAD_T-i.PAD_B),p.Pb(1),p.Qb("x",i.W/2-4)("y",i.yCpaOf(e))("height",i.H-i.PAD_B-i.yCpaOf(e)),p.Pb(1),p.Qb("transform","translate("+i.W/2+","+i.yCpaOf(e)+")"),p.Pb(1),p.Qb("r",8),p.Pb(2),p.Tb("dyn-error-border",i.isAgentFieldInvalid(n)),p.Bc("min",i.minAgents)("max",i.maxAgents)("value",e.agents)("matTooltip",i.getAgentFieldError(n))}}let $n=(()=>{class e{constructor(e){this._snackBar=e,this._dragging=!1,this._draggingIndex=-1,this._svgRect=null,this.W=56,this.H=200,this.PAD_T=28,this.PAD_B=8,this.Math=Math,this.minAgents=1,this.maxAgents=50,this.minCpa=1,this.maxCpa=20,this.topLabel="Channels",this.bottomLabel="Agents",this.gap=16,this.labelColWidth=90,this.items=[],this.itemsChange=new p.r,this.changeAt=new p.r,this.valueChange=new p.r,this.MAX_SLOTS=5,this._value={agents:1,cpa:1},this.trackByIndex=e=>e,this.validityChange=new p.r}set value(e){if(null==e)return;const t=Number.isFinite(Number(e.agents)),n=Number.isFinite(Number(e.cpa)),i=t?this.clamp(Math.round(Number(e.agents)),this.minAgents,this.maxAgents):this._value.agents,c=n?this.clamp(Math.round(Number(e.cpa)),this.minCpa,this.maxCpa):this._value.cpa;this._value={agents:i,cpa:c}}move(e){if(!this._dragging||this._draggingIndex<0)return;if(!this._svgRect)return;const t=this.clientYToSvgYWithRect(e.clientY,this._svgRect,this.H),n=this.clamp(this.yToValue(t,this.minCpa,this.maxCpa),this.minCpa,this.maxCpa),i=this._draggingIndex,c=this.items[i];if(!c||n===c.cpa)return;const a={agents:c.agents,cpa:n},o=this.items.map((e,t)=>t===i?a:e);this.items=o,this.changeAt.emit({index:i,value:a}),this.itemsChange.emit(o)}up(){this._dragging=!1,this._draggingIndex=-1,this._svgRect=null}get hasItems(){return Array.isArray(this.items)&&this.items.length>0}get value(){return this._value}addSlot(){var e,t;let n;if(this.items&&0!==this.items.length){const i=this.items[this.items.length-1];n={agents:this.clamp((null!==(e=null==i?void 0:i.agents)&&void 0!==e?e:this.minAgents)+1,this.minAgents,this.maxAgents),cpa:this.clamp(null!==(t=null==i?void 0:i.cpa)&&void 0!==t?t:this.minCpa,this.minCpa,this.maxCpa)}}else n={agents:this.clamp(this.minAgents,this.minAgents,this.maxAgents),cpa:this.clamp(this.minCpa,this.minCpa,this.maxCpa)};this.items=[...this.items,n],this.itemsChange.emit(this.items),this.checkValidity()}removeSlot(e){const t=this.items.filter((t,n)=>n!==e);this.items=t,this.itemsChange.emit(t),this.checkValidity()}getAgentFieldError(e){var t,n,i,c,a,o;const s=null===(n=null===(t=this.items)||void 0===t?void 0:t[e])||void 0===n?void 0:n.agents,r=null===(c=null===(i=this.items)||void 0===i?void 0:i[e-1])||void 0===c?void 0:c.agents,d=null===(o=null===(a=this.items)||void 0===a?void 0:a[e+1])||void 0===o?void 0:o.agents;if(!Number.isFinite(s))return null;const l=!!Number.isFinite(r)&&s<=r,h=!!Number.isFinite(d)&&s>=d;return l&&Number.isFinite(r)?"Must be greater than "+r:h&&Number.isFinite(d)?"Must be less than "+d:null}isAgentFieldInvalid(e){return!!this.getAgentFieldError(e)}checkValidity(){const e=this.items.every((e,t)=>0===t||e.agents>this.items[t-1].agents);return this.validityChange.emit(e),e}onAgentFieldBlur(){this.checkValidity()}onAgentsInputFor(e,t){if(""===t||null==t)return;const n=Number(t);if(!Number.isFinite(n))return;n>this.maxAgents&&this._snackBar.open(`Max agents allowed is ${this.maxAgents}.`,"X",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:"error"}),n<this.minAgents&&this._snackBar.open(`Min agents is ${this.minAgents}.`,"X",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:"error"});const i=this.clamp(Math.round(n),this.minAgents,this.maxAgents),c=this.items[e];if(!c||i===c.agents)return;const a={agents:i,cpa:c.cpa},o=this.items.map((t,n)=>n===e?a:t);this.items=o,this.changeAt.emit({index:e,value:a}),this.itemsChange.emit(o)}onSlotRailDown(e,t){this._draggingIndex=e,this._svgRect=t.getBoundingClientRect()}onSlotThumbDown(e,t,n){n.preventDefault(),n.stopPropagation(),this._dragging=!0,this._draggingIndex=e,this._svgRect=t.getBoundingClientRect()}innerTop(){return this.PAD_T}innerBot(){return this.H-this.PAD_B}innerH(){return this.innerBot()-this.innerTop()}valueToY(e,t,n){const i=this.innerH();if(i<=0||n<=t)return this.innerBot();const c=(this.clamp(e,t,n)-t)/(n-t),a=this.innerBot()-c*i;return Number.isFinite(a)?a:this.innerBot()}yToValue(e,t,n){const i=this.innerH();if(i<=0||n<=t)return Math.round(t);const c=this.clamp(e,this.innerTop(),this.innerBot()),a=t+(this.innerBot()-c)/i*(n-t);return Math.round(Number.isFinite(a)?a:t)}clientYToSvgYWithRect(e,t,n){return!t||t.height<=0?this.innerTop():(e-t.top)/t.height*n}clamp(e,t,n){const i=Number(e);return Number.isFinite(i)?Math.max(t,Math.min(n,i)):t}yCpaOf(e){return this.valueToY(e.cpa,this.minCpa,this.maxCpa)}}return e.\u0275fac=function(t){return new(t||e)(p.bc(B.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["app-channels-per-agent-slider"]],hostBindings:function(e,t){1&e&&p.qc("mousemove",(function(e){return t.move(e)}),!1,p.Pc)("mouseup",(function(){return t.up()}),!1,p.Pc)},inputs:{W:"W",H:"H",PAD_T:"PAD_T",PAD_B:"PAD_B",minAgents:"minAgents",maxAgents:"maxAgents",minCpa:"minCpa",maxCpa:"maxCpa",topLabel:"topLabel",bottomLabel:"bottomLabel",gap:"gap",labelColWidth:"labelColWidth",items:"items",value:"value"},outputs:{itemsChange:"itemsChange",changeAt:"changeAt",valueChange:"valueChange",validityChange:"validityChange"},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["whenEmpty",""],["slotTpl",""],[1,"group-row"],[1,"label-col"],[1,"label-top"],[1,"label-spacer"],[1,"label-bottom"],[1,"sliders-grid"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slots-toolbar"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-raised-button","","color","primary",3,"click"],[1,"slot"],[1,"single-wrap"],[1,"dual-rail",3,"mousedown"],["svg",""],["text-anchor","middle",1,"label-top"],["width","8","rx","4",1,"rail"],["width","8","rx","4",1,"fill"],[1,"thumb","cpa",3,"mousedown"],[1,"agents-input"],["type","number",3,"min","max","value","matTooltip","blur","input"],[1,"dyn-text-center"],["type","button","matTooltip","Delete Slot",1,"slot-delete",3,"click"]],template:function(e,t){if(1&e&&(p.bd(0,On,15,5,"ng-container",0),p.bd(1,Ln,5,0,"ng-template",null,1,p.cd),p.bd(3,Nn,16,18,"ng-template",null,2,p.cd)),2&e){const e=p.Mc(2);p.Bc("ngIf",t.hasItems)("ngIfElse",e)}},directives:[M.p,M.o,F.b,R.a,M.u,D.a],styles:[".labels[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#666}.labels[_ngcontent-%COMP%]   .mini[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.dual-rail[_ngcontent-%COMP%]{display:block;width:60px;height:100%;max-height:175px}.thumb[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#fff;stroke:#3b82f6;stroke-width:2;cursor:grab}.thumb.dragging[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{cursor:grabbing}.label-bottom[_ngcontent-%COMP%], .label-top[_ngcontent-%COMP%]{font-size:12px;fill:#374151;font-weight:600}.label-top[_ngcontent-%COMP%]{padding-top:20px}.val[_ngcontent-%COMP%]{pointer-events:none;font:14px/1.2 system-ui,sans-serif;fill:#374151;font-weight:600}.cpa-grid[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:-webkit-min-content;grid-auto-columns:min-content;gap:var(--gap,16px)}.slider-cell[_ngcontent-%COMP%]{display:flex;align-items:stretch;gap:10px}.label-spacer[_ngcontent-%COMP%]{min-height:24px}.group-row[_ngcontent-%COMP%]{display:flex;align-items:stretch;gap:var(--gap,16px)}.label-col[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr auto;align-items:center;width:var(--label-col-width,90px);height:var(--H,200px)}.sliders-grid[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:-webkit-min-content;grid-auto-columns:min-content;gap:var(--gap,16px)}.thumb.agents[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .thumb.cpa[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#fff;stroke:#3b82f6;stroke-width:2}.rail[_ngcontent-%COMP%]{fill:#e5e7eb}.fill[_ngcontent-%COMP%]{fill:#bfdbfe}.slot[_ngcontent-%COMP%]{position:relative}.slot-delete[_ngcontent-%COMP%]{width:22px;height:22px;line-height:22px;border-radius:100px;border:0;cursor:pointer;text-align:center;transition:.5s;background:#f1f1f1}.slot-delete[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px!important;width:12px;height:12px}.slot-delete[_ngcontent-%COMP%]:hover{background:#ddd}.slots-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.add-slot[_ngcontent-%COMP%]{padding:4px 8px}.single-wrap[_ngcontent-%COMP%]{display:grid;justify-items:center;gap:2px}.agents-input[_ngcontent-%COMP%]{margin-top:0}.agents-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px!important;margin-bottom:10px}.agents-input[_ngcontent-%COMP%]{display:grid;justify-items:center;gap:4px}.agents-input[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border:1px solid #ef4444;outline:none;box-shadow:0 0 0 2px rgba(239,68,68,.15)}.agents-input[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{font-size:12px;color:#ef4444;line-height:1.2;text-align:center}"]}),e})();var qn=n("7EHt"),Vn=n("eaoH");const Rn=["dataSourceTable"],En=["activeField"],zn=["callRecordingField"],Qn=["federalDncField"],Gn=["descriptionField"],jn=["callerIdStrategyField"];function Hn(e,t){if(1&e){const e=p.kc();p.ic(0,"div",13),p.ic(1,"div",14),p.ic(2,"p",15),p.ic(3,"mat-icon",16),p.dd(4,"error_outline"),p.hc(),p.dd(5),p.hc(),p.hc(),p.ic(6,"button",17),p.qc("click",(function(){return p.Qc(e),p.uc().campaignWarningMessage=null})),p.ic(7,"mat-icon"),p.dd(8,"close"),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc();p.Bc("@slideInOut",void 0),p.Pb(5),p.fd(" ",e.campaignWarningMessage," ")}}const Xn=function(e){return["/manager/campaigns/connectors",e]};function Wn(e,t){if(1&e&&(p.ic(0,"button",6),p.dd(1,"Connectors"),p.hc()),2&e){const e=p.uc();p.Bc("disabled",!e.campaignId)("routerLink",p.Gc(2,Xn,e.campaignId))}}function Un(e,t){1&e&&(p.ic(0,"div",18),p.dc(1,"mat-progress-spinner",19),p.dd(2," Loading...\n"),p.hc())}function Yn(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.dc(2,"loading-skeleton",33),p.hc())}function Zn(e,t){1&e&&p.dc(0,"img",47)}function Jn(e,t){1&e&&p.dc(0,"img",47)}function Kn(e,t){if(1&e){const e=p.kc();p.ic(0,"div",35),p.qc("click",(function(){return p.Qc(e),p.uc(4).setCampaignType("predictive")})),p.bd(1,Jn,1,0,"img",36),p.dc(2,"img",48),p.ic(3,"div",38),p.dd(4," Predictive "),p.ic(5,"mat-icon",49),p.dd(6,"help"),p.hc(),p.hc(),p.ic(7,"div",40),p.ic(8,"span",41),p.dd(9,"Auto-Dial"),p.hc(),p.ic(10,"span",42),p.dd(11,"Dynamic Channels Per Agent"),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc(4);p.Tb("active",e.isPredictive),p.Pb(1),p.Bc("ngIf",e.isPredictive),p.Pb(4),p.Bc("matTooltipClass","dyn-tooltip-lg")}}function ei(e,t){1&e&&p.dc(0,"img",47)}function ti(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",34),p.ic(2,"div",35),p.qc("click",(function(){return p.Qc(e),p.uc(3).setCampaignType("power")})),p.bd(3,Zn,1,0,"img",36),p.dc(4,"img",37),p.ic(5,"div",38),p.dd(6," Power "),p.ic(7,"mat-icon",39),p.dd(8,"help"),p.hc(),p.hc(),p.ic(9,"div",40),p.ic(10,"span",41),p.dd(11,"Auto-Dial"),p.hc(),p.ic(12,"span",42),p.dd(13,"Fixed Channels Per Agent"),p.hc(),p.hc(),p.hc(),p.bd(14,Kn,12,4,"div",43),p.ic(15,"div",44),p.qc("click",(function(){return p.Qc(e),p.uc(3).setCampaignType("preview")})),p.bd(16,ei,1,0,"img",36),p.dc(17,"img",45),p.ic(18,"div",38),p.dd(19," Preview "),p.ic(20,"mat-icon",46),p.dd(21,"help"),p.hc(),p.hc(),p.ic(22,"div",40),p.ic(23,"span",42),p.dd(24,"Click-to-Call"),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc(3);p.Pb(2),p.Tb("active",e.isPower),p.Pb(1),p.Bc("ngIf",e.isPower),p.Pb(4),p.Bc("matTooltipClass","dyn-tooltip-lg"),p.Pb(7),p.Bc("ngIf",e.showPredictiveOption),p.Pb(1),p.Tb("active",e.isPreview),p.Pb(1),p.Bc("ngIf",e.isPreview),p.Pb(4),p.Bc("matTooltipClass","dyn-multi-line-tooltip dyn-tooltip-lg")}}function ni(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",23),p.ic(2,"div",24),p.ic(3,"h3",25),p.dd(4,"Campaign Type"),p.hc(),p.hc(),p.ic(5,"div",26),p.ic(6,"div",27),p.bd(7,Yn,3,0,"div",22),p.bd(8,ti,25,9,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(9,"hr"),p.fc()),2&e){const e=p.uc(2);p.Pb(7),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading)}}function ii(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.dc(2,"loading-skeleton",33),p.dc(3,"loading-skeleton",50),p.hc())}function ci(e,t){1&e&&(p.ic(0,"p",52),p.dd(1,"Name is required"),p.hc())}function ai(e,t){1&e&&(p.gc(0),p.ic(1,"div",null,60),p.ic(3,"label",61),p.dd(4,"Description"),p.hc(),p.dc(5,"br"),p.dc(6,"textarea",62),p.hc(),p.dc(7,"hr"),p.fc())}function oi(e,t){if(1&e&&(p.gc(0),p.ic(1,"div"),p.ic(2,"label",51),p.dd(3," Name "),p.ic(4,"span",52),p.dd(5,"(Required)"),p.hc(),p.hc(),p.dc(6,"br"),p.dc(7,"input",53),p.bd(8,ci,2,0,"p",54),p.hc(),p.dc(9,"hr"),p.bd(10,ai,8,0,"ng-container",22),p.ic(11,"div",55,56),p.dc(13,"input",57),p.ic(14,"label",58),p.dd(15,"Active"),p.hc(),p.ic(16,"p",59),p.dd(17," Check this box to Activate your Campaign. Uncheck it to deactivate your Campaign. "),p.hc(),p.hc(),p.fc()),2&e){const e=p.uc(2);p.Pb(8),p.Bc("ngIf",e.campaignForm.get("name").invalid&&e.campaignForm.get("name").touched),p.Pb(2),p.Bc("ngIf",e.accountFeatureService.accountFeaturesSubject.value&&e.accountFeatureService.accountFeaturesSubject.value.campaign_advanced_settings)}}function si(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.dc(2,"loading-skeleton",33),p.dc(3,"loading-skeleton",50),p.dc(4,"loading-skeleton",63),p.hc())}function ri(e,t){1&e&&(p.ic(0,"div",74),p.ic(1,"span",52),p.dd(2,"Required:"),p.hc(),p.dd(3," Please select a Live Filter or Bucket "),p.hc())}function di(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd(" ",e.name," ",e.active?"(Count: "+e.count+")":"(Not Active)"," ")}}function li(e,t){1&e&&(p.ic(0,"span",75),p.dd(1," Live Filter is not selectable if a bucket is selected. "),p.hc())}function hi(e,t){1&e&&(p.ic(0,"div",76),p.dd(1," Please select an active live filter "),p.hc())}function ui(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd("",e.name," (Count: ",e.count,")")}}function mi(e,t){1&e&&(p.ic(0,"span",75),p.dd(1," Bucket is not selectable if a live filter is selected. "),p.hc())}function gi(e,t){if(1&e){const e=p.kc();p.gc(0),p.dc(1,"hr"),p.ic(2,"div"),p.ic(3,"p",65),p.dd(4," Bucket"),p.hc(),p.ic(5,"select",77),p.dc(6,"option",67),p.bd(7,ui,2,3,"option",68),p.hc(),p.ic(8,"button",78),p.qc("click",(function(){return p.Qc(e),p.uc(3).showEditBucketDialog()})),p.ic(9,"mat-icon"),p.dd(10,"edit"),p.hc(),p.hc(),p.ic(11,"button",79),p.qc("click",(function(){return p.Qc(e),p.uc(3).showCreateBucketDialog()})),p.ic(12,"mat-icon"),p.dd(13,"add"),p.hc(),p.hc(),p.bd(14,mi,2,0,"span",71),p.hc(),p.dc(15,"hr"),p.fc()}if(2&e){const e=p.uc(3);p.Pb(5),p.Qb("disabled",e.campaignForm.get("live_filter").value),p.Pb(1),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.buckets),p.Pb(1),p.Bc("disabled",!e.campaignForm.get("bucket").value),p.Pb(6),p.Bc("ngIf",e.campaignForm.get("live_filter").value)}}function pi(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function bi(e,t){if(1&e&&(p.gc(0),p.ic(1,"div"),p.ic(2,"p",65),p.dd(3," Sales Funnel / Redial Rules"),p.hc(),p.ic(4,"select",80),p.dc(5,"option",67),p.bd(6,pi,2,2,"option",68),p.hc(),p.ic(7,"p",73),p.dd(8," This is how your contacts will be redialed, or triggered for other system automations based on the most recent call disposition and call attempt. "),p.hc(),p.hc(),p.fc()),2&e){const e=p.uc(3);p.Pb(5),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.salesFunnels)}}function _i(e,t){if(1&e){const e=p.kc();p.gc(0),p.bd(1,ri,4,0,"div",64),p.ic(2,"div"),p.ic(3,"p",65),p.dd(4," Live Filter"),p.hc(),p.ic(5,"select",66),p.qc("change",(function(){return p.Qc(e),p.uc(2).checkLiveFilterSuppressionSync()})),p.dc(6,"option",67),p.bd(7,di,2,3,"option",68),p.hc(),p.ic(8,"button",69),p.qc("click",(function(){return p.Qc(e),p.uc(2).showEditLiverFilterDialog()})),p.ic(9,"mat-icon"),p.dd(10,"edit"),p.hc(),p.hc(),p.ic(11,"button",70),p.qc("click",(function(){return p.Qc(e),p.uc(2).showCreateLiveFilterDialog()})),p.ic(12,"mat-icon"),p.dd(13,"add"),p.hc(),p.hc(),p.bd(14,li,2,0,"span",71),p.bd(15,hi,2,0,"div",72),p.ic(16,"p",73),p.dd(17," This is the list of contacts you will be dialing on your campaign. "),p.hc(),p.hc(),p.bd(18,gi,16,5,"ng-container",22),p.bd(19,bi,9,2,"ng-container",22),p.fc()}if(2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngIf",e.accountFeatureService.accountFeaturesSubject.value&&e.accountFeatureService.accountFeaturesSubject.value.campaign_advanced_settings),p.Pb(4),p.Qb("disabled",e.campaignForm.get("bucket").value),p.Pb(1),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.liveFilters),p.Pb(1),p.Bc("disabled",!e.campaignForm.get("live_filter").value),p.Pb(6),p.Bc("ngIf",e.campaignForm.get("bucket").value),p.Pb(1),p.Bc("ngIf",e.campaignForm.get("live_filter").value&&e.liveFilterMap[e.campaignForm.get("live_filter").value]&&!e.liveFilterMap[e.campaignForm.get("live_filter").value].active),p.Pb(3),p.Bc("ngIf",e.accountFeatureService.accountFeaturesSubject.value&&e.accountFeatureService.accountFeaturesSubject.value.campaign_advanced_settings),p.Pb(1),p.Bc("ngIf",e.accountFeatureService.accountFeaturesSubject.value&&e.accountFeatureService.accountFeaturesSubject.value.campaign_advanced_settings)}}function fi(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.dc(2,"loading-skeleton",33),p.dc(3,"loading-skeleton",32),p.hc())}function vi(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function yi(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",null,81),p.ic(3,"label",82),p.dd(4,"Agent Script"),p.hc(),p.dc(5,"br"),p.ic(6,"select",83),p.dc(7,"option",67),p.bd(8,vi,2,2,"option",68),p.hc(),p.ic(9,"button",84),p.qc("click",(function(){return p.Qc(e),p.uc(2).showEditAgentScriptDialog()})),p.ic(10,"mat-icon"),p.dd(11,"edit"),p.hc(),p.hc(),p.ic(12,"button",85),p.qc("click",(function(){return p.Qc(e),p.uc(2).showCreateAgentScriptDialog()})),p.ic(13,"mat-icon"),p.dd(14,"add"),p.hc(),p.hc(),p.hc(),p.dc(15,"hr"),p.ic(16,"div",86),p.dc(17,"input",87),p.ic(18,"label",88),p.dd(19,"Call Recording"),p.hc(),p.ic(20,"p",89),p.dd(21," Set call recordings on or off for calls entering this campaign. "),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc(2);p.Pb(7),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.agentScripts),p.Pb(1),p.Bc("disabled",!e.campaignForm.get("agent_script").value)}}const Ci=function(){return["/manager/fdnc-certification"]},xi=function(e){return{return_url:e}};function wi(e,t){if(1&e&&(p.ic(0,"div",90),p.dd(1," FDNC calling has been disabled, to re-certify your account click "),p.ic(2,"span",91),p.dd(3,"here"),p.hc(),p.dd(4,". "),p.hc()),2&e){const e=p.uc(2);p.Pb(2),p.Bc("routerLink",p.Fc(2,Ci))("queryParams",p.Gc(3,xi,e.campaign?"/manager/campaigns/edit/"+e.campaign.id:"/manager/campaigns/create"))}}function Pi(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.hc())}function ki(e,t){if(1&e){const e=p.kc();p.ic(0,"input",96),p.qc("change",(function(){return p.Qc(e),p.uc(4).checkLiveFilterSuppressionSync()})),p.hc()}}function Si(e,t){1&e&&p.dc(0,"input",97),2&e&&p.Qb("disabled",!0)}function Bi(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",92),p.ic(2,"div",4),p.bd(3,ki,1,0,"input",93),p.bd(4,Si,1,1,"input",94),p.ic(5,"label",95),p.dd(6," Suppress Federal Do Not Call "),p.hc(),p.hc(),p.ic(7,"p",73),p.dd(8," When this is checked, the campaign won't call any phone numbers on the federal do not call list. "),p.dc(9,"br"),p.dd(10," To optimize your dialing please also enable this on your live filter. "),p.hc(),p.hc(),p.dc(11,"hr"),p.fc()),2&e){const e=p.uc(3);p.Pb(3),p.Bc("ngIf",e.accountSettings.call_fdnc&&!e.campaign.suppress_federal_dnc||e.accountSettings.call_fdnc&&e.campaign.suppress_federal_dnc||!e.accountSettings.call_fdnc&&!e.campaign.suppress_federal_dnc),p.Pb(1),p.Bc("ngIf",!e.accountSettings.call_fdnc&&e.campaign.suppress_federal_dnc),p.Pb(1),p.Tb("dyn-text-muted",!e.accountSettings.call_fdnc&&e.campaign.suppress_federal_dnc)}}function Di(e,t){if(1&e&&(p.gc(0),p.bd(1,Pi,2,0,"div",22),p.bd(2,Bi,12,4,"ng-container",22),p.fc()),2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading)}}function Mi(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.hc())}function Fi(e,t){1&e&&(p.gc(0),p.dd(1," This allows you to call mobile numbers. "),p.fc())}function Ii(e,t){1&e&&(p.gc(0),p.dd(1," This will only call mobile numbers. "),p.fc())}function Ai(e,t){1&e&&(p.gc(0),p.dd(1," This will block calls to mobile numbers. "),p.fc())}function Ti(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",98),p.ic(2,"div",28),p.ic(3,"mat-icon",99),p.dd(4,"phone_iphone"),p.hc(),p.ic(5,"div",100),p.ic(6,"label",101),p.dd(7,"Mobile Phone Numbers"),p.hc(),p.dc(8,"br"),p.ic(9,"select",102),p.ic(10,"option",103),p.dd(11,"Allow"),p.hc(),p.ic(12,"option",104),p.dd(13,"Target"),p.hc(),p.ic(14,"option",105),p.dd(15,"Suppress"),p.hc(),p.hc(),p.hc(),p.hc(),p.ic(16,"p",73),p.bd(17,Fi,2,0,"ng-container",22),p.bd(18,Ii,2,0,"ng-container",22),p.bd(19,Ai,2,0,"ng-container",22),p.hc(),p.hc(),p.fc()),2&e){const e=p.uc(2);p.Pb(17),p.Bc("ngIf","Allow"===e.campaignForm.get("mobile").value),p.Pb(1),p.Bc("ngIf","Target"===e.campaignForm.get("mobile").value),p.Pb(1),p.Bc("ngIf","Suppress"===e.campaignForm.get("mobile").value)}}function Oi(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.hc())}function Li(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function Ni(e,t){1&e&&(p.gc(0),p.dd(1," This will show your current connect calls phone number. "),p.fc())}function $i(e,t){1&e&&(p.gc(0),p.dd(1," This will show the campaign or assigned CalTools number. "),p.fc())}function qi(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e),p.Pb(1),p.fd(" ",e," ")}}function Vi(e,t){1&e&&(p.gc(0),p.dd(1," When originate calls is enabled, channels per agent is your automatic max dialing ratio for every available agent that is logged into a campaign. "),p.fc())}function Ri(e,t){1&e&&(p.gc(0),p.dd(1," When Dial Flux clicker agents are used or when Preview Dial button Async Dial Next is used this setting controls the maximum number of telephone channels (lines) that will be used. "),p.fc())}function Ei(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",118),p.ic(2,"label",119),p.dd(3," Channels Per Agent "),p.hc(),p.dc(4,"br"),p.ic(5,"select",120),p.bd(6,qi,2,2,"option",68),p.hc(),p.ic(7,"p",89),p.bd(8,Vi,2,0,"ng-container",22),p.bd(9,Ri,2,0,"ng-container",22),p.hc(),p.hc(),p.dc(10,"hr"),p.fc()),2&e){const e=p.uc(3);p.Pb(6),p.Bc("ngForOf",e.maxChannelsPerAgentDropdownOptions),p.Pb(2),p.Bc("ngIf",e.campaignForm.get("originate_calls").value),p.Pb(1),p.Bc("ngIf",!e.campaignForm.get("originate_calls").value)}}function zi(e,t){if(1&e){const e=p.kc();p.gc(0),p.dc(1,"hr"),p.ic(2,"label",121),p.dd(3," Max Abandon Rate "),p.hc(),p.ic(4,"p",89),p.dd(5," Your campaign slows if this abandon rate is exceeded "),p.hc(),p.ic(6,"div",122),p.ic(7,"div",123),p.dc(8,"mat-slider",124),p.hc(),p.ic(9,"div",125),p.ic(10,"span",126),p.dd(11),p.vc(12,"number"),p.hc(),p.hc(),p.hc(),p.dc(13,"hr"),p.ic(14,"label"),p.dd(15,"Channel Speed By Agents"),p.hc(),p.ic(16,"p",89),p.dd(17," To minimize abandoned calls when fewer agents are working, the system will adjust channels per agent used depending on how many agents are logged into a campaign (regardless of status). "),p.hc(),p.ic(18,"div",127),p.ic(19,"app-channels-per-agent-slider",128),p.qc("itemsChange",(function(t){return p.Qc(e),p.uc(3).sliders=t}))("validityChange",(function(t){return p.Qc(e),p.uc(3).isChannelPerAgentSliderValid=t})),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc(3);p.Pb(8),p.Bc("displayWith",e.formatAbandonRate),p.Pb(3),p.fd(" ",p.xc(12,11,100*e.campaignForm.get("max_abandon_rate").value,"1.1-3"),"% "),p.Pb(8),p.Bc("items",e.sliders)("topLabel","Channels")("bottomLabel","Agents")("W",56)("H",200)("minAgents",e.minAgents)("maxAgents",e.maxAgents)("minCpa",e.minChannelsPerAgent)("maxCpa",e.maxChannelsPerAgent)}}function Qi(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",106),p.ic(2,"label",107),p.dd(3," Caller ID Strategy "),p.ic(4,"span",52),p.dd(5,"(required)"),p.hc(),p.hc(),p.dc(6,"br"),p.ic(7,"select",108),p.dc(8,"option",67),p.bd(9,Li,2,2,"option",68),p.hc(),p.ic(10,"button",109),p.qc("click",(function(){return p.Qc(e),p.uc(2).showEditCallerIdStrategyDialog()})),p.ic(11,"mat-icon"),p.dd(12,"edit"),p.hc(),p.hc(),p.ic(13,"button",110),p.qc("click",(function(){return p.Qc(e),p.uc(2).showCreateCallerIdStrategyDialog()})),p.ic(14,"mat-icon"),p.dd(15,"add"),p.hc(),p.hc(),p.ic(16,"p",89),p.dd(17," Caller ID strategy is a collection of settings that will determine how this campaign will select a caller ID for each contact. "),p.hc(),p.hc(),p.dc(18,"hr"),p.ic(19,"label",111),p.dd(20," Transfer Caller ID "),p.hc(),p.dc(21,"br"),p.ic(22,"select",112),p.ic(23,"option",113),p.dd(24,"Callee"),p.hc(),p.ic(25,"option",114),p.dd(26,"Standard"),p.hc(),p.hc(),p.ic(27,"p",73),p.bd(28,Ni,2,0,"ng-container",22),p.bd(29,$i,2,0,"ng-container",22),p.hc(),p.dc(30,"hr"),p.bd(31,Ei,11,3,"ng-container",22),p.ic(32,"div",115),p.dc(33,"input",116),p.ic(34,"label",117),p.dd(35,"Restrict Transfers"),p.hc(),p.ic(36,"p",89),p.dd(37," Restrict transfers to only speed dial options. This would not allow agents to dial any number or extension for transferring calls from this campaign. "),p.hc(),p.hc(),p.bd(38,zi,20,14,"ng-container",22),p.fc()}if(2&e){const e=p.uc(2);p.Pb(8),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.callerIdStrategies),p.Pb(1),p.Bc("disabled",!e.campaignForm.get("caller_id_strategy").value),p.Pb(18),p.Bc("ngIf","Callee"===e.campaignForm.get("transfer_caller_id").value),p.Pb(1),p.Bc("ngIf","Standard"===e.campaignForm.get("transfer_caller_id").value),p.Pb(2),p.Bc("ngIf",!e.isPredictive&&e.accountSettings&&e.accountSettings.auto_orig),p.Pb(7),p.Bc("ngIf",e.isPredictive)}}function Gi(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"loading-skeleton",32),p.dc(2,"loading-skeleton",33),p.dc(3,"loading-skeleton",50),p.hc())}function ji(e,t){1&e&&(p.gc(0),p.dc(1,"hr"),p.ic(2,"div",122),p.dc(3,"img",135),p.ic(4,"div"),p.dc(5,"input",136),p.ic(6,"label",137),p.dd(7,"Show Async Dial Next Button"),p.hc(),p.ic(8,"p",89),p.dd(9,' Show the "next & async call" button on the agent dashboard. This button allows agents to initiate a background call (they wont hear the ringing) and simultaneously move on to the next contact in the campaign with a single click. '),p.hc(),p.hc(),p.hc(),p.fc())}function Hi(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",122),p.dc(2,"img",129),p.ic(3,"div"),p.dc(4,"input",130),p.ic(5,"label",131),p.dd(6,"Show Next Contact Button"),p.hc(),p.ic(7,"p",89),p.dd(8,' Show the "next contact" button on the agent dashboard. This button allows the agent to preview the next contact from the campaign without dialing immediately. '),p.hc(),p.hc(),p.hc(),p.dc(9,"hr"),p.ic(10,"div",122),p.dc(11,"img",132),p.ic(12,"div"),p.dc(13,"input",133),p.ic(14,"label",134),p.dd(15,"Show Dial Next Button"),p.hc(),p.ic(16,"p",89),p.dd(17,' Show the "next & call" button on the agent dashboard. This button allows agents to retrieve the next contact in the campaign with a single click, and simultaneously call a number assigned to that contact. (you can select a preferred phone number in the "Phone Number Field Preference" setting) '),p.hc(),p.hc(),p.hc(),p.bd(18,ji,10,0,"ng-container",22),p.fc()),2&e){const e=p.uc(3);p.Pb(18),p.Bc("ngIf",e.accountSettings&&e.accountSettings.auto_orig||e.campaign&&e.campaign.async_dial_next_visible)}}function Xi(e,t){if(1&e&&(p.gc(0),p.ic(1,"div",28),p.ic(2,"div",24),p.ic(3,"h3",25),p.dd(4," Preview Dialing Options "),p.hc(),p.hc(),p.ic(5,"div",26),p.ic(6,"div",27),p.bd(7,Gi,4,0,"div",22),p.bd(8,Hi,19,1,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(9,"hr"),p.fc()),2&e){const e=p.uc(2);p.Pb(7),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading)}}function Wi(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.fd(" ",e.name," ")}}function Ui(e,t){if(1&e&&(p.gc(0),p.ic(1,"div"),p.ic(2,"label"),p.dd(3,"10DLC Campaign"),p.hc(),p.dc(4,"br"),p.ic(5,"select",165),p.dc(6,"option",67),p.bd(7,Wi,2,2,"option",68),p.hc(),p.ic(8,"p",89),p.dd(9," Make this campaigns SMS messages from agents use caller IDs that are registered with a specific 10DLC campaign. "),p.hc(),p.hc(),p.dc(10,"hr"),p.fc()),2&e){const e=p.uc(3);p.Pb(6),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.tenDlcCampaigns)}}function Yi(e,t){1&e&&(p.gc(0),p.ic(1,"div"),p.ic(2,"label"),p.dd(3,"Agent Connect Speed"),p.hc(),p.dc(4,"br"),p.ic(5,"select",166),p.ic(6,"option",167),p.dd(7,"Slow"),p.hc(),p.ic(8,"option",168),p.dd(9,"Normal"),p.hc(),p.ic(10,"option",169),p.dd(11,"Fast"),p.hc(),p.hc(),p.ic(12,"p",89),p.dd(13," The agent connect speed determines how fast we connect a callee to your waiting agents ONLY when your campaign is using answering machine detection. "),p.dc(14,"br"),p.dc(15,"br"),p.ic(16,"b"),p.ic(17,"u"),p.dd(18,"Fast"),p.hc(),p.hc(),p.dd(19,": Agents connect fast but you will get more number of voice mails being connected to your agents."),p.dc(20,"br"),p.ic(21,"b"),p.ic(22,"u"),p.dd(23,"Normal"),p.hc(),p.hc(),p.dd(24,": Agents connect with normal speed with fewer number of voice mails."),p.dc(25,"br"),p.ic(26,"b"),p.ic(27,"u"),p.dd(28,"Slow"),p.hc(),p.hc(),p.dd(29,": Agents connect slower to the callee but the number of voice mails should be minimal. Cannot be used in conjunction with custom AMD settings, as they will override this setting. "),p.hc(),p.hc(),p.dc(30,"hr"),p.fc())}function Zi(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.gd("",e.name," (count: ",e.count,")")}}function Ji(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"input",170),p.ic(2,"label",171),p.dd(3,"Auto Originate Calls All Numbers"),p.hc(),p.ic(4,"p",89),p.dd(5," When auto originate is activated this option will setup automatic calling sequentially of each of the phone numbers on a contact if there is multiple phone numbers. "),p.hc(),p.dc(6,"hr"),p.hc())}function Ki(e,t){if(1&e&&(p.gc(0),p.bd(1,Ji,7,0,"div",22),p.fc()),2&e){const e=p.uc(3);p.Pb(1),p.Bc("ngIf",e.isPredictive||e.isPower)}}function ec(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=p.uc().$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.label)}}function tc(e,t){if(1&e&&(p.gc(0),p.bd(1,ec,2,2,"option",172),p.fc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("ngIf","Phone Number"===e.data_type)}}function nc(e,t){1&e&&(p.ic(0,"p",52),p.dd(1," Ring time must be 60 - 90 "),p.hc())}function ic(e,t){if(1&e&&(p.gc(0),p.ic(1,"div"),p.ic(2,"label",173),p.dd(3," Ring Time "),p.hc(),p.dc(4,"br"),p.dc(5,"input",174),p.ic(6,"span",175),p.dd(7,"60 - 90 Seconds"),p.hc(),p.bd(8,nc,2,0,"p",54),p.ic(9,"p",89),p.dd(10," Number of seconds to ring a phone number and wait for a connection for before hanging up. "),p.hc(),p.hc(),p.dc(11,"hr"),p.fc()),2&e){const e=p.uc(3);p.Pb(8),p.Bc("ngIf",e.campaignForm.get("ring_time").invalid&&e.campaignForm.get("ring_time").touched)}}function cc(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.fd(" ",e.name," ")}}function ac(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div"),p.dc(2,"input",176),p.ic(3,"label",177),p.dd(4,"Answering Machine Detection"),p.hc(),p.ic(5,"p",89),p.dd(6,' Turn answering machine detection on or off. Turning off will result in your agents getting connected to both live and machine answers immediately on call connect. Turning on will connect only live answers to your agents (80% accuracy) with a brief delay in which they will not hear the person say "hello". On is the default campaign behavior. '),p.hc(),p.hc(),p.dc(7,"hr"),p.ic(8,"div"),p.ic(9,"label",178),p.dd(10," Answering Machine Detection Settings "),p.hc(),p.dc(11,"br"),p.ic(12,"select",179),p.dc(13,"option",67),p.bd(14,cc,2,2,"option",68),p.hc(),p.ic(15,"button",180),p.qc("click",(function(){return p.Qc(e),p.uc(3).showEditAmdSettingsDialog()})),p.ic(16,"mat-icon"),p.dd(17,"edit"),p.hc(),p.hc(),p.ic(18,"button",181),p.qc("click",(function(){return p.Qc(e),p.uc(3).showCreateAmdSettingsDialog()})),p.ic(19,"mat-icon"),p.dd(20,"add"),p.hc(),p.hc(),p.ic(21,"button",182),p.qc("click",(function(){return p.Qc(e),p.uc(3).showDeleteAmdSettingConfirmation()})),p.ic(22,"mat-icon"),p.dd(23,"delete"),p.hc(),p.hc(),p.ic(24,"p",89),p.dd(25," Advanced users only. Customize your answering machine detection parameters. These changes can alter the false positives for live vs machine you get and also adjust the speed at which callees are connected. "),p.hc(),p.hc(),p.dc(26,"hr",154),p.fc()}if(2&e){const e=p.uc(3);p.Pb(13),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.amdSettings),p.Pb(1),p.Bc("disabled",!e.campaignForm.get("amd_settings").value),p.Pb(6),p.Bc("disabled",!e.campaignForm.get("amd_settings").value)}}function oc(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function sc(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}function rc(e,t){if(1&e&&(p.ic(0,"option",67),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.ed(e.name)}}const dc=function(e){return{background:e}},lc=function(e){return{"dyn-error-border":e}};function hc(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"mat-accordion"),p.ic(2,"mat-expansion-panel"),p.ic(3,"mat-expansion-panel-header"),p.ic(4,"mat-panel-title"),p.dd(5," Advanced Settings "),p.hc(),p.hc(),p.ic(6,"div",40),p.ic(7,"p",65),p.dd(8," Dashboard Color"),p.hc(),p.dc(9,"span",138),p.ic(10,"mat-menu",null,139),p.ic(12,"color-chrome",140),p.qc("click",(function(t){return p.Qc(e),t.stopPropagation()}))("onChangeComplete",(function(t){return p.Qc(e),p.uc(2).campaignForm.get("color").setValue(t.color.hex)})),p.hc(),p.hc(),p.ic(13,"mat-icon",141),p.dd(14,"color_lens"),p.hc(),p.ic(15,"p",89),p.dd(16," The color that is used for the agent dashboard for this campaign "),p.hc(),p.hc(),p.dc(17,"hr"),p.bd(18,Ui,11,2,"ng-container",22),p.bd(19,Yi,31,0,"ng-container",22),p.ic(20,"div"),p.ic(21,"label"),p.dd(22,"Hot Lead Bucket"),p.hc(),p.dc(23,"br"),p.ic(24,"select",142),p.dc(25,"option",67),p.bd(26,Zi,2,3,"option",68),p.hc(),p.ic(27,"p",89),p.dd(28," Allows you to setup an empty bucket that will call contacts immediately as they are added to the bucket if your campaign is active with available agents."),p.dc(29,"br"),p.dd(30," Do not use for buckets with lots of contacts. "),p.hc(),p.hc(),p.dc(31,"hr"),p.ic(32,"div"),p.ic(33,"label",143),p.dd(34," Max Dials Daily "),p.hc(),p.dc(35,"br"),p.dc(36,"input",144),p.ic(37,"p",89),p.dd(38," Optionally, set a max number of call attempts that this campaign can make each day. "),p.hc(),p.hc(),p.dc(39,"hr"),p.ic(40,"div",115),p.dc(41,"input",145),p.ic(42,"label",146),p.dd(43,"Force Post Call"),p.hc(),p.ic(44,"p",89),p.dd(45," Require agents to disposition each call and complete any (optional) notes in post call wrap up before getting new calls from this campaign. "),p.hc(),p.hc(),p.dc(46,"hr"),p.bd(47,Ki,2,1,"ng-container",22),p.ic(48,"div"),p.ic(49,"label",147),p.dd(50,"Phone Number Field Preference"),p.hc(),p.dc(51,"br"),p.ic(52,"select",148),p.dc(53,"option",67),p.bd(54,tc,2,1,"ng-container",149),p.hc(),p.ic(55,"p",89),p.dd(56,' This phone number will be tried first if the contact has multiple numbers during power dialing or when clicking the "dial & next" button or the "async dial & next" button. '),p.hc(),p.hc(),p.dc(57,"hr"),p.bd(58,ic,12,1,"ng-container",22),p.bd(59,ac,27,4,"ng-container",22),p.ic(60,"div"),p.ic(61,"label",150),p.dd(62," Voicemail Action "),p.hc(),p.dc(63,"br"),p.ic(64,"select",151),p.ic(65,"option",152),p.dd(66,"Hang Up"),p.hc(),p.ic(67,"option",153),p.dd(68,"Connect to Agent"),p.hc(),p.hc(),p.ic(69,"p",59),p.dd(70," Select what to do when answering machine detection determines the call was answered by a machine (voice mail or other). If answering machine detection is shut off, this setting has no effect. "),p.hc(),p.ic(71,"p",89),p.dd(72,' Do not set to "Connect to Agent" if your Abandon Rate is high. '),p.hc(),p.hc(),p.dc(73,"hr",154),p.ic(74,"div"),p.ic(75,"label",155),p.dd(76,"Abandon Option"),p.hc(),p.dc(77,"br"),p.ic(78,"select",156),p.ic(79,"option",152),p.dd(80,"Hang Up"),p.hc(),p.ic(81,"option",157),p.dd(82,"Any Agent"),p.hc(),p.hc(),p.ic(83,"p",89),p.dd(84," Hang Up: Hangs up the call if agents are not available."),p.dc(85,"br"),p.dd(86," Any Agent: Attempts to reach available agents, including agents that are not members of or joined to a campaign. Agents in other campaigns may receive calls from this campaign. "),p.hc(),p.hc(),p.dc(87,"hr",154),p.ic(88,"div",28),p.ic(89,"div"),p.ic(90,"label",158),p.dd(91,"Agent "),p.ic(92,"b"),p.dd(93,"Ready"),p.hc(),p.dd(94," Status"),p.hc(),p.ic(95,"p",159),p.dd(96," Select an Agent Status that will be automatically selected when an agent is done with their post call wrap up. "),p.hc(),p.ic(97,"select",160),p.bd(98,oc,2,2,"option",68),p.hc(),p.hc(),p.hc(),p.dc(99,"hr",154),p.ic(100,"div",28),p.ic(101,"div"),p.ic(102,"label",161),p.dd(103,"Agent "),p.ic(104,"b"),p.dd(105,"On Call"),p.hc(),p.dd(106," Status"),p.hc(),p.ic(107,"p",159),p.dd(108," Select an Agent Status that will be automatically selected when an agent is on web phone call. "),p.hc(),p.ic(109,"select",162),p.bd(110,sc,2,2,"option",68),p.hc(),p.hc(),p.hc(),p.dc(111,"hr",154),p.ic(112,"div",28),p.ic(113,"div"),p.ic(114,"label",163),p.dd(115,"Agent "),p.ic(116,"b"),p.dd(117,"Post Call"),p.hc(),p.dd(118," Status"),p.hc(),p.ic(119,"p",159),p.dd(120," Select an Agent Status that will be automatically selected when the agent ends of phone call and is in the post call wrap up phase. "),p.hc(),p.ic(121,"select",164),p.bd(122,rc,2,2,"option",68),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.Mc(11),t=p.uc(2);p.Pb(9),p.Bc("ngStyle",p.Gc(18,dc,t.campaignForm.get("color").value))("matMenuTriggerFor",e),p.Pb(3),p.Bc("disableAlpha",!0)("color",t.campaignForm.get("color").value),p.Pb(1),p.Bc("matMenuTriggerFor",e),p.Pb(5),p.Bc("ngIf",null==t.accountSettings?null:t.accountSettings.show_tendlc_pages),p.Pb(1),p.Bc("ngIf",t.isPredictive||t.isPower),p.Pb(6),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.buckets),p.Pb(10),p.Bc("ngClass",p.Gc(20,lc,null!==t.campaignForm.get("max_dials_daily").value&&t.campaignForm.get("max_dials_daily").value<1||t.campaignForm.get("max_dials_daily").value>999999999)),p.Pb(11),p.Bc("ngIf",t.accountSettings&&t.accountSettings.auto_orig),p.Pb(6),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",t.contactFields),p.Pb(4),p.Bc("ngIf",t.isPredictive||t.isPower),p.Pb(1),p.Bc("ngIf",t.isPredictive||t.isPower),p.Pb(39),p.Bc("ngForOf",t.statuses),p.Pb(12),p.Bc("ngForOf",t.statuses),p.Pb(12),p.Bc("ngForOf",t.statuses)}}function uc(e,t){if(1&e&&(p.ic(0,"div",20),p.ic(1,"form",21),p.bd(2,ni,10,2,"ng-container",22),p.ic(3,"div",23),p.ic(4,"div",24),p.ic(5,"h3",25),p.dd(6,"Basic Settings"),p.hc(),p.hc(),p.ic(7,"div",26),p.ic(8,"div",27),p.bd(9,ii,4,0,"div",22),p.bd(10,oi,18,2,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(11,"hr"),p.ic(12,"div",28),p.ic(13,"div",24),p.ic(14,"h3",25),p.dd(15,"Targeting"),p.hc(),p.hc(),p.ic(16,"div",26),p.ic(17,"div",27),p.bd(18,si,5,0,"div",22),p.bd(19,_i,20,9,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(20,"hr"),p.ic(21,"div",28),p.ic(22,"div",24),p.ic(23,"h3",25),p.dd(24,"Agent Options"),p.hc(),p.hc(),p.ic(25,"div",26),p.ic(26,"div",27),p.bd(27,fi,4,0,"div",22),p.bd(28,yi,22,3,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(29,"hr"),p.ic(30,"div",28,29),p.ic(32,"div",24),p.ic(33,"h3",25),p.dd(34,"Suppression Options"),p.hc(),p.hc(),p.ic(35,"div",26),p.bd(36,wi,5,5,"div",30),p.ic(37,"div",27),p.bd(38,Di,3,2,"ng-container",22),p.bd(39,Mi,2,0,"div",22),p.bd(40,Ti,20,3,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(41,"hr"),p.ic(42,"div",28),p.ic(43,"div",24),p.ic(44,"h3",25),p.dd(45,"Calling Options"),p.hc(),p.hc(),p.ic(46,"div",26),p.ic(47,"div",27,31),p.bd(49,Oi,2,0,"div",22),p.bd(50,Qi,39,7,"ng-container",22),p.hc(),p.hc(),p.hc(),p.dc(51,"hr"),p.bd(52,Xi,10,2,"ng-container",22),p.bd(53,hc,123,22,"ng-container",22),p.hc(),p.hc()),2&e){const e=p.uc();p.Pb(1),p.Bc("formGroup",e.campaignForm),p.Pb(1),p.Bc("ngIf",e.accountSettings&&e.accountSettings.auto_orig),p.Pb(7),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading),p.Pb(8),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading),p.Pb(8),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading),p.Pb(8),p.Bc("ngIf",e.accountSettings&&!e.accountSettings.call_fdnc&&!e.accountSettings.call_fdnc_ban),p.Pb(2),p.Bc("ngIf",e.accountSettings&&e.campaign),p.Pb(1),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading),p.Pb(9),p.Bc("ngIf",e.formIsLoading),p.Pb(1),p.Bc("ngIf",!e.formIsLoading),p.Pb(2),p.Bc("ngIf",e.isPreview),p.Pb(1),p.Bc("ngIf",e.accountFeatureService.accountFeaturesSubject.value&&e.accountFeatureService.accountFeaturesSubject.value.campaign_advanced_settings)}}const mc=function(e){return["/manager/campaigns/members",e]},gc=function(e){return["/manager/campaigns/call-dispositions",e]},pc=function(e){return["/manager/campaigns/agent-dashboard-settings",e]};let bc=(()=>{class e{constructor(e,t,n,i,c,a,o,s,r,d,l,h,m,g,p,b,_,f,v,y,C,x,w,P,k,S){this.permissionService=e,this.accountFeatureService=t,this._campaignService=n,this._agentScriptService=i,this._callerIdStrategyService=c,this._amdService=a,this._audioFileService=o,this._destinationService=s,this._snackBar=r,this._route=d,this._router=l,this._fb=h,this._dialog=m,this._liveFilterService=g,this._bucketService=p,this._contactFieldService=b,this._accountSettingService=_,this._userService=f,this._authService=v,this._utils=y,this._softwareLicenseService=C,this._salesFunnelService=x,this._statusService=w,this._campaignStatService=P,this._setupGuideService=k,this._dlcCampaignService=S,this.agentScripts=[],this.callerIdStrategies=[],this.buckets=[],this.liveFilters=[],this.contactFields=[],this.destinations=[],this.extensionDestinations=[],this.destinationsMap=[],this.destinationSearchInput=new u.a,this.loadingDestinations=!1,this.minAgents=1,this.maxAgents=100,this.minChannelsPerAgent=1,this.maxChannelsPerAgent=10,this.maxChannelsPerAgentDropdownOptions=[],this.duplicatingCampaign=!1,this.salesFunnels=[],this.statuses=[],this.liveFilterMap=[],this.tenDlcCampaigns=[],this.defaultCampaignType="power",this._campaignType=null,this.sliders=[{agents:1,cpa:2},{agents:3,cpa:4},{agents:5,cpa:6},{agents:7,cpa:8},{agents:9,cpa:10}],this.showPredictiveOption=!0,this.isChannelPerAgentSliderValid=!0,this.formIsLoading=!0}ngOnInit(){this._getAgentScripts(),this._getCallerIdStrategies(),this._getAMDSettings(),this._getExtensionDestinations(),this._getAudioFiles(),this._getLiveFilters(),this._getBuckets(),this._getContactFields(),this._getMaxChannelsPerAgent(),this._getSalesFunnels(),this._route.params.subscribe({next:e=>{this.campaignId=parseInt(e.id),this.campaignId?(this.title="Edit Campaign",this._campaignService.get(this.campaignId).subscribe({next:e=>{this.campaign=e,this.campaign.originate_calls?(this.setCampaignType(this.campaign.auto_pilot?"predictive":"power"),this._initSlidersFromCampaign()):this.setCampaignType("preview"),this._buildForm(e),this._campaignStatService.list([e.id]).subscribe({next:e=>{e&&e.results.length&&(this.campaignWarningMessage=e.results[0]?e.results[0].warning_message:null)}})}})):(this.title="Create Campaign",this._route.queryParams.subscribe({next:e=>{Object.keys(e).length?e.duplicate&&"true"===e.duplicate&&(this.duplicatingCampaign=!0,this._campaignService.get(parseInt(e.campaign)).subscribe({next:t=>{this._buildForm(t,e.name)}})):this._buildForm()}}))}}),this.setupGuideSubscription=this._setupGuideService.onNextSubject.subscribe({next:()=>{this._scrollIntoPosition()}})}ngAfterViewInit(){this._scrollIntoPosition()}ngOnDestroy(){this.setupGuideSubscription.unsubscribe()}setCampaignType(e){this._campaignType=e,this.campaignForm&&("preview"===e?(this.campaignForm.get("preview_next_visible").setValue(!0),this.campaignForm.get("dial_next_visible").setValue(!0),this.campaignForm.get("originate_calls").setValue(!1),this.campaignForm.get("auto_pilot").setValue(!1)):"predictive"===e?(this.campaignForm.get("originate_calls").setValue(!0),this.campaignForm.get("auto_pilot").setValue(!0)):"power"===e&&(this.campaignForm.get("originate_calls").setValue(!0),this.campaignForm.get("auto_pilot").setValue(!1)))}get isPreview(){return"preview"===this._campaignType}get isPredictive(){return"predictive"===this._campaignType}get isPower(){return"power"===this._campaignType}formatAbandonRate(e){if(null==e)return"";const t=100*e;return Number.isInteger(t)?t+"%":t.toFixed(2).replace(/\.?0+$/,"")+"%"}onSubmit(){if(this.campaignForm)if(this.campaignForm.invalid)this.campaignForm.get("name").value?this.campaignForm.get("caller_id_strategy").value?this._snackBar.open("Please fill all required fields","X",{duration:5e3,verticalPosition:"top",panelClass:["error"]}):this._snackBar.open("A Caller ID Strategy is Required","X",{duration:3e3,verticalPosition:"top",panelClass:["error"]}):this._snackBar.open("A Campaign Name is Required","X",{duration:3e3,verticalPosition:"top",panelClass:["error"]});else if(null!==this.campaignForm.get("live_filter").value||null!==this.campaignForm.get("bucket").value){if(this.isPredictive){if(!this.isChannelPerAgentSliderValid)return void this._snackBar.open('Please fix the errors in the "Channel Throttling By Available Agents" section',"X",{duration:1e4,verticalPosition:"top",panelClass:["error"]});this.campaignForm.get("originate_calls").setValue(!0),this.campaignForm.get("auto_pilot").setValue(!0),this._setCampaignChannelsPerAgentSettings()}else this.isPower?(this.campaignForm.get("originate_calls").setValue(!0),this.campaignForm.get("auto_pilot").setValue(!1)):this.isPreview&&(this.campaignForm.get("originate_calls").setValue(!1),this.campaignForm.get("auto_pilot").setValue(!1));this.checkFDNCConsistencyAndProceed()}else this._snackBar.open("Please select a Live Filter or a Bucket","X",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}checkLiveFilterSuppressionSync(){if(!this.campaignForm.get("live_filter").value)return;const e=this.liveFilterMap[this.campaignForm.get("live_filter").value];e&&e.filter_fdnc_numbers_flag!==this.campaignForm.get("suppress_federal_dnc").value&&this._dialog.open(Dn.a,{width:"600px",data:{title:"Warning",showCancelButton:!0,message:`This campaign is ${this.campaignForm.get("suppress_federal_dnc").value?"":"not"} \n\t\t\t\tset to suppress federal DNC checked but the live filter "${e.name}" is \n\t\t\t\t${e.filter_fdnc_numbers_flag?"":"not"} set to filter out \n\t\t\t\tcontacts that have all FDNC numbers. Would you like to update the live filter now?`,cancelButtonText:"Cancel",buttonText:"Update Live Filter"}}).afterClosed().subscribe(t=>{if(t){const t={id:e.id,filter_fdnc_numbers_flag:this.campaignForm.get("suppress_federal_dnc").value};this._liveFilterService.update(t).subscribe({next:()=>{this.liveFilterMap[e.id].filter_fdnc_numbers_flag=this.campaignForm.get("suppress_federal_dnc").value,this._snackBar.open("Live Filter Updated","X",{duration:5e3,verticalPosition:"top",panelClass:["success"]})},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error updating live filter"),"X",{duration:7500,verticalPosition:"top",panelClass:["error"]})}})}})}showCreateBucketDialog(){this._dialog.open(Pn.a,{width:"800px",data:null}).afterClosed().subscribe({next:e=>{e&&(this.buckets.push(e),this.campaignForm.get("live_filter").value||this.campaignForm.get("bucket").setValue(e.id))}})}showCreateLiveFilterDialog(){this._dialog.open(xn.a,{width:"1200px",data:null}).afterClosed().subscribe({next:e=>{e&&(this.liveFilters.push(e),this.campaignForm.get("bucket").value||this.campaignForm.get("live_filter").setValue(e.id))}})}showEditBucketDialog(){const e=this.campaignForm.get("bucket").value,t=this.buckets.find(t=>t.id===e);this._dialog.open(Pn.a,{width:"800px",data:t}).afterClosed().subscribe({next:t=>{if(t){const n=this.buckets.findIndex(t=>t.id===e);this.buckets[n]=t}}})}showEditLiverFilterDialog(){const e=this.campaignForm.get("live_filter").value,t=this.liveFilters.find(t=>t.id===e);this._dialog.open(xn.a,{width:"1200px",data:t}).afterClosed().subscribe({next:t=>{if(t){const n=this.liveFilters.findIndex(t=>t.id===e);this.liveFilters[n]=t}}})}showCreateAgentScriptDialog(){this._dialog.open(wn.a,{width:"800px",data:null}).afterClosed().subscribe({next:e=>{e&&(this.agentScripts.push(e),this.campaignForm.get("agent_script").setValue(e.id))}})}showCreateAmdSettingsDialog(){this._dialog.open(yn,{width:"800px"}).afterClosed().subscribe({next:e=>{e&&(this.amdSettings.push(e),this.campaignForm.get("amd_settings").setValue(e.id))}})}showCreateCallerIdStrategyDialog(){this._dialog.open(Cn.a,{width:this.accountFeatureService.accountFeaturesSubject.value&&this.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings?"1200px":"800px",panelClass:"dyn-dialog-no-padding",autoFocus:!0,data:{callerIdStrategy:null,callerIdStrategies:this.callerIdStrategies}}).afterClosed().subscribe({next:e=>{e&&(this.callerIdStrategies.push(e),this.campaignForm.get("caller_id_strategy").setValue(e.id))}})}showDeleteAmdSettingConfirmation(){const e=this.campaignForm.get("amd_settings").value;e&&this._dialog.open(d.a,{width:"400px",data:{title:"Delete This AMD Setting?",buttonText:"Delete"}}).afterClosed().subscribe({next:t=>{t&&this._amdService.delete(e).subscribe({next:()=>{const t=this.amdSettings.findIndex(t=>t.id===e);-1!==t&&this.amdSettings.splice(t,1),this.campaignForm.get("amd_settings").setValue(null)},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Deleting AMD Setting"),"X",{duration:3e3,verticalPosition:"top",panelClass:"error"})}})}})}showEditAgentScriptDialog(){const e=this.campaignForm.get("agent_script").value,t=this.agentScripts.find(t=>t.id==e);this._dialog.open(wn.a,{width:"800px",data:t}).afterClosed().subscribe({next:e=>{if(e){const t=this.agentScripts.findIndex(t=>t.id==e.id);this.agentScripts[t]=e}}})}showEditAmdSettingsDialog(){const e=this.campaignForm.get("amd_settings").value,t=this.amdSettings.find(t=>t.id==e);this._dialog.open(yn,{width:"800px",data:t}).afterClosed().subscribe({next:e=>{if(e){const t=this.amdSettings.findIndex(t=>t.id==e.id);this.amdSettings[t]=e}}})}showEditCallerIdStrategyDialog(){const e=this.accountFeatureService.accountFeaturesSubject.value&&this.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings?"1200px":"800px",t=this.campaignForm.get("caller_id_strategy").value,n=this.callerIdStrategies.find(e=>e.id==t);this._dialog.open(Cn.a,{width:e,panelClass:"dyn-dialog-no-padding",autoFocus:!0,data:{callerIdStrategy:n,callerIdStrategies:this.callerIdStrategies}}).afterClosed().subscribe({next:e=>{if(e){let t=this.callerIdStrategies.findIndex(t=>t.id==e.id);this.callerIdStrategies[t]=e}}})}checkFDNCConsistencyAndProceed(){const e=this.campaignForm.get("live_filter").value,t=this.campaignForm.get("suppress_federal_dnc").value;if(!e)return void this.finalizeSubmit();const n=this.liveFilterMap[e];if(!n)return this._snackBar.open("Live filter not found","X",{duration:5e3,verticalPosition:"top",panelClass:"error"}),void this.finalizeSubmit();t!==n.filter_fdnc_numbers_flag?this._dialog.open(Dn.a,{width:"600px",data:{title:"Warning",showCancelButton:!0,cancelButtonText:"Save Without Updating Live Filter",buttonText:"Update Live Filter & Save",message:`This campaign is ${t?"":"not"} set to suppress federal DNC checked but the live filter \n\t\t\t\t\t"${n.name}" is ${n.filter_fdnc_numbers_flag?"":"not"} set to \n\t\t\t\t\tfilter out contacts that have all FDNC numbers. Would you like to update the live filter now?`}}).afterClosed().subscribe(e=>{e?this._liveFilterService.update({id:n.id,filter_fdnc_numbers_flag:t}).subscribe({next:()=>{this.finalizeSubmit()},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error updating live filter"),"X",{duration:7500,verticalPosition:"top",panelClass:["error"]})}}):this.finalizeSubmit()}):this.finalizeSubmit()}_initSlidersFromCampaign(){if(!this.campaign)return;const e=this.sliders.length,t=[];for(let n=1;n<=e;n++){const e=this.campaign[`speed_slot_${n}_agents`],i=this.campaign[`speed_slot_${n}_channels_per_agent`];null!=e&&null!=i&&t.push({agents:e,cpa:i})}this.sliders=t}_setCampaignChannelsPerAgentSettings(){var e,t;const n=Object.keys(this.campaignForm.controls).filter(e=>/^speed_slot_(\d+)_agents$/.test(e)).map(e=>{const t=e.match(/^speed_slot_(\d+)_agents$/);return Number(t[1])}).sort((e,t)=>e-t),i=n.length?Math.max(...n):this.sliders.length;this.sliders.forEach((e,t)=>{var n,i,c,a;const o=t+1;null===(n=this.campaignForm.get(`speed_slot_${o}_agents`))||void 0===n||n.setValue(null!==(i=e.agents)&&void 0!==i?i:null),null===(c=this.campaignForm.get(`speed_slot_${o}_channels_per_agent`))||void 0===c||c.setValue(null!==(a=e.cpa)&&void 0!==a?a:null)});for(let c=this.sliders.length+1;c<=i;c++)null===(e=this.campaignForm.get(`speed_slot_${c}_agents`))||void 0===e||e.setValue(null),null===(t=this.campaignForm.get(`speed_slot_${c}_channels_per_agent`))||void 0===t||t.setValue(null)}finalizeSubmit(){this.campaignId&&!this.duplicatingCampaign?this._updateCampaign():this._createCampaign()}_buildForm(e,t){this._userService.get(this._authService.getUserId()).subscribe({next:n=>{this._accountSettingService.getByAccountId(n.account_id).subscribe({next:n=>{var i;this.accountSettings=n,this.campaignForm=this._fb.group({name:[e?t||e.name:"",S.z.required],description:e?e.description:"",live_filter:e?e.live_filter:null,bucket:e?e.bucket:null,sales_funnel:e?e.sales_funnel:null,abandon_option:e?e.abandon_option:"Hang Up",active:!!e&&e.active,agent_script:e?e.agent_script:null,amd_active:!e||e.amd_active,amd_settings:e?e.amd_settings:null,originate_calls:this._getDefaultOriginateCalls(e),originate_calls_all_numbers:!e||e.originate_calls_all_numbers,auto_pilot:e?e.auto_pilot:n.auto_orig&&"predictive"===this.defaultCampaignType,agent_connect_speed:e?e.agent_connect_speed:"Normal",suppress_federal_dnc:!e||e.suppress_federal_dnc,mobile:[e?e.mobile:"Suppress",S.z.required],preview_next_visible:!!e&&e.preview_next_visible,dial_next_visible:!!e&&e.dial_next_visible,async_dial_next_visible:!!e&&e.async_dial_next_visible,call_recording:!!e&&e.call_recording,phone_number_field_preference:e?e.phone_number_field_preference:null,caller_id_strategy:[e?e.caller_id_strategy:null,S.z.required],channels_per_agent:[e?e.channels_per_agent:3,S.z.required],max_dials_daily:e?e.max_dials_daily:null,color:e?e.color:"#4fc9b7",force_post_call:!e||e.force_post_call,restrict_transfers:!!e&&e.restrict_transfers,ring_time:[e?e.ring_time:60,[S.z.required,S.z.min(30),S.z.max(90)]],voice_mail_action:[e?e.voice_mail_action:"Hang Up",S.z.required],transfer_caller_id:e?e.transfer_caller_id:"Callee",ready_status:e?e.ready_status:null,post_call_status:e?e.post_call_status:null,on_call_status:e?e.on_call_status:null,hot_lead_bucket:e?e.hot_lead_bucket:null,tendlc_campaign:e?e.tendlc_campaign:null,max_abandon_rate:e?Number(e.max_abandon_rate):.2,speed_slot_1_agents:e?e.speed_slot_1_agents:1,speed_slot_1_channels_per_agent:e?e.speed_slot_1_channels_per_agent:2,speed_slot_2_agents:e?e.speed_slot_2_agents:3,speed_slot_2_channels_per_agent:e?e.speed_slot_2_channels_per_agent:4,speed_slot_3_agents:e?e.speed_slot_3_agents:5,speed_slot_3_channels_per_agent:e?e.speed_slot_3_channels_per_agent:6,speed_slot_4_agents:e?e.speed_slot_4_agents:7,speed_slot_4_channels_per_agent:e?e.speed_slot_4_channels_per_agent:8,speed_slot_5_agents:e?e.speed_slot_5_agents:9,speed_slot_5_channels_per_agent:e?e.speed_slot_5_channels_per_agent:10}),this._softwareLicenseService.getPredictiveCampaignSeats().subscribe({next:t=>{var n,i;this.maxAgents=t["Predictive Campaign Seat"].license_quantity,e?e.originate_calls?(this.setCampaignType(e.auto_pilot?"predictive":"power"),this._initSlidersFromCampaign(),this.showPredictiveOption=e.auto_pilot||this.maxAgents>=2):(this.setCampaignType("preview"),this.showPredictiveOption=this.maxAgents>=2):(this.showPredictiveOption=this.maxAgents>=2&&(null===(n=this.accountSettings)||void 0===n?void 0:n.auto_orig),!1===(null===(i=this.accountSettings)||void 0===i?void 0:i.auto_orig)?this.setCampaignType("preview"):this.setCampaignType(this.maxAgents<2?"power":this.defaultCampaignType)),this.formIsLoading=!1}}),this._getStatuses(),(null===(i=this.accountSettings)||void 0===i?void 0:i.show_tendlc_pages)&&this._get10DlcCampaigns()}})}})}_getDefaultOriginateCalls(e){return e?e.originate_calls:!(this.accountSettings&&!1===this.accountSettings.auto_orig||"predictive"!==this.defaultCampaignType&&"power"!==this.defaultCampaignType)}_createCampaign(){const e=JSON.parse(JSON.stringify(this.campaignForm.value));delete e.suppress_dnc,this._campaignService.create(e).subscribe({next:()=>{this._router.navigate(["/manager/campaigns"]),this._snackBar.open("Campaign Created Successfully","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error creating campaign"),"X",{duration:7500,verticalPosition:"top",panelClass:["error"]})}})}_updateCampaign(){this.campaignForm.invalid?this._snackBar.open("Please fill all required fields","X",{duration:5e3,verticalPosition:"top",panelClass:["error"]}):this._campaignService.update(this.campaignId,this.campaignForm.value).subscribe({next:()=>{this._router.navigate(["/manager/campaigns"]),this._snackBar.open("Campaign Updated Successfully","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error updating campaign"),"X",{duration:7500,verticalPosition:"top",panelClass:["error"]})}})}_getAgentScripts(){this._agentScriptService.list("max").subscribe({next:e=>{this.agentScripts=e.results}})}_getCallerIdStrategies(){this._callerIdStrategyService.list("max").subscribe({next:e=>{this.callerIdStrategies=e.results}})}_getContactFields(){this._contactFieldService.list("max").subscribe({next:e=>{this.contactFields=e.results}})}_getAMDSettings(){this._amdService.list("max").subscribe({next:e=>{this.amdSettings=e.results}})}_getExtensionDestinations(){this._destinationService.list("max").subscribe({next:e=>{e.results.forEach(e=>{e.extension&&this.extensionDestinations.push(e),this.destinationsMap[e.id]=e.destination})}})}_getAudioFiles(){this._audioFileService.list("max").subscribe({next:e=>{this.audioFiles=e.results}})}_getLiveFilters(){this._liveFilterService.list("max").subscribe({next:e=>{this.liveFilters=e.results,this.liveFilters.forEach(e=>{this.liveFilterMap[e.id]=e})}})}_getBuckets(){this._bucketService.list("max").subscribe({next:e=>{this.buckets=e.results}})}_getSalesFunnels(){this._salesFunnelService.list("max").subscribe({next:e=>{this.salesFunnels=e.results}})}_getMaxChannelsPerAgent(){this._softwareLicenseService.getCampaignChannelsPerAgent().subscribe({next:e=>{const t=e["Campaign Channel Per Agent"].license_quantity;this.maxChannelsPerAgent=t;let n=[];for(let i=1;i<t+1;i++)n.push(i);this.maxChannelsPerAgentDropdownOptions=n}})}_getStatuses(){this._statusService.list("max").subscribe({next:e=>{this.statuses=e.results,this.campaignId||(this.accountSettings.ready_status&&this.campaignForm.get("ready_status").setValue(this.accountSettings.ready_status),this.accountSettings.on_call_status&&this.campaignForm.get("on_call_status").setValue(this.accountSettings.on_call_status),this.accountSettings.post_call_status&&this.campaignForm.get("post_call_status").setValue(this.accountSettings.post_call_status))}})}_get10DlcCampaigns(){this._dlcCampaignService.list().subscribe({next:e=>{this.tenDlcCampaigns=e.results}})}_scrollIntoPosition(){"campaign_overview"===this._setupGuideService.onBoardingSection&&(3===this._setupGuideService.onBoardingStep&&this.descriptionField?this.descriptionField.nativeElement.scrollIntoView({behavior:"auto",block:"start"}):4===this._setupGuideService.onBoardingStep&&this.callRecordingField||5===this._setupGuideService.onBoardingStep&&this.callRecordingField?this.callRecordingField.nativeElement.scrollIntoView({behavior:"auto",block:"start"}):6===this._setupGuideService.onBoardingStep&&this.federalDncField?this.federalDncField.nativeElement.scrollIntoView({behavior:"auto",block:"start"}):!this.callerIdStrategyField||7!==this._setupGuideService.onBoardingStep&&8!==this._setupGuideService.onBoardingStep||this.callerIdStrategyField.nativeElement.scrollIntoView({behavior:"auto",block:"start"}))}}return e.\u0275fac=function(t){return new(t||e)(p.bc(l.a),p.bc(h.a),p.bc(a.a),p.bc(mn.a),p.bc(k.a),p.bc(gn),p.bc(pn.a),p.bc(bn.a),p.bc(B.a),p.bc(c.a),p.bc(c.g),p.bc(S.f),p.bc(f.b),p.bc(x.a),p.bc(P.a),p.bc(_n.a),p.bc(g.a),p.bc(fn.a),p.bc(s.a),p.bc(r.a),p.bc(_),p.bc(w.a),p.bc(kn.a),p.bc(o.a),p.bc(Sn.a),p.bc(Bn.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&(p.jd(Rn,!0),p.jd(En,!0),p.jd(zn,!0),p.jd(Qn,!0),p.jd(Gn,!0),p.jd(jn,!0)),2&e&&(p.Lc(n=p.rc())&&(t.dataSourceTable=n.first),p.Lc(n=p.rc())&&(t.activeField=n.first),p.Lc(n=p.rc())&&(t.callRecordingField=n.first),p.Lc(n=p.rc())&&(t.federalDncField=n.first),p.Lc(n=p.rc())&&(t.descriptionField=n.first),p.Lc(n=p.rc())&&(t.callerIdStrategyField=n.first))},decls:27,vars:24,consts:[["class","dyn-p-10 dyn-p-l-20 dyn-flex dyn-align-items dyn-m-b-20 dyn-error-notice",4,"ngIf"],[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","primary"],["mat-button","","color","",3,"disabled","routerLink"],["mat-button","","color","",3,"disabled","routerLink",4,"ngIf"],["class","dyn-card dyn-m-0 dyn-m-t-20 dyn-p-b-20",4,"ngIf"],["class","dyn-m-0 dyn-m-t-10 dyn-m-b-100",4,"ngIf"],[1,"dyn-text-right","dyn-p-20","dyn-full-width","bottom-controls-bar"],["matTooltip","You must have the 'campaigns_write' permission to modify campaigns",3,"matTooltipDisabled"],["mat-raised-button","","color","primary",1,"dyn-m-r-10","dyn-m-l-50",3,"disabled","click"],[1,"dyn-p-10","dyn-p-l-20","dyn-flex","dyn-align-items","dyn-m-b-20","dyn-error-notice"],[1,"dyn-full-width","dyn-m-r-20"],[1,"dyn-m-0",2,"font-weight","600"],[1,"dyn-vertical-middle","dyn-icon-sm","dyn-m-r-5"],["mat-button","","disableRipple","",3,"click"],[1,"dyn-card","dyn-m-0","dyn-m-t-20","dyn-p-b-20"],["diameter","20","mode","indeterminate",1,"dyn-inline-block","dyn-vertical-middle"],[1,"dyn-m-0","dyn-m-t-10","dyn-m-b-100"],[3,"formGroup"],[4,"ngIf"],[1,"dyn-flex","dyn-m-t-30"],[1,"left-side-container","dyn-m-t-10","dyn-p-r-50"],[1,"dyn-m-b-0"],[1,"dyn-full-width"],[1,"dyn-card","dyn-m-0"],[1,"dyn-flex"],["federalDncField",""],["class","dyn-large-rounded-btn dyn-block dyn-m-b-20","style","display: block!important;",4,"ngIf"],["callerIdStrategyField",""],["width","100%","height","50px"],["width","80%","height","50px"],[1,"dyn-flex","dyn-space-between","campaign-type-container"],[1,"dyn-full-width","dyn-text-center","dyn-p-20","dyn-m-r-20","type",3,"click"],["alt","checkmark","class","check","src","/assets/img/green-checkmark.svg","height","30px",4,"ngIf"],["src","/assets/img/campaigns/power-campaign.svg","alt","Power Campaign",2,"height","80px"],[1,"title"],["matTooltip","\n                                              Power campaigns are designed to streamline outbound calls by dialing one\n                                              or many phone numbers when agents are available, reducing idle time,\n                                              and eliminating loss of time on misdials or unanswered calls.\n                                              Its agent-paced logic allows managers to manually control the Channels\n                                              Per Agent setting.",1,"dyn-button-help-icon",3,"matTooltipClass"],[1,"dyn-m-t-20"],[1,"dyn-m-r-5","dyn-badge-blue",2,"font-size",".6rem"],[1,"dyn-badge-blue",2,"font-size",".6rem"],["class","dyn-full-width dyn-text-center dyn-p-20 dyn-m-r-20 type",3,"active","click",4,"ngIf"],[1,"dyn-full-width","dyn-text-center","dyn-m-r-10","dyn-p-20","type",3,"click"],["src","/assets/img/campaigns/preview-campaign.svg","alt","Preview Campaign",2,"height","80px"],["matTooltip","\n                                        Preview campaigns provide agents with a preview of contact information before initiating a call, it allows agents to prepare for the conversation, gather\n                                        necessary information, and personalize their approach before making the call.\n\n                                        They provide a more targeted and customized experience for both agents and\n                                        customers.",1,"dyn-button-help-icon",3,"matTooltipClass"],["alt","checkmark","src","/assets/img/green-checkmark.svg","height","30px",1,"check"],["src","/assets/img/campaigns/predictive-campaign.svg","alt","Preview Campaign",2,"height","80px"],["matTooltip","\n                                       Predictive campaigns are designed to utilize algorithms and statistical models to\n                                        predict agent availability and the number of phone numbers to dial per available agent.\n                                        Its system-pace logic allows for the campaign to be more high volume-focused\n                                        and efficient.",1,"dyn-button-help-icon",3,"matTooltipClass"],["width","90%","height","50px"],["for","campaign_name"],[1,"dyn-error"],["type","text","id","campaign_name","formControlName","name",1,"dyn-full-width"],["class","dyn-error",4,"ngIf"],[1,"active-field"],["activeField",""],["id","campaign_active","type","checkbox","formControlName","active"],["for","campaign_active"],[1,"dyn-text-sm","dyn-text-muted","dyn-m-t-5","dyn-m-b-0"],["descriptionField",""],["for","desc"],["rows","5","id","desc","placeholder","Enter a description","formControlName","description",1,"dyn-full-width"],["width","60%","height","50px"],["class","dyn-text-sm dyn-m-b-20",4,"ngIf"],[1,"dyn-text-sm","dyn-m-0","dyn-m-b-5"],["formControlName","live_filter",1,"dyn-m-r-10",3,"change"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit Live Filter",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm","dyn-vertical-middle",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Create Live Filter",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm","dyn-vertical-middle",3,"click"],["class","dyn-text-sm dyn-text-muted dyn-m-l-10",4,"ngIf"],["class","dyn-m-t-20 dyn-error dyn-text-sm",4,"ngIf"],[1,"dyn-text-sm","dyn-text-muted","dyn-m-t-10","dyn-m-b-0"],[1,"dyn-text-sm","dyn-m-b-20"],[1,"dyn-text-sm","dyn-text-muted","dyn-m-l-10"],[1,"dyn-m-t-20","dyn-error","dyn-text-sm"],["formControlName","bucket"],["mat-icon-button","","color","primary","matTooltip","Edit Bucket",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm","dyn-vertical-middle",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Create Bucket",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm","dyn-vertical-middle",3,"click"],["formControlName","sales_funnel"],["callRecordingField",""],["for","agent_script"],["id","agent_script","formControlName","agent_script"],["mat-icon-button","","color","primary","matTooltip","View Script",1,"dyn-m-l-10","dyn-no-shadow","dyn-button-sm",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Create Script",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm",3,"click"],[1,"dyn-m-t-10","call-recording"],["id","call_recording","type","checkbox","formControlName","call_recording"],["for","call_recording"],[1,"dyn-text-sm","dyn-text-muted","dyn-m-t-5"],[1,"dyn-large-rounded-btn","dyn-block","dyn-m-b-20",2,"display","block!important"],["routerLink","/manager/fdnc-certification",1,"dyn-link","dyn-underline",3,"routerLink","queryParams"],[1,"suppress_federal_dnc"],["id","suppress_federal_dnc","type","checkbox","formControlName","suppress_federal_dnc","class","dyn-vertical-middle",3,"change",4,"ngIf"],["type","checkbox","formControlName","suppress_federal_dnc","class","dyn-vertical-middle",4,"ngIf"],["for","suppress_federal_dnc"],["id","suppress_federal_dnc","type","checkbox","formControlName","suppress_federal_dnc",1,"dyn-vertical-middle",3,"change"],["type","checkbox","formControlName","suppress_federal_dnc",1,"dyn-vertical-middle"],[1,"dyn-m-t-15"],[1,"dyn-m-r-10","dyn-m-t-15","dyn-vertical-middle"],[1,"dyn-vertical-middle"],["for","mobile"],["id","mobile","formControlName","mobile"],["value","Allow"],["value","Target"],["value","Suppress"],[1,"caller_id_strategy"],["for","caller_id_strategy"],["id","caller_id_strategy","formControlName","caller_id_strategy"],["mat-icon-button","","color","primary","matTooltip","View Caller Id Strategy",1,"dyn-m-l-10","dyn-no-shadow","dyn-button-sm",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Create Caller Id Strategy",1,"dyn-m-l-5","dyn-no-shadow","dyn-button-sm",3,"click"],["for","transfer_caller_id"],["id","transfer_caller_id","formControlName","transfer_caller_id"],["value","Callee"],["value","Standard"],[1,"dyn-m-t-10"],["id","restrict_transfers","type","checkbox","formControlName","restrict_transfers"],["for","restrict_transfers"],[1,"channels-per-agent"],["for","channels_per_agent"],["id","channels_per_agent","formControlName","channels_per_agent"],["for","max_abandon_rate"],[1,"dyn-flex","dyn-align-items"],[1,"slider-container-left"],["thumbLabel","","formControlName","max_abandon_rate","min","0.01","max","0.22","step","0.01",1,"dyn-full-width","dyn-m-r-20",3,"displayWith"],[1,"slider-container-right"],[1,"dyn-badge-blue"],[1,"dyn-m-t-30"],[3,"items","topLabel","bottomLabel","W","H","minAgents","maxAgents","minCpa","maxCpa","itemsChange","validityChange"],["src","assets/img/button-click.svg","alt","Preview Next Button",1,"dyn-m-r-20"],["id","preview_next_visible","type","checkbox","formControlName","preview_next_visible"],["for","preview_next_visible"],["src","assets/img/button-click.svg","alt","Dial Next Button",1,"dyn-m-r-20"],["id","dial_next_visible","type","checkbox","formControlName","dial_next_visible"],["for","dial_next_visible"],["src","assets/img/button-click.svg","alt","Async Dial Next Button",1,"dyn-m-r-20"],["id","async_dial_next_visible","type","checkbox","formControlName","async_dial_next_visible"],["for","async_dial_next_visible"],[1,"color-picker-square","dyn-vertical-middle","dyn-cursor-pointer",2,"width","150px",3,"ngStyle","matMenuTriggerFor"],["colorPicker","matMenu"],[3,"disableAlpha","color","click","onChangeComplete"],[1,"dyn-vertical-middle","dyn-hover",3,"matMenuTriggerFor"],["formControlName","hot_lead_bucket"],["for","max_dials_daily"],["type","number","id","max_dials_daily","formControlName","max_dials_daily","min","1","max","999999999",3,"ngClass"],["id","force_post_call","type","checkbox","formControlName","force_post_call"],["for","force_post_call"],["for","phone_number_field_preference"],["id","phone_number_field_preference","formControlName","phone_number_field_preference"],[4,"ngFor","ngForOf"],["for","voice_mail_action"],["id","voice_mail_action","formControlName","voice_mail_action"],["value","Hang Up"],["value","Agent Connect"],[1,"dyn-m-t-20","dyn-m-b-20"],["for","abandon_option"],["id","abandon_option","formControlName","abandon_option"],["value","Any Agent"],["for","ready_status"],[1,"dyn-text-muted","dyn-m-t-0"],["id","ready_status","formControlName","ready_status"],["for","on_call_status"],["id","on_call_status","formControlName","on_call_status"],["for","post_call_status"],["id","post_call_status","formControlName","post_call_status"],["formControlName","tendlc_campaign"],["formControlName","agent_connect_speed"],["value","Slow"],["value","Normal"],["value","Fast"],["id","originate_calls_all_numbers","type","checkbox","formControlName","originate_calls_all_numbers"],["for","originate_calls_all_numbers"],[3,"ngValue",4,"ngIf"],["for","ring_time"],["id","ring_time","type","number","min","60","max","90","formControlName","ring_time",1,"dyn-input-sm"],[1,"dyn-text-sm","dyn-p-l-5"],["id","amd_active","type","checkbox","formControlName","amd_active"],["for","amd_active"],["for","amd_settings"],["id","amd_settings","formControlName","amd_settings"],["mat-icon-button","","color","primary","matTooltip","View AMD Setting",1,"dyn-m-l-10","dyn-vertical-middle","dyn-no-shadow","dyn-button-sm",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Create AMD Setting",1,"dyn-m-l-5","dyn-vertical-middle","dyn-no-shadow","dyn-button-sm",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete AMD Setting",1,"dyn-m-l-5","dyn-vertical-middle","dyn-no-shadow","dyn-button-sm",3,"disabled","click"]],template:function(e,t){1&e&&(p.bd(0,Hn,9,2,"div",0),p.ic(1,"div",1),p.ic(2,"h3",2),p.dd(3),p.vc(4,"slice"),p.hc(),p.ic(5,"div"),p.ic(6,"button",3),p.ic(7,"mat-icon"),p.dd(8,"arrow_back"),p.hc(),p.dd(9," Back to Campaigns "),p.hc(),p.ic(10,"div",4),p.ic(11,"button",5),p.dd(12,"Settings"),p.hc(),p.ic(13,"button",6),p.dd(14,"Members"),p.hc(),p.bd(15,Wn,2,4,"button",7),p.ic(16,"button",6),p.dd(17,"Call Dispositions"),p.hc(),p.ic(18,"button",6),p.dd(19," Agent Dashboard Settings "),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(20,"hr"),p.bd(21,Un,3,0,"div",8),p.bd(22,uc,54,16,"div",9),p.ic(23,"div",10),p.ic(24,"span",11),p.ic(25,"button",12),p.qc("click",(function(){return t.onSubmit()})),p.dd(26,"Save"),p.hc(),p.hc(),p.hc()),2&e&&(p.Bc("ngIf",t.campaignWarningMessage),p.Pb(3),p.gd(" ",t.title," ",t.campaign?"("+(t.campaign.name.length>20?p.yc(4,14,t.campaign.name,0,20)+"\u2026":t.campaign.name)+")":""," "),p.Pb(10),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(18,mc,t.campaignId)),p.Pb(2),p.Bc("ngIf",t.accountFeatureService.accountFeaturesSubject.value&&t.accountFeatureService.accountFeaturesSubject.value.connectors),p.Pb(1),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(20,gc,t.campaignId)),p.Pb(2),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(22,pc,t.campaignId)),p.Pb(3),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.loading&&t.campaignForm),p.Pb(2),p.Bc("matTooltipDisabled",t.permissionService.hasPermission("campaigns_write")),p.Pb(1),p.Bc("disabled",!t.permissionService.hasPermission("campaigns_write")||!t.campaignForm))},directives:[M.p,F.b,c.h,R.a,D.a,G.a,S.B,S.q,S.i,Fn,S.d,S.p,S.h,S.a,S.y,S.t,S.A,M.o,In.a,$n,qn.a,qn.c,qn.e,qn.f,M.q,Q.e,Q.f,Vn.a,S.u,M.n],pipes:[M.x,M.g],styles:[".filter-options-container[_ngcontent-%COMP%]{display:grid;width:100%;grid-gap:10px 20px;align-items:center;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.filter-options-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-options-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%!important;max-width:100%}.mat-header-row[_ngcontent-%COMP%]{height:30px!important}tr.mat-header-row[_ngcontent-%COMP%]{height:40px}.top-header[_ngcontent-%COMP%]{text-align:center!important;border-right:1px solid #e2e2e2;padding-right:1px;box-sizing:border-box}.top-header[_ngcontent-%COMP%]:last-child{border-right:none}.top-header.dyn-bg-grey[_ngcontent-%COMP%]{background:#eff3f6;color:#191919}.dyn-p-l-10[_ngcontent-%COMP%]{padding-left:10px!important}td[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{text-align:center!important}.dyn-text-left[_ngcontent-%COMP%], th.mat-header-cell.dyn-text-left[_ngcontent-%COMP%]{text-align:left!important}.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap}.mat-table[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{background:#fff4f4}.mat-table[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:18px!important;width:18px!important;height:18px!important;color:#c72121}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #ddd;position:relative;cursor:pointer}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;background:#4ad8c4;border-radius:100px;top:-10px;right:-10px}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px}.campaign-type-container[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#2a79ff;color:#fff;border-radius:5px;padding:3px 10px;box-sizing:border-box;font-size:.7rem;white-space:nowrap}.campaign-type-container[_ngcontent-%COMP%]   .type.active[_ngcontent-%COMP%]{border-color:#4ec9b7}.speed-slot[_ngcontent-%COMP%]{box-sizing:border-box;background-color:#fff;border:1px solid #d4d4d4;border-radius:5px;padding:12px 16px;box-shadow:0 0 7px 0 rgba(0,0,0,.1);margin-bottom:10px;width:100%}.slider-container-left[_ngcontent-%COMP%], .slider-container-right[_ngcontent-%COMP%]{width:50%}.left-side-container[_ngcontent-%COMP%]{width:70%}.slot-number[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:100px;background:#eff6ff;color:#1d73d8;line-height:30px;text-align:center;margin-right:20px;border:1px solid #e5e7eb}@media (max-width:1600px){.left-side-container[_ngcontent-%COMP%]{width:40%}.left-side-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}"],data:{animation:[Object(m.o)("slideInOut",[Object(m.n)(":enter",[Object(m.m)({height:0,opacity:0,overflow:"hidden"}),Object(m.e)("200ms ease-out",Object(m.m)({height:"*",opacity:1,overflow:"hidden"}))]),Object(m.n)(":leave",[Object(m.m)({height:"*",opacity:1,overflow:"hidden"}),Object(m.e)("200ms ease-in",Object(m.m)({height:0,opacity:0,overflow:"hidden"}))])])]}}),e})();var _c=n("5+WD");const fc=["leftBox"];function vc(e,t){if(1&e){const e=p.kc();p.ic(0,"div",27),p.ic(1,"div",0),p.ic(2,"p",28),p.dd(3),p.hc(),p.ic(4,"div"),p.ic(5,"button",29),p.qc("click",(function(){p.Qc(e);const t=p.uc().$implicit;return p.uc(2).addLiveFilter(t.id)})),p.ic(6,"mat-icon"),p.dd(7,"add_circle"),p.hc(),p.hc(),p.ic(8,"button",30),p.qc("click",(function(){p.Qc(e);const t=p.uc().$implicit;return p.uc(2).showEditLiveFilterDialog(t)})),p.ic(9,"mat-icon"),p.dd(10,"edit"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc().$implicit;p.Bc("cdkDragData",e),p.Pb(3),p.ed(e.name)}}function yc(e,t){if(1&e&&(p.gc(0),p.bd(1,vc,11,2,"div",25),p.fc()),2&e){const e=t.$implicit,n=p.uc(2);p.Pb(1),p.Bc("ngIf",n.campaign&&n.campaign.live_filter!==e.id)}}function Cc(e,t){if(1&e&&(p.gc(0),p.bd(1,yc,2,1,"ng-container",26),p.fc()),2&e){const e=p.uc();p.Pb(1),p.Bc("ngForOf",e.liveFilters)}}function xc(e,t){1&e&&(p.ic(0,"div",31),p.ic(1,"p"),p.dd(2,"No Live Filter Selected"),p.hc(),p.hc())}function wc(e,t){if(1&e){const e=p.kc();p.ic(0,"div",27),p.ic(1,"div",0),p.ic(2,"div",32),p.dd(3),p.hc(),p.ic(4,"div"),p.ic(5,"button",33),p.qc("click",(function(){return p.Qc(e),p.uc().removeLiveFilter()})),p.ic(6,"mat-icon"),p.dd(7,"delete"),p.hc(),p.hc(),p.ic(8,"button",30),p.qc("click",(function(){p.Qc(e);const t=p.uc();return t.showEditLiveFilterDialog(t.liveFilterMap[t.campaign.live_filter])})),p.ic(9,"mat-icon"),p.dd(10,"edit"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc();p.Bc("cdkDragData",e.campaign.live_filter),p.Pb(3),p.fd(" ",e.liveFilterMap[e.campaign.live_filter].name," ")}}const Pc=function(e){return["/manager/campaigns/edit/",e]},kc=function(e){return["/manager/campaigns/members/",e]},Sc=function(e){return["/manager/campaigns/connectors/",e]},Bc=function(e){return[e]},Dc=function(e){return{"dyn-float-top":e}};let Mc=(()=>{class e{constructor(e,t,n,i,c){this.dialog=e,this.campaignService=t,this.liveFilterService=n,this.snackBar=i,this.route=c,this.scrollDetected=!1,this.liveFilters=[],this.liveFilterMap=[]}onWindowScroll(){var e,t;if(!(null===(e=this.leftBox)||void 0===e?void 0:e.nativeElement))return;const n=null===(t=this.leftBox.nativeElement)||void 0===t?void 0:t.getBoundingClientRect();this.scrollDetected=n.y<20}ngOnInit(){this.route.params.subscribe({next:e=>{this.campaignId=parseInt(e.id)}}),this._getActiveLiveFilters(),this.campaignId&&this._getCampaign()}addLiveFilter(e){this.campaignService.update(this.campaignId,{live_filter:e}).subscribe({next:e=>{this.campaign=e,this.snackBar.open("Live Filter Added","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})}})}drop(e,t){e.previousContainer===e.container?"availableLiveFilters"===t&&Object(_c.h)(e.container.data,e.previousIndex,e.currentIndex):"selectedLiveFilter"===t?this.addLiveFilter(e.item.data.id):"availableLiveFilters"===t&&this.removeLiveFilter()}removeLiveFilter(){this.campaignService.update(this.campaignId,{live_filter:null}).subscribe({next:e=>{this.campaign=e,this.snackBar.open("Live Filter Removed","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})}})}showEditLiveFilterDialog(e){this.dialog.open(xn.a,{width:"1200px",data:e}).afterClosed().subscribe({next:e=>{if(e){const t=this.liveFilters.findIndex(t=>t.id==e.id);this.liveFilters[t]=e,this.liveFilterMap[e.id]=e}}})}showCreateLiveFilterDialog(){this.dialog.open(xn.a,{width:"1200px",data:null}).afterClosed().subscribe({next:e=>{e&&(this.liveFilters.push(e),this.liveFilterMap[e.id]=e.name)}})}_getActiveLiveFilters(){this.liveFilterService.getActiveLiveFilters().subscribe({next:e=>{this.liveFilters=e.results,e.results.forEach(e=>{this.liveFilterMap[e.id]=e})}})}_getCampaign(){this.campaignService.get(this.campaignId).subscribe({next:e=>{this.campaign=e}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(f.b),p.bc(a.a),p.bc(x.a),p.bc(B.a),p.bc(c.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&p.Wc(fc,!0),2&e&&p.Lc(n=p.rc())&&(t.leftBox=n.first)},hostBindings:function(e,t){1&e&&p.qc("scroll",(function(e){return t.onWindowScroll(e)}),!1,p.Pc)},decls:48,vars:23,consts:[[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],[1,"dyn-text-sm","dyn-text-muted"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","",3,"routerLink"],["mat-button","","color","primary"],[1,"dyn-m-0"],[1,"dyn-full-width","dyn-m-r-20"],[1,"dyn-card","dyn-m-l-0"],["leftBox",""],[1,"dyn-m-b-10","dyn-flex","dyn-space-between"],[1,"dyn-m-t-10"],["mat-raised-button","","color","primary",3,"click"],[1,"dyn-m-b-20"],[2,"background","#eff3f6","border-radius","100px","padding","5px 20px"],[2,"background","#50c9b7","display","inline-block","width","10px","height","10px","border-radius","100px","margin-right","5px"],["cdkDropList","",1,"dyn-drag-drop-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["availableFieldsList","cdkDropList"],[4,"ngIf"],[1,"dyn-full-width"],[1,"dyn-card","dyn-m-r-0",3,"ngClass"],["cdkDropList","",1,"dyn-drag-drop-list",3,"cdkDropListConnectedTo","cdkDropListDropped"],["enabledFieldsList","cdkDropList"],["class","dyn-text-center dyn-p-20 dyn-p-20 dyn-p-t-20 dyn-p-b-20",4,"ngIf"],["class","dyn-drag-drop-box dyn-cursor-drag","cdkDrag","",3,"cdkDragData",4,"ngIf"],[4,"ngFor","ngForOf"],["cdkDrag","",1,"dyn-drag-drop-box","dyn-cursor-drag",3,"cdkDragData"],[1,"dyn-m-0","dyn-m-t-10"],["mat-mini-fab","","color","","matTooltip","Select Live Filter",1,"dyn-no-shadow",3,"click"],["mat-mini-fab","","color","","matTooltip","Edit Live Filter",1,"dyn-no-shadow",3,"click"],[1,"dyn-text-center","dyn-p-20","dyn-p-20","dyn-p-t-20","dyn-p-b-20"],[1,"dyn-p-t-10"],["mat-mini-fab","","color","","matTooltip","Remove from list",1,"dyn-no-shadow",3,"click"]],template:function(e,t){if(1&e&&(p.ic(0,"div",0),p.ic(1,"h3",1),p.dd(2," Edit Campaign "),p.ic(3,"span",2),p.dd(4),p.hc(),p.hc(),p.ic(5,"div"),p.ic(6,"button",3),p.ic(7,"mat-icon"),p.dd(8,"arrow_back"),p.hc(),p.dd(9," Back to Campaigns "),p.hc(),p.ic(10,"div",4),p.ic(11,"button",5),p.dd(12,"Settings"),p.hc(),p.ic(13,"button",6),p.dd(14,"Live Filters"),p.hc(),p.ic(15,"button",5),p.dd(16,"Members"),p.hc(),p.ic(17,"button",5),p.dd(18,"Connectors"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(19,"hr"),p.ic(20,"div",7),p.ic(21,"div",0),p.ic(22,"div",8),p.ic(23,"div",9,10),p.ic(25,"div",11),p.ic(26,"div",12),p.dd(27,"Available Live Filters"),p.hc(),p.ic(28,"div"),p.ic(29,"button",13),p.qc("click",(function(){return t.showCreateLiveFilterDialog()})),p.dd(30," Create Live Filter "),p.hc(),p.hc(),p.hc(),p.dc(31,"hr"),p.ic(32,"div",14),p.ic(33,"span",15),p.dc(34,"span",16),p.dd(35," Active Live Filters "),p.hc(),p.hc(),p.ic(36,"div",17,18),p.qc("cdkDropListDropped",(function(e){return t.drop(e,"availableLiveFilters")})),p.bd(38,Cc,2,1,"ng-container",19),p.hc(),p.hc(),p.hc(),p.ic(39,"div",20),p.ic(40,"div",21),p.ic(41,"div"),p.dd(42,"Selected Live Filter"),p.hc(),p.dc(43,"hr"),p.ic(44,"div",22,23),p.qc("cdkDropListDropped",(function(e){return t.drop(e,"selectedLiveFilter")})),p.bd(46,xc,3,0,"div",24),p.bd(47,wc,11,2,"div",25),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()),2&e){const e=p.Mc(37),n=p.Mc(45);p.Pb(4),p.fd(" (Campaign: ",t.campaignId,") "),p.Pb(7),p.Bc("routerLink",p.Gc(11,Pc,t.campaignId)),p.Pb(4),p.Bc("routerLink",p.Gc(13,kc,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(15,Sc,t.campaignId)),p.Pb(19),p.Bc("cdkDropListData",t.liveFilters)("cdkDropListConnectedTo",p.Gc(17,Bc,n)),p.Pb(2),p.Bc("ngIf",t.liveFilters.length),p.Pb(2),p.Bc("ngClass",p.Gc(19,Dc,t.scrollDetected)),p.Pb(4),p.Bc("cdkDropListConnectedTo",p.Gc(21,Bc,e)),p.Pb(2),p.Bc("ngIf",t.campaign&&!t.campaign.live_filter),p.Pb(1),p.Bc("ngIf",t.campaign&&t.campaign.live_filter)}},directives:[F.b,c.h,R.a,_c.e,M.p,M.n,M.o,_c.a,D.a],encapsulation:2}),e})();var Fc=n("cp0P"),Ic=n("+2sm"),Ac=n("dUJa");const Tc=["leftBox"],Oc=["campaignMembersList"],Lc=function(e){return["/manager/campaigns/connectors/",e]};function Nc(e,t){if(1&e&&(p.ic(0,"button",4),p.dd(1,"Connectors"),p.hc()),2&e){const e=p.uc();p.Bc("routerLink",p.Gc(1,Lc,e.campaignId))}}function $c(e,t){1&e&&(p.ic(0,"div"),p.dc(1,"mat-progress-spinner",11),p.dd(2," Loading...\n"),p.hc())}function qc(e,t){1&e&&(p.ic(0,"p",33),p.dd(1,"No Agents to Show"),p.hc())}const Vc=function(e){return{item:e,type:"pbxAgent"}};function Rc(e,t){if(1&e){const e=p.kc();p.gc(0,34),p.ic(1,"div",35),p.ic(2,"div",0),p.ic(3,"div",36),p.ic(4,"span",37),p.dd(5,"Agent"),p.hc(),p.ic(6,"p",38),p.dd(7),p.hc(),p.hc(),p.ic(8,"div"),p.ic(9,"button",39),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc(2).createCampaignMember(n,"pbxAgent")})),p.ic(10,"mat-icon"),p.dd(11,"add_circle"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=t.$implicit,n=p.uc(2);p.Pb(1),p.Bc("matTooltipDisabled",n.permissionService.hasPermission("campaigns_write"))("cdkDragData",p.Gc(5,Vc,e))("cdkDragDisabled",!n.permissionService.hasPermission("campaigns_write")),p.Pb(6),p.ed(e.full_name),p.Pb(2),p.Bc("disabled",!n.permissionService.hasPermission("campaigns_write")||n.addingMember===e.app_user)}}function Ec(e,t){1&e&&(p.ic(0,"p",33),p.dd(1,"No Teams to Show"),p.hc())}function zc(e,t){if(1&e&&(p.ic(0,"div"),p.bd(1,Ec,2,0,"p",25),p.hc()),2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngIf",!(null!=e.availableTeams&&e.availableTeams.length))}}const Qc=function(e){return{item:e,type:"team"}};function Gc(e,t){if(1&e){const e=p.kc();p.gc(0,34),p.ic(1,"div",35),p.ic(2,"div",0),p.ic(3,"div",36),p.ic(4,"span",40),p.dd(5,"Team"),p.hc(),p.ic(6,"p",38),p.dd(7),p.hc(),p.hc(),p.ic(8,"div"),p.ic(9,"button",39),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc(2).createCampaignMember(n,"team")})),p.ic(10,"mat-icon"),p.dd(11,"add_circle"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=t.$implicit,n=p.uc(2);p.Pb(1),p.Bc("matTooltipDisabled",n.permissionService.hasPermission("campaigns_write"))("cdkDragData",p.Gc(5,Qc,e))("cdkDragDisabled",!n.permissionService.hasPermission("campaigns_write")),p.Pb(6),p.ed(e.name),p.Pb(2),p.Bc("disabled",!n.permissionService.hasPermission("campaigns_write")||n.addingMember===e.id)}}function jc(e,t){1&e&&(p.ic(0,"div",44),p.ic(1,"p"),p.dd(2,"No Current Members"),p.hc(),p.hc())}function Hc(e,t){1&e&&(p.ic(0,"span",40),p.dd(1,"Team"),p.hc())}function Xc(e,t){1&e&&(p.ic(0,"span",37),p.dd(1,"Agent"),p.hc())}function Wc(e,t){if(1&e){const e=p.kc();p.ic(0,"div",46),p.ic(1,"div",0),p.ic(2,"div",34),p.bd(3,Hc,2,0,"span",47),p.bd(4,Xc,2,0,"span",48),p.ic(5,"p",49),p.dd(6),p.hc(),p.hc(),p.ic(7,"div",50),p.dd(8," Priority "),p.ic(9,"mat-icon",51),p.dd(10,"help"),p.hc(),p.ic(11,"input",52),p.qc("ngModelChange",(function(n){return p.Qc(e),t.$implicit.priority=n}))("change",(function(){p.Qc(e);const n=t.$implicit;return p.uc(4).updateMemberPriorityValue(n.id,n.priority)})),p.hc(),p.hc(),p.ic(12,"div"),p.ic(13,"button",53),p.qc("click",(function(){p.Qc(e);const n=t.$implicit;return p.uc(4).deleteCampaignMember(n)})),p.ic(14,"mat-icon"),p.dd(15,"delete"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=p.uc(4);p.Bc("matTooltipDisabled",n.permissionService.hasPermission("campaigns_write")),p.Pb(3),p.Bc("ngIf",e.team),p.Pb(1),p.Bc("ngIf",e.app_user),p.Pb(2),p.ed(n.getMemberName(e)),p.Pb(5),p.Bc("ngModel",e.priority),p.Pb(2),p.Bc("disabled",!n.permissionService.hasPermission("campaigns_write")||n.deletingMember===e.id)}}function Uc(e,t){if(1&e&&(p.ic(0,"div"),p.bd(1,Wc,16,6,"div",45),p.hc()),2&e){const e=p.uc(3);p.Pb(1),p.Bc("ngForOf",e.availableCampaignMembers)}}const Yc=function(e){return{"dyn-drag-drop-list":e}};function Zc(e,t){if(1&e){const e=p.kc();p.ic(0,"div",34),p.ic(1,"div",41,42),p.qc("cdkDropListDropped",(function(t){return p.Qc(e),p.uc(2).drop(t)})),p.bd(3,jc,3,0,"div",43),p.bd(4,Uc,2,1,"div",9),p.hc(),p.hc()}if(2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngClass",p.Gc(4,Yc,e.campaignMembers.length))("cdkDropListData",e.campaignMembers),p.Pb(2),p.Bc("ngIf",!(null!=e.availableCampaignMembers&&e.availableCampaignMembers.length)),p.Pb(1),p.Bc("ngIf",e.campaignMembers.length)}}const Jc=function(e){return[e]},Kc=function(e){return{"dyn-float-top":e}};function ea(e,t){if(1&e){const e=p.kc();p.ic(0,"div",0),p.ic(1,"div",12),p.ic(2,"div",13,14),p.ic(4,"div",15),p.ic(5,"div",16),p.dd(6,"Potential Members"),p.hc(),p.ic(7,"div"),p.ic(8,"div",17),p.ic(9,"div",18),p.ic(10,"mat-icon"),p.dd(11,"search"),p.hc(),p.hc(),p.ic(12,"input",19),p.qc("ngModelChange",(function(t){return p.Qc(e),p.uc().potentialMemberSearchInput=t})),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(13,"hr",20),p.ic(14,"mat-tab-group",21),p.qc("selectedIndexChange",(function(t){return p.Qc(e),p.uc().onTabChanged(t)})),p.ic(15,"mat-tab",22),p.ic(16,"div",23,24),p.bd(18,qc,2,0,"p",25),p.bd(19,Rc,12,7,"ng-container",26),p.hc(),p.hc(),p.ic(20,"mat-tab",27),p.ic(21,"div",23,28),p.bd(23,zc,2,1,"div",9),p.bd(24,Gc,12,7,"ng-container",26),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.ic(25,"div",29),p.ic(26,"div",30),p.ic(27,"div",15),p.ic(28,"div",16),p.dd(29,"Current Members"),p.hc(),p.ic(30,"div"),p.ic(31,"div",17),p.ic(32,"div",18),p.ic(33,"mat-icon"),p.dd(34,"search"),p.hc(),p.hc(),p.ic(35,"input",31),p.qc("ngModelChange",(function(t){return p.Qc(e),p.uc().currentMemberSearchInput=t})),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(36,"hr",20),p.bd(37,Zc,5,6,"div",32),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc();p.Pb(12),p.Bc("placeholder","agents"===e.activeTab?"Search Agents":"Search Teams")("ngModel",e.potentialMemberSearchInput),p.Pb(4),p.Bc("cdkDropListData",e.pbxAgents)("cdkDropListConnectedTo",p.Gc(13,Jc,e.campaignMembersList)),p.Pb(2),p.Bc("ngIf",!(null!=e.availableAgents&&e.availableAgents.length)),p.Pb(1),p.Bc("ngForOf",e.availableAgents),p.Pb(2),p.Bc("cdkDropListData",e.teams)("cdkDropListConnectedTo",p.Gc(15,Jc,e.campaignMembersList)),p.Pb(2),p.Bc("ngIf",e.teams),p.Pb(1),p.Bc("ngForOf",e.availableTeams),p.Pb(2),p.Bc("ngClass",p.Gc(17,Kc,e.scrollDetected)),p.Pb(9),p.Bc("ngModel",e.currentMemberSearchInput),p.Pb(2),p.Bc("ngIf",e.pbxAgents&&e.allTeams)}}const ta=function(e){return["/manager/campaigns/edit/",e]},na=function(e){return["/manager/campaigns/call-dispositions",e]},ia=function(e){return["/manager/campaigns/agent-dashboard-settings",e]};let ca=(()=>{class e{constructor(e,t,n,i,c,a,o,s,r,d){this.accountFeatureService=e,this.permissionService=t,this._campaignService=n,this._userService=i,this._teamService=c,this._campaignMemberService=a,this._snackBar=o,this._route=s,this._utils=r,this._changeDetectorRef=d,this.scrollDetected=!1,this.allPbxAgents=[],this.pbxAgents=[],this.teams=[],this.allTeams=[],this.campaignMembers=[],this.potentialMemberSearchInput="",this.currentMemberSearchInput="",this.activeTab="agents",this.deletingMember=null,this.addingMember=null}onWindowScroll(){var e;if(!(null===(e=this.leftBox)||void 0===e?void 0:e.nativeElement))return;const t=this.leftBox.nativeElement.getBoundingClientRect();this.scrollDetected=t.y<20}ngAfterContentChecked(){this._changeDetectorRef.detectChanges()}ngOnInit(){this._route.params.subscribe({next:e=>{this.campaignId=parseInt(e.id),this._campaignService.get(this.campaignId).subscribe({next:e=>{this.campaign=e}})}}),this._getData()}get availableAgents(){const e="agents"===this.activeTab?this.potentialMemberSearchInput.toLowerCase():"";return this.pbxAgents.filter(t=>!this.campaignMembers.some(e=>e.app_user===t.app_user)&&t.full_name.toLowerCase().includes(e))}get availableTeams(){const e="teams"===this.activeTab?this.potentialMemberSearchInput.toLowerCase():"";return this.teams.filter(t=>!this.campaignMembers.some(e=>e.team===t.id)&&t.name.toLowerCase().includes(e))}get availableCampaignMembers(){const e=this.currentMemberSearchInput.toLowerCase();return this.campaignMembers.filter(t=>this.getMemberName(t).toLowerCase().includes(e))}onTabChanged(e){this.activeTab=0===e?"agents":"teams",this.potentialMemberSearchInput=""}createCampaignMember(e,t){this.permissionService.hasPermission("campaigns_write")&&null===this.addingMember&&(this.addingMember="pbxAgent"===t?e.app_user:e.id,this._campaignMemberService.create({campaign:this.campaignId,priority:0,app_user:"pbxAgent"===t?e.app_user:null,team:"team"===t?e.id:null}).subscribe({next:e=>{this.campaignMembers.unshift(e),this._snackBar.open("Campaign Member Added","X",{duration:2e3,verticalPosition:"top",panelClass:["success"]}),this.addingMember=null,this.currentMemberSearchInput=""},error:e=>{Object.keys(e.error).forEach(t=>{"object"==typeof e.error&&this._snackBar.open(e.error[t],"X",{duration:2500,verticalPosition:"top",panelClass:["error"]})}),this.addingMember=null}}))}deleteCampaignMember(e){if(null===this.deletingMember){if(this.deletingMember=e.id,!this.permissionService.hasPermission("campaigns_write"))return this._snackBar.open("You need the campaigns_write permission to modify campaign members","X",{duration:5e3,verticalPosition:"top",panelClass:["error"]}),void(this.deletingMember=null);this._campaignMemberService.delete(e.id).subscribe({next:()=>{this.campaignMembers=this.campaignMembers.filter(t=>t.id!==e.id),this._snackBar.open("Campaign Member Removed","X",{duration:2e3,verticalPosition:"top",panelClass:["success"]}),this.deletingMember=null,this.potentialMemberSearchInput=""},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error creating campaign member"),"X",{duration:3e3,verticalPosition:"top",panelClass:["error"]}),this.deletingMember=null}})}}drop(e){if(e.previousContainer===e.container)Object(_c.h)(e.container.data,e.previousIndex,e.currentIndex);else{const t=e.item.data;this.createCampaignMember(t.item,t.type)}}getMemberName(e){if(null!==e.app_user&&this.pbxAgents.length){const t=this.allPbxAgents.find(t=>t.app_user===e.app_user);return t?t.full_name:""}if(null!==e.team&&this.allTeams.length)return this.allTeams.find(t=>t.id===e.team).name}updateMemberPriorityValue(e,t){null!==t&&(t<0||t>100?this._snackBar.open("Value must be between 0-100","X",{duration:2500,verticalPosition:"top",panelClass:["error"]}):this._campaignMemberService.update(e,{priority:t}).subscribe({next:()=>{this._snackBar.open("Priority Level Updated Successfully","X",{duration:2500,verticalPosition:"top",panelClass:["success"]})}}))}_getCampaignMembers(){this._campaignMemberService.getByCampaignId(this.campaignId).subscribe({next:e=>{this.campaignMembers=e.results,this.loading=!1}})}_getData(){this.loading=!0;const e=this._userService.listMinimizedUsers(),t=this._teamService.listMinimal();Object(Fc.a)([e,t]).subscribe({next:e=>{const t=e[0].filter(e=>e.is_agent),n=this._utils.sortBy(t,"full_name");this.allPbxAgents=n,this.pbxAgents=n.filter(e=>e.dropdown_menus);const i=this._utils.sortBy(e[1],"name");this.allTeams=i,this.teams=i.filter(e=>e.dropdown_menus),this._getCampaignMembers()},error:()=>{this.loading=!1,this._snackBar.open("Unexpected Error","X",{duration:2500,verticalPosition:"top",panelClass:["error"]})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(h.a),p.bc(l.a),p.bc(a.a),p.bc(fn.a),p.bc(Ic.a),p.bc(Ac.a),p.bc(B.a),p.bc(c.a),p.bc(r.a),p.bc(p.i))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&(p.jd(Tc,!0),p.jd(Oc,!0)),2&e&&(p.Lc(n=p.rc())&&(t.leftBox=n.first),p.Lc(n=p.rc())&&(t.campaignMembersList=n.first))},hostBindings:function(e,t){1&e&&p.qc("scroll",(function(e){return t.onWindowScroll(e)}),!1,p.Pc)},decls:21,vars:15,consts:[[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","",3,"routerLink"],["mat-button","","color","primary"],["mat-button","","color","",3,"routerLink",4,"ngIf"],["mat-button","","color","",3,"disabled","routerLink"],[1,"dyn-m-t-10","dyn-m-b-10"],[4,"ngIf"],["class","dyn-flex dyn-space-between",4,"ngIf"],["diameter","20","mode","indeterminate",1,"dyn-inline-block","dyn-vertical-middle"],[1,"dyn-full-width","dyn-m-r-20"],[1,"dyn-card","dyn-m-0"],["leftBox",""],[1,"dyn-flex","dyn-space-between","dyn-align-items"],[1,"dyn-m-b-10","dyn-m-t-10"],[1,"dyn-search-bar"],[1,"left"],["type","search",3,"placeholder","ngModel","ngModelChange"],[1,"dyn-m-b-0","dyn-m-t-10"],[3,"selectedIndexChange"],["label","Agents"],["cdkDropList","",1,"dyn-drag-drop-list",3,"cdkDropListData","cdkDropListConnectedTo"],["availablePbxAgentsList","cdkDropList"],["class","dyn-text-center",4,"ngIf"],["class","dyn-m-t-10",4,"ngFor","ngForOf"],["label","Teams"],["availableTeamsList","cdkDropList"],[1,"dyn-full-width"],[1,"dyn-m-0","dyn-card",3,"ngClass"],["type","search","placeholder","Search Members",3,"ngModel","ngModelChange"],["class","dyn-m-t-10",4,"ngIf"],[1,"dyn-text-center"],[1,"dyn-m-t-10"],["matTooltip","You need the campaigns_write permission to modify campaign members","cdkDrag","",1,"dyn-drag-drop-box",3,"matTooltipDisabled","cdkDragData","cdkDragDisabled"],[1,"dyn-p-t-10"],[1,"dyn-agent-badge"],[1,"dyn-m-0","dyn-m-l-10","dyn-inline-block"],["mat-mini-fab","","color","","matTooltip","Add to Current Members",1,"dyn-no-shadow",3,"disabled","click"],[1,"dyn-team-badge"],["cdkDropList","",3,"ngClass","cdkDropListData","cdkDropListDropped"],["campaignMembersList","cdkDropList"],["class","dyn-text-center dyn-p-20 dyn-p-t-20 dyn-p-b-20 dyn-dashed-border",4,"ngIf"],[1,"dyn-text-center","dyn-p-20","dyn-p-t-20","dyn-p-b-20","dyn-dashed-border"],["matTooltip","You need the 'campaigns_write' permission to modify campaign members","class","dyn-drag-drop-box",3,"matTooltipDisabled",4,"ngFor","ngForOf"],["matTooltip","You need the 'campaigns_write' permission to modify campaign members",1,"dyn-drag-drop-box",3,"matTooltipDisabled"],["class","dyn-team-badge",4,"ngIf"],["class","dyn-agent-badge",4,"ngIf"],[1,"dyn-m-0","dyn-inline-block","dyn-m-l-10"],[1,"dyn-m-t-5"],["matTooltip","The higher the priority,\n                                              the more calls an agent will get.\n                                              We will select waiting agents by priority\n                                              first than by wait time.",1,"dyn-button-help-icon"],["type","number","min","0","max","100",1,"dyn-input-sm",3,"ngModel","ngModelChange","change"],["mat-mini-fab","","color","","matTooltip","Remove from Current Members",1,"dyn-no-shadow",3,"disabled","click"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.ic(1,"h3",1),p.dd(2),p.hc(),p.ic(3,"div"),p.ic(4,"button",2),p.ic(5,"mat-icon"),p.dd(6,"arrow_back"),p.hc(),p.dd(7," Back to Campaigns "),p.hc(),p.ic(8,"div",3),p.ic(9,"button",4),p.dd(10,"Settings"),p.hc(),p.ic(11,"button",5),p.dd(12,"Members"),p.hc(),p.bd(13,Nc,2,3,"button",6),p.ic(14,"button",7),p.dd(15,"Call Dispositions"),p.hc(),p.ic(16,"button",7),p.dd(17,"Agent Dashboard Settings"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(18,"hr",8),p.bd(19,$c,3,0,"div",9),p.bd(20,ea,38,19,"div",10)),2&e&&(p.Pb(2),p.fd(" Edit Campaign (",t.campaign?t.campaign.name:"",") "),p.Pb(7),p.Bc("routerLink",p.Gc(9,ta,t.campaignId)),p.Pb(4),p.Bc("ngIf",t.accountFeatureService.accountFeaturesSubject.value&&t.accountFeatureService.accountFeaturesSubject.value.connectors),p.Pb(1),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(11,na,t.campaignId)),p.Pb(2),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(13,ia,t.campaignId)),p.Pb(3),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.loading))},directives:[F.b,c.h,R.a,M.p,G.a,S.d,S.p,S.s,vn.b,vn.a,_c.e,M.o,M.n,D.a,_c.a,S.u],encapsulation:2}),e})();var aa=n("SNGp"),oa=n("l4kS"),sa=n("Kj3r"),ra=n("/uUt");function da(e,t){1&e&&(p.ic(0,"div"),p.dd(1,"Loading..."),p.hc())}function la(e,t){1&e&&(p.ic(0,"mat-icon"),p.dd(1,"search"),p.hc())}function ha(e,t){1&e&&p.dc(0,"mat-progress-spinner",29)}function ua(e,t){1&e&&(p.ic(0,"p"),p.dd(1,"No Connectors to Show"),p.hc())}const ma=function(e,t){return{background:e,color:t}};function ga(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",30),p.ic(2,"div",0),p.ic(3,"div"),p.ic(4,"button",31),p.dd(5),p.hc(),p.ic(6,"p",32),p.dd(7),p.hc(),p.hc(),p.ic(8,"div"),p.ic(9,"button",33),p.qc("click",(function(){p.Qc(e);const t=p.uc().$implicit;return p.uc(2).addConnector(t)})),p.ic(10,"mat-icon"),p.dd(11,"add_circle"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc().$implicit;p.Pb(1),p.Bc("cdkDragData",e),p.Pb(3),p.Bc("ngStyle",p.Hc(4,ma,e.button_color,e.text_color)),p.Pb(1),p.fd(" ",e.button_text," "),p.Pb(2),p.fd(" Connector Name: ",e.name," ")}}function pa(e,t){if(1&e&&(p.gc(0,25),p.bd(1,ga,12,7,"ng-container",7),p.fc()),2&e){const e=t.$implicit,n=p.uc(2);p.Pb(1),p.Bc("ngIf",!n.enabledConnectors.includes(e.id))}}function ba(e,t){1&e&&(p.ic(0,"div",34),p.ic(1,"p"),p.dd(2,"No Enabled Connectors"),p.hc(),p.hc())}function _a(e,t){if(1&e){const e=p.kc();p.ic(0,"div",36),p.ic(1,"div",0),p.ic(2,"div"),p.ic(3,"button",31),p.dd(4),p.hc(),p.ic(5,"p",37),p.dd(6),p.hc(),p.hc(),p.ic(7,"div"),p.ic(8,"button",38),p.qc("click",(function(){p.Qc(e);const n=t.$implicit,i=t.index;return p.uc(3).removeConnector(n,i)})),p.ic(9,"mat-icon"),p.dd(10,"delete"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=p.uc(3);p.Pb(3),p.Bc("ngStyle",p.Hc(3,ma,n.connectorMap[e]?n.connectorMap[e].button_color:"#dddddd",n.connectorMap[e]?n.connectorMap[e].text_color:"#000000")),p.Pb(1),p.fd(" ",n.connectorMap[e]?n.connectorMap[e].button_text:""," "),p.Pb(2),p.fd(" Connector Name: ",n.connectorMap[e]?n.connectorMap[e].name:""," ")}}function fa(e,t){if(1&e&&(p.ic(0,"div"),p.bd(1,_a,11,6,"div",35),p.hc()),2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngForOf",e.enabledConnectors)}}const va=function(e){return[e]},ya=function(e){return{"dyn-drag-drop-list":e}};function Ca(e,t){if(1&e){const e=p.kc();p.ic(0,"div",9),p.ic(1,"div",10),p.ic(2,"div",11),p.ic(3,"div",12),p.ic(4,"div",13),p.dd(5,"Available Connectors"),p.hc(),p.ic(6,"div"),p.ic(7,"div",14),p.ic(8,"div",15),p.bd(9,la,2,0,"mat-icon",7),p.bd(10,ha,1,0,"mat-progress-spinner",16),p.hc(),p.ic(11,"input",17),p.qc("ngModelChange",(function(t){return p.Qc(e),p.uc().connectorSearchInput=t}))("ngModelChange",(function(t){return p.Qc(e),p.uc().inputValueChanged(t)})),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(12,"hr"),p.ic(13,"div",18),p.ic(14,"div",19,20),p.bd(16,ua,2,0,"p",7),p.bd(17,pa,2,1,"ng-container",21),p.hc(),p.hc(),p.hc(),p.hc(),p.ic(18,"div",22),p.ic(19,"div",23),p.ic(20,"div",24),p.dd(21," Enabled Connectors "),p.hc(),p.dc(22,"hr"),p.ic(23,"div",25),p.ic(24,"div",26,27),p.qc("cdkDropListDropped",(function(t){return p.Qc(e),p.uc().drop(t)})),p.bd(26,ba,3,0,"div",28),p.bd(27,fa,2,1,"div",7),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.Mc(25),t=p.uc();p.Pb(9),p.Bc("ngIf",!t.searching),p.Pb(1),p.Bc("ngIf",t.searching),p.Pb(1),p.Bc("ngModel",t.connectorSearchInput),p.Pb(3),p.Bc("cdkDropListData",t.connectors)("cdkDropListConnectedTo",p.Gc(11,va,e)),p.Pb(2),p.Bc("ngIf",!t.connectors.length||t.connectors.length===t.enabledConnectors.length),p.Pb(1),p.Bc("ngForOf",t.filteredConnectors),p.Pb(7),p.Bc("ngClass",p.Gc(13,ya,t.enabledConnectors.length))("cdkDropListData",t.enabledConnectors),p.Pb(2),p.Bc("ngIf",!t.enabledConnectors.length),p.Pb(1),p.Bc("ngIf",t.enabledConnectors.length)}}const xa=function(e){return["/manager/campaigns/edit/",e]},wa=function(e){return["/manager/campaigns/members/",e]},Pa=function(e){return["/manager/campaigns/call-dispositions",e]},ka=function(e){return["/manager/campaigns/agent-dashboard-settings",e]};let Sa=(()=>{class e{constructor(e,t,n,i,c,a,o){this.utils=e,this.snackBar=t,this.route=n,this.changeDetectorRef=i,this.connectorService=c,this.campaignService=a,this.connectorButtonMemberService=o,this.connectors=[],this.connectorMap=[],this.enabledConnectors=[],this.connectorButtonMembers=[],this.connectorSearchVal=new u.a,this.filteredConnectors=[],this.searching=!1}ngAfterContentChecked(){this.changeDetectorRef.detectChanges()}ngOnInit(){this.route.params.subscribe({next:e=>{const t=parseInt(e.id);this.campaignId=t,this._getCampaign(t),this._getConnectors(),this._getConnectorButtonMembers()}}),this.connectorSearchVal.pipe(Object(sa.a)(2e3),Object(ra.a)()).subscribe(e=>{this.searching=!0,this.connectorService.search(e).subscribe({next:e=>{this.filteredConnectors=e.results,this.searching=!1}})})}inputValueChanged(e){this.connectorSearchVal.next(e)}addConnector(e){this.connectorButtonMemberService.create({connector_button:e.id,campaign:this.campaignId}).subscribe({next:e=>{this.enabledConnectors.push(e.connector_button),this.connectorButtonMembers.push(e)},error:e=>{this.snackBar.open(this.utils.handleErrorResponse(e,"Error Adding Connector"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}drop(e){e.previousContainer===e.container?Object(_c.h)(e.container.data,e.previousIndex,e.currentIndex):this.addConnector(e.item.data)}removeConnector(e,t){const n=this.connectorButtonMembers.findIndex(t=>t.connector_button===e);-1!==n&&this.connectorButtonMemberService.delete(this.connectorButtonMembers[n].id).subscribe({next:()=>{this.enabledConnectors.splice(t,1),this.connectorButtonMembers.splice(n,1)},error:e=>{this.snackBar.open(this.utils.handleErrorResponse(e,"Error Removing Connector"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}_getConnectors(){this.loading=!0,this.connectorService.list("max").subscribe({next:e=>{this.connectors=e.results,this.filteredConnectors=e.results,e.results.forEach(e=>{this.connectorMap[e.id]={name:e.name,button_color:e.button_color,button_text:e.button_text,text_color:e.text_color}}),this.loading=!1},error:e=>{this.loading=!1,this.snackBar.open(this.utils.handleErrorResponse(e,"Error Getting Connectors"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}_getCampaign(e){this.loading=!0,this.campaignService.get(e).subscribe({next:e=>{this.campaign=e,this.loading=!1},error:e=>{this.loading=!1,this.snackBar.open(this.utils.handleErrorResponse(e,"Error Getting Campaign"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}_getConnectorButtonMembers(){this.connectorButtonMemberService.getByCampaign(this.campaignId).subscribe({next:e=>{this.connectorButtonMembers=e.results,e.results.forEach(e=>{this.enabledConnectors.push(e.connector_button)})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(r.a),p.bc(B.a),p.bc(c.a),p.bc(p.i),p.bc(aa.a),p.bc(a.a),p.bc(oa.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:22,vars:17,consts:[[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","",3,"routerLink"],["mat-button","","color","primary"],["mat-button","","color","",3,"disabled","routerLink"],[4,"ngIf"],["class","dyn-flex dyn-space-between dyn-m-t-30",4,"ngIf"],[1,"dyn-flex","dyn-space-between","dyn-m-t-30"],[1,"dyn-full-width","dyn-m-r-20"],[1,"dyn-card","dyn-m-0"],[1,"dyn-flex","dyn-align-items","dyn-space-between","dyn-m-b-10","dyn-m-t-10"],[1,""],[1,"dyn-search-bar"],[1,"left"],["diameter","15","mode","indeterminate",4,"ngIf"],["type","search","placeholder","Search",2,"width","175px",3,"ngModel","ngModelChange"],[2,"overflow","auto","max-height","calc(100vh - 320px)"],["cdkDropList","",1,"dyn-drag-drop-list",3,"cdkDropListData","cdkDropListConnectedTo"],["connectorList","cdkDropList"],["class","dyn-m-t-10",4,"ngFor","ngForOf"],[1,"dyn-full-width"],[1,"dyn-m-0","dyn-card"],[1,"dyn-m-b-10","dyn-m-t-10"],[1,"dyn-m-t-10"],["cdkDropList","",3,"ngClass","cdkDropListData","cdkDropListDropped"],["enabledConnectorList","cdkDropList"],["class","dyn-text-center dyn-p-20 dyn-p-t-20 dyn-p-b-20 dyn-dashed-border",4,"ngIf"],["diameter","15","mode","indeterminate"],["cdkDrag","",1,"dyn-drag-drop-box",3,"cdkDragData"],["mat-raised-button","",3,"ngStyle"],[1,"dyn-m-0","dyn-m-l-10","dyn-inline-block"],["mat-mini-fab","","color","","matTooltip","Enable Connector",1,"dyn-no-shadow",3,"click"],[1,"dyn-text-center","dyn-p-20","dyn-p-t-20","dyn-p-b-20","dyn-dashed-border"],["class","dyn-drag-drop-box",4,"ngFor","ngForOf"],[1,"dyn-drag-drop-box"],[1,"dyn-m-0","dyn-inline-block","dyn-m-l-10"],["mat-mini-fab","","color","","matTooltip","Remove from Current Members",1,"dyn-no-shadow",3,"click"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.ic(1,"h3",1),p.dd(2),p.hc(),p.ic(3,"div"),p.ic(4,"button",2),p.ic(5,"mat-icon"),p.dd(6,"arrow_back"),p.hc(),p.dd(7," Back to Campaigns "),p.hc(),p.ic(8,"div",3),p.ic(9,"button",4),p.dd(10,"Settings"),p.hc(),p.ic(11,"button",4),p.dd(12,"Members"),p.hc(),p.ic(13,"button",5),p.dd(14,"Connectors"),p.hc(),p.ic(15,"button",6),p.dd(16,"Call Dispositions"),p.hc(),p.ic(17,"button",6),p.dd(18,"Agent Dashboard Settings"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(19,"hr"),p.bd(20,da,2,0,"div",7),p.bd(21,Ca,28,15,"div",8)),2&e&&(p.Pb(2),p.fd(" Edit Campaign (",t.campaign?t.campaign.name:"",") "),p.Pb(7),p.Bc("routerLink",p.Gc(9,xa,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(11,wa,t.campaignId)),p.Pb(4),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(13,Pa,t.campaignId)),p.Pb(2),p.Bc("disabled",!t.campaignId)("routerLink",p.Gc(15,ka,t.campaignId)),p.Pb(3),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.loading))},directives:[F.b,c.h,R.a,M.p,S.d,S.p,S.s,_c.e,M.o,M.n,G.a,_c.a,M.q,D.a],encapsulation:2}),e})(),Ba=(()=>{class e{constructor(e){this.http=e}getByCampaign(e){return this.http.get("/api/campaignchangelogs/?campaign_id="+e)}}return e.\u0275fac=function(t){return new(t||e)(p.nc(b.b))},e.\u0275prov=p.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Da=n("9bSd");function Ma(e,t){1&e&&(p.ic(0,"th",16),p.dd(1," Name "),p.hc())}function Fa(e,t){if(1&e&&(p.ic(0,"td",17),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.ed(e.name)}}function Ia(e,t){if(1&e&&(p.gc(0),p.dd(1),p.fc()),2&e){const e=p.uc(2).$implicit,t=p.uc(2);p.Pb(1),p.fd(" ",e.value?t.userMap[e.value]:""," ")}}function Aa(e,t){if(1&e&&(p.gc(0),p.dd(1),p.vc(2,"date"),p.fc()),2&e){const e=p.uc(2).$implicit;p.Pb(1),p.fd(" ",p.xc(2,1,e.value,"MMM d, y, h:mm a")," ")}}function Ta(e,t){if(1&e&&(p.gc(0),p.dd(1),p.fc()),2&e){const e=p.uc(2).$implicit;p.Pb(1),p.ed(e.value)}}function Oa(e,t){if(1&e&&(p.ic(0,"div",22),p.ic(1,"span",3),p.dd(2),p.vc(3,"titlecase"),p.vc(4,"replaceUnderscore"),p.hc(),p.ic(5,"b"),p.bd(6,Ia,2,1,"ng-container",23),p.bd(7,Aa,3,4,"ng-container",23),p.bd(8,Ta,2,1,"ng-container",23),p.hc(),p.hc()),2&e){const e=p.uc().$implicit;p.Pb(2),p.fd("",p.wc(3,4,p.wc(4,6,e.key)),": "),p.Pb(4),p.Bc("ngIf","created_by"===e.key||"modified_by"===e.key),p.Pb(1),p.Bc("ngIf","created_on"===e.key||"modified_on"===e.key),p.Pb(1),p.Bc("ngIf","created_by"!==e.key&&"modified_by"!==e.key&&"modified_on"!==e.key&&"created_on"!==e.key)}}function La(e,t){if(1&e&&(p.gc(0),p.bd(1,Oa,9,8,"div",21),p.fc()),2&e){const e=t.$implicit;p.Pb(1),p.Bc("ngIf","id"!==e.key&&"account_id"!==e.key)}}function Na(e,t){if(1&e&&(p.ic(0,"td",17),p.ic(1,"div",18),p.ic(2,"div",19),p.bd(3,La,2,1,"ng-container",20),p.vc(4,"keyvalue"),p.hc(),p.hc(),p.hc()),2&e){const e=t.$implicit,n=p.uc();p.Qb("colspan",4),p.Pb(1),p.Bc("@detailExpand",e==n.expandedElement?"expanded":"collapsed"),p.Pb(2),p.Bc("ngForOf",p.wc(4,3,e))}}function $a(e,t){1&e&&(p.ic(0,"th",16),p.dd(1," Modified By "),p.hc())}function qa(e,t){if(1&e&&(p.ic(0,"td",17),p.dd(1),p.hc()),2&e){const e=t.$implicit,n=p.uc();p.Pb(1),p.ed(e.modified_by?n.userMap[e.modified_by]:"")}}function Va(e,t){1&e&&(p.ic(0,"th",16),p.dd(1," Created On "),p.hc())}function Ra(e,t){if(1&e&&(p.ic(0,"td",17),p.dd(1),p.vc(2,"date"),p.hc()),2&e){const e=t.$implicit;p.Pb(1),p.ed(p.xc(2,1,e.created_on,"MMM d, y, h:mm a"))}}function Ea(e,t){1&e&&(p.ic(0,"th",16),p.dd(1," Controls "),p.hc())}function za(e,t){1&e&&(p.ic(0,"td",17),p.ic(1,"button",24),p.dd(2,"View"),p.hc(),p.hc())}function Qa(e,t){1&e&&p.dc(0,"tr",25)}function Ga(e,t){if(1&e){const e=p.kc();p.ic(0,"tr",26),p.qc("click",(function(){p.Qc(e);const n=t.$implicit,i=p.uc();return i.expandedElement=i.expandedElement===n?null:n})),p.hc()}if(2&e){const e=t.$implicit,n=p.uc();p.Tb("example-expanded-row",n.expandedElement===e)}}function ja(e,t){1&e&&p.dc(0,"tr",27)}const Ha=function(){return["/manager/campaigns"]},Xa=function(){return["name","modified_by","created_on","controls"]},Wa=function(){return["expandedDetail"]};let Ua=(()=>{class e{constructor(e,t,n){this._route=e,this._userService=t,this._campaignChangeLogService=n,this.expandedElement=null,this.changeLogs=[],this.userMap=[]}ngOnInit(){this._route.params.subscribe({next:e=>{this.campaignId=parseInt(e.id),this._getCampaignChangeLogs()}}),this._getUsers()}_getCampaignChangeLogs(){this._campaignChangeLogService.getByCampaign(this.campaignId).subscribe({next:e=>{this.changeLogs=e.results}})}_getUsers(){this._userService.listMinimizedUsers().subscribe({next:e=>{e.forEach(e=>{this.userMap[e.app_user]=e.full_name})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(c.a),p.bc(fn.a),p.bc(Ba))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:30,vars:9,consts:[[1,"dyn-card","dyn-full-width","dyn-m-0","dyn-m-t-10"],[1,"dyn-card-header","dyn-flex","dyn-space-between","dyn-align-items"],[1,"dyn-m-0"],[1,"dyn-text-muted"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-table","","multiTemplateDataRows","",1,"dyn-full-width",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["matColumnDef","modified_by"],["matColumnDef","created_on"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","dyn-table-hover",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"example-element-detail"],[1,"example-element-description","dyn-full-width",2,"display","grid","grid-gap","10px 30px","grid-template-columns","repeat(auto-fit, minmax(45%, 1fr))"],[4,"ngFor","ngForOf"],["class","dyn-flex dyn-space-between dyn-border-bottom",4,"ngIf"],[1,"dyn-flex","dyn-space-between","dyn-border-bottom"],[4,"ngIf"],["mat-button","","color","primary"],["mat-header-row",""],["mat-row","",1,"dyn-table-hover",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.ic(1,"div",1),p.ic(2,"div"),p.ic(3,"h1",2),p.dd(4,"Campaign Change Logs"),p.hc(),p.ic(5,"p",3),p.dd(6,"Changes made to your campaign are logged here."),p.hc(),p.hc(),p.ic(7,"div"),p.ic(8,"button",4),p.ic(9,"mat-icon"),p.dd(10,"arrow_back"),p.hc(),p.dd(11," Back to Campaigns "),p.hc(),p.hc(),p.hc(),p.ic(12,"table",5),p.gc(13,6),p.bd(14,Ma,2,0,"th",7),p.bd(15,Fa,2,1,"td",8),p.fc(),p.gc(16,9),p.bd(17,Na,5,5,"td",8),p.fc(),p.gc(18,10),p.bd(19,$a,2,0,"th",7),p.bd(20,qa,2,1,"td",8),p.fc(),p.gc(21,11),p.bd(22,Va,2,0,"th",7),p.bd(23,Ra,3,4,"td",8),p.fc(),p.gc(24,12),p.bd(25,Ea,2,0,"th",7),p.bd(26,za,3,0,"td",8),p.fc(),p.bd(27,Qa,1,0,"tr",13),p.bd(28,Ga,1,2,"tr",14),p.bd(29,ja,1,0,"tr",15),p.hc(),p.hc()),2&e&&(p.Pb(8),p.Bc("routerLink",p.Fc(5,Ha)),p.Pb(4),p.Bc("dataSource",t.changeLogs),p.Pb(15),p.Bc("matHeaderRowDef",p.Fc(6,Xa)),p.Pb(1),p.Bc("matRowDefColumns",p.Fc(7,Xa)),p.Pb(1),p.Bc("matRowDefColumns",p.Fc(8,Wa)))},directives:[F.b,c.h,R.a,q.n,q.c,q.i,q.b,q.k,q.m,q.h,q.a,M.o,M.p,q.j,q.l],pipes:[M.j,M.y,Da.a,M.f],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:20px 0}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[Object(m.o)("detailExpand",[Object(m.l)("collapsed",Object(m.m)({height:"0px",minHeight:"0"})),Object(m.l)("expanded",Object(m.m)({height:"*"})),Object(m.n)("expanded <=> collapsed",Object(m.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();var Ya=n("mWOZ"),Za=n("XGcP");function Ja(e,t){1&e&&(p.ic(0,"div"),p.dd(1,"Loading..."),p.hc())}function Ka(e,t){1&e&&(p.ic(0,"p"),p.dd(1,"No Call Dispositions to Show"),p.hc())}function eo(e,t){if(1&e){const e=p.kc();p.gc(0),p.ic(1,"div",21),p.ic(2,"div",22),p.ic(3,"div"),p.ic(4,"p",23),p.dd(5),p.hc(),p.hc(),p.ic(6,"div"),p.ic(7,"button",24),p.qc("click",(function(){p.Qc(e);const t=p.uc().$implicit;return p.uc(2).addDisposition(t)})),p.ic(8,"mat-icon"),p.dd(9,"add_circle"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc(),p.fc()}if(2&e){const e=p.uc().$implicit;p.Pb(1),p.Bc("cdkDragData",e),p.Pb(4),p.fd(" ",e.name," ")}}function to(e,t){if(1&e&&(p.gc(0,17),p.bd(1,eo,10,2,"ng-container",6),p.fc()),2&e){const e=t.$implicit,n=p.uc(2);p.Pb(1),p.Bc("ngIf",!n.enabledDispositions.includes(e.id))}}function no(e,t){1&e&&(p.ic(0,"div",25),p.ic(1,"p"),p.dd(2,"No Enabled Call Dispositions"),p.hc(),p.hc())}function io(e,t){if(1&e){const e=p.kc();p.ic(0,"div",27),p.ic(1,"div",22),p.ic(2,"div"),p.ic(3,"p",23),p.dd(4),p.hc(),p.hc(),p.ic(5,"div"),p.ic(6,"button",28),p.qc("click",(function(){p.Qc(e);const n=t.$implicit,i=t.index;return p.uc(3).removeCallDisposition(n,i)})),p.ic(7,"mat-icon"),p.dd(8,"delete"),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=t.$implicit,n=p.uc(3);p.Pb(4),p.fd(" ",n.callDispositionMap[e]?n.callDispositionMap[e]:""," ")}}function co(e,t){if(1&e&&(p.ic(0,"div"),p.bd(1,io,9,1,"div",26),p.hc()),2&e){const e=p.uc(2);p.Pb(1),p.Bc("ngForOf",e.enabledDispositions)}}const ao=function(e){return[e]},oo=function(e){return{"dyn-drag-drop-list":e}};function so(e,t){if(1&e){const e=p.kc();p.ic(0,"div",8),p.ic(1,"div",9),p.ic(2,"div",10),p.ic(3,"div",11),p.dd(4,"Available Call Dispositions"),p.hc(),p.dc(5,"hr"),p.ic(6,"div",12,13),p.bd(8,Ka,2,0,"p",6),p.bd(9,to,2,1,"ng-container",14),p.hc(),p.hc(),p.hc(),p.ic(10,"div",15),p.ic(11,"div",16),p.ic(12,"div",11),p.dd(13," Enabled Call Dispositions "),p.hc(),p.dc(14,"hr"),p.ic(15,"div",17),p.ic(16,"div",18,19),p.qc("cdkDropListDropped",(function(t){return p.Qc(e),p.uc().drop(t)})),p.bd(18,no,3,0,"div",20),p.bd(19,co,2,1,"div",6),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.Mc(17),t=p.uc();p.Pb(6),p.Bc("cdkDropListData",t.callDispositions)("cdkDropListConnectedTo",p.Gc(8,ao,e)),p.Pb(2),p.Bc("ngIf",!t.callDispositions.length||t.callDispositions.length===t.enabledDispositions.length),p.Pb(1),p.Bc("ngForOf",t.callDispositions),p.Pb(7),p.Bc("ngClass",p.Gc(10,oo,t.enabledDispositions.length))("cdkDropListData",t.callDispositions),p.Pb(2),p.Bc("ngIf",!t.enabledDispositions.length),p.Pb(1),p.Bc("ngIf",t.enabledDispositions.length)}}const ro=function(e){return["/manager/campaigns/edit/",e]},lo=function(e){return["/manager/campaigns/members/",e]},ho=function(e){return["/manager/campaigns/connectors/",e]},uo=function(e){return["/manager/campaigns/agent-dashboard-settings/",e]};let mo=(()=>{class e{constructor(e,t,n,i,c,a,o,s){this._utils=e,this._dialog=t,this._snackBar=n,this._route=i,this._changeDetectorRef=c,this._campaignService=a,this._callDispositionService=o,this._callDispositionMemberService=s,this.callDispositions=[],this.callDispositionMembers=[],this.enabledDispositions=[],this.callDispositionMap=[]}ngAfterContentChecked(){this._changeDetectorRef.detectChanges()}ngOnInit(){this._route.params.subscribe({next:e=>{const t=parseInt(e.id);this.campaignId=t,this._getCampaign(t),this._getCallDispositionMembers(),this._getCallDispositions()}})}addDisposition(e){this._callDispositionMemberService.create({call_disposition:e.id,campaign:this.campaignId}).subscribe({next:e=>{this.enabledDispositions.push(e.call_disposition),this.callDispositionMembers.push(e)},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Adding Disposition"),"X",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}})}drop(e){e.previousContainer===e.container?Object(_c.h)(e.container.data,e.previousIndex,e.currentIndex):this.addDisposition(e.item.data)}removeCallDisposition(e,t){const n=this.callDispositionMembers.findIndex(t=>t.call_disposition===e);-1!==n&&this._callDispositionMemberService.delete(this.callDispositionMembers[n].id).subscribe({next:()=>{this.enabledDispositions.splice(t,1),this.callDispositionMembers.splice(n,1)},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Removing Call Disposition"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}_getCallDispositionMembers(){this._callDispositionMemberService.getByCampaign(this.campaignId).subscribe({next:e=>{this.callDispositionMembers=e.results,e.results.forEach(e=>{this.enabledDispositions.push(e.call_disposition)})}})}_getCallDispositions(){this._callDispositionService.list("max").subscribe({next:e=>{this.callDispositions=e.results,this.callDispositions.forEach(e=>{this.callDispositionMap[e.id]=e.name})}})}_getCampaign(e){this.loading=!0,this._campaignService.get(e).subscribe({next:e=>{this.campaign=e,this.loading=!1},error:e=>{this.loading=!1,this._snackBar.open(this._utils.handleErrorResponse(e,"Error Getting Campaign"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(r.a),p.bc(f.b),p.bc(B.a),p.bc(c.a),p.bc(p.i),p.bc(a.a),p.bc(Ya.a),p.bc(Za.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:22,vars:15,consts:[[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","",3,"routerLink"],["mat-button","","color","primary"],[4,"ngIf"],["class","dyn-flex dyn-space-between dyn-m-t-30",4,"ngIf"],[1,"dyn-flex","dyn-space-between","dyn-m-t-30"],[1,"dyn-full-width","dyn-m-r-20"],[1,"dyn-card","dyn-m-0"],[1,"dyn-m-b-10","dyn-m-t-10"],["cdkDropList","",1,"dyn-drag-drop-list",3,"cdkDropListData","cdkDropListConnectedTo"],["dispositionList","cdkDropList"],["class","dyn-m-t-10",4,"ngFor","ngForOf"],[1,"dyn-full-width"],[1,"dyn-m-0","dyn-card"],[1,"dyn-m-t-10"],["cdkDropList","",3,"ngClass","cdkDropListData","cdkDropListDropped"],["enabledDispositionList","cdkDropList"],["class","dyn-text-center dyn-p-20 dyn-p-t-20 dyn-p-b-20 dyn-dashed-border",4,"ngIf"],["cdkDrag","",1,"dyn-drag-drop-box",3,"cdkDragData"],[1,"dyn-flex","dyn-space-between","dyn-align-items"],[1,"dyn-m-0","dyn-m-l-10"],["mat-mini-fab","","color","","matTooltip","Enable Call Disposition",1,"dyn-no-shadow",3,"click"],[1,"dyn-text-center","dyn-p-20","dyn-p-t-20","dyn-p-b-20","dyn-dashed-border"],["class","dyn-drag-drop-box",4,"ngFor","ngForOf"],[1,"dyn-drag-drop-box"],["mat-mini-fab","","color","","matTooltip","Remove from Current Members",1,"dyn-no-shadow",3,"click"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.ic(1,"h3",1),p.dd(2),p.hc(),p.ic(3,"div"),p.ic(4,"button",2),p.ic(5,"mat-icon"),p.dd(6,"arrow_back"),p.hc(),p.dd(7," Back to Campaigns "),p.hc(),p.ic(8,"div",3),p.ic(9,"button",4),p.dd(10,"Settings"),p.hc(),p.ic(11,"button",4),p.dd(12,"Members"),p.hc(),p.ic(13,"button",4),p.dd(14,"Connectors"),p.hc(),p.ic(15,"button",5),p.dd(16,"Call Dispositions"),p.hc(),p.ic(17,"button",4),p.dd(18,"Agent Dashboard Settings"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(19,"hr"),p.bd(20,Ja,2,0,"div",6),p.bd(21,so,20,12,"div",7)),2&e&&(p.Pb(2),p.fd(" Edit Campaign (",t.campaign?t.campaign.name:"",") "),p.Pb(7),p.Bc("routerLink",p.Gc(7,ro,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(9,lo,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(11,ho,t.campaignId)),p.Pb(4),p.Bc("routerLink",p.Gc(13,uo,t.campaignId)),p.Pb(3),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.loading))},directives:[F.b,c.h,R.a,M.p,_c.e,M.o,M.n,_c.a,D.a],encapsulation:2}),e})();var go=n("QWJD"),po=n("9HIy");function bo(e,t){1&e&&(p.ic(0,"div"),p.dd(1,"Loading..."),p.hc())}function _o(e,t){if(1&e&&(p.ic(0,"option",15),p.dd(1),p.hc()),2&e){const e=t.$implicit;p.Bc("ngValue",e.id),p.Pb(1),p.fd(" ",e.name," ")}}function fo(e,t){1&e&&p.dc(0,"mat-progress-spinner",18)}function vo(e,t){if(1&e){const e=p.kc();p.ic(0,"div",8),p.ic(1,"div",9),p.ic(2,"div",10),p.ic(3,"h3",11),p.dd(4,"Agent Dashboard"),p.hc(),p.ic(5,"p",12),p.dd(6," Customize the agent dashboard shown to agents while they're in this campaign. "),p.hc(),p.hc(),p.ic(7,"div",13),p.ic(8,"label"),p.dd(9,"Select an Agent Dashboard"),p.hc(),p.dc(10,"br"),p.ic(11,"select",14),p.qc("ngModelChange",(function(t){return p.Qc(e),p.uc().selectedDashboard=t}))("ngModelChange",(function(){return p.Qc(e),p.uc().updateSelectedAgentDashboard()})),p.dc(12,"option",15),p.bd(13,_o,2,2,"option",16),p.hc(),p.bd(14,fo,1,0,"mat-progress-spinner",17),p.hc(),p.hc(),p.hc()}if(2&e){const e=p.uc();p.Pb(11),p.Bc("disabled",e.updating)("ngModel",e.selectedDashboard),p.Pb(1),p.Bc("ngValue",null),p.Pb(1),p.Bc("ngForOf",e.customDashboardSettings),p.Pb(1),p.Bc("ngIf",e.updating)}}const yo=function(e){return["/manager/campaigns/edit/",e]},Co=function(e){return["/manager/campaigns/members/",e]},xo=function(e){return["/manager/campaigns/connectors/",e]},wo=function(e){return["/manager/campaigns/call-dispositions/",e]},Po=[{path:"",component:un},{path:"edit/:id",component:bc},{path:"create",component:bc},{path:"live-filters/:id",component:Mc},{path:"members/:id",component:ca},{path:"connectors/:id",component:Sa},{path:"change-logs/:id",component:Ua},{path:"call-dispositions/:id",component:mo},{path:"agent-dashboard-settings/:id",component:(()=>{class e{constructor(e,t,n,i,c,a,o){this._utils=e,this._dialog=t,this._snackBar=n,this._route=i,this._dashboardSettingService=c,this._dashboardSettingMemberService=a,this._campaignService=o,this.loading=!0,this.campaignId=null,this.selectedDashboard=null,this.assignmentId=null,this.updating=!1,this.customDashboardSettings=[]}ngOnInit(){this._route.params.subscribe({next:e=>{const t=parseInt(e.id);this.campaignId=t,this.campaignId&&(this._getCampaign(t),this._getCampaignAssignments(t),this._getDashboardSettings())}})}updateSelectedAgentDashboard(){this.assignmentId&&(this.updating=!0,this._dashboardSettingMemberService.delete(this.assignmentId).subscribe()),setTimeout(()=>{this._dashboardSettingMemberService.create({dashboard_settings:this.selectedDashboard,campaign:this.campaignId}).subscribe({next:e=>{this.assignmentId=e.id,this.updating=!1,this._snackBar.open("Agent Dashboard Updated","X",{duration:5e3,verticalPosition:"top",panelClass:"success"})},error:e=>{this.updating=!1,this._snackBar.open(this._utils.handleErrorResponse(e,"Error Updating Dashboard"),"X",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}})},this.assignmentId?3e3:0)}_getCampaignAssignments(e){this._dashboardSettingMemberService.filter(1,1,{campaign:e}).subscribe({next:e=>{e.results&&e.results.length&&(this.assignmentId=e.results[0].id,this.selectedDashboard=e.results[0].dashboard_settings)}})}_getDashboardSettings(){this._dashboardSettingService.list("max").subscribe({next:e=>{this.customDashboardSettings=e.results}})}_getCampaign(e){this.loading=!0,this._campaignService.get(e).subscribe({next:e=>{this.campaign=e,this.loading=!1},error:e=>{this.loading=!1,this._snackBar.open(this._utils.handleErrorResponse(e,"Error Getting Campaign"),"",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(r.a),p.bc(f.b),p.bc(B.a),p.bc(c.a),p.bc(go.a),p.bc(po.a),p.bc(a.a))},e.\u0275cmp=p.Vb({type:e,selectors:[["ng-component"]],decls:23,vars:15,consts:[[1,"dyn-flex","dyn-space-between"],[1,"dyn-m-0","dyn-m-t-5"],["mat-button","","routerLink","/manager/campaigns"],[1,"dyn-inline-block"],["mat-button","","color","",3,"routerLink"],["mat-button","","color","primary"],[4,"ngIf"],["class","dyn-m-t-30",4,"ngIf"],[1,"dyn-m-t-30"],[1,"dyn-flex","dyn-space-between","dyn-align-items"],[1,"dyn-full-width"],[1,"dyn-m-b-0"],[1,"dyn-text-muted"],[1,"dyn-card","dyn-full-width"],[2,"min-width","200px",3,"disabled","ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","dyn-inline-block dyn-vertical-middle dyn-m-l-10","diameter","20","mode","indeterminate",4,"ngIf"],["diameter","20","mode","indeterminate",1,"dyn-inline-block","dyn-vertical-middle","dyn-m-l-10"]],template:function(e,t){1&e&&(p.ic(0,"div",0),p.ic(1,"h3",1),p.dd(2),p.hc(),p.ic(3,"div"),p.ic(4,"button",2),p.ic(5,"mat-icon"),p.dd(6,"arrow_back"),p.hc(),p.dd(7," Back to Campaigns "),p.hc(),p.ic(8,"div",3),p.ic(9,"button",4),p.dd(10,"Settings"),p.hc(),p.ic(11,"button",4),p.dd(12,"Members"),p.hc(),p.ic(13,"button",4),p.dd(14,"Connectors"),p.hc(),p.ic(15,"button",4),p.dd(16,"Call Dispositions"),p.hc(),p.ic(17,"button",5),p.dd(18,"Agent Dashboard Settings"),p.hc(),p.hc(),p.hc(),p.hc(),p.dc(19,"hr"),p.bd(20,bo,2,0,"div",6),p.bd(21,vo,15,5,"div",7),p.dc(22,"hr",8)),2&e&&(p.Pb(2),p.fd(" Edit Campaign (",t.campaign?t.campaign.name:"",") "),p.Pb(7),p.Bc("routerLink",p.Gc(7,yo,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(9,Co,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(11,xo,t.campaignId)),p.Pb(2),p.Bc("routerLink",p.Gc(13,wo,t.campaignId)),p.Pb(5),p.Bc("ngIf",t.loading),p.Pb(1),p.Bc("ngIf",!t.loading))},directives:[F.b,c.h,R.a,M.p,S.y,S.p,S.s,S.t,S.A,M.o,G.a],encapsulation:2}),e})()}];let ko=(()=>{class e{}return e.\u0275mod=p.Zb({type:e}),e.\u0275inj=p.Yb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(Po)],c.j]}),e})();var So=n("P/1d");let Bo=(()=>{class e{}return e.\u0275mod=p.Zb({type:e}),e.\u0275inj=p.Yb({factory:function(t){return new(t||e)},imports:[[So.a,i.a,ko,Vn.b,E.c]]}),e})()},l4kS:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),c=n("tk/3");let a=(()=>{class e{constructor(e){this.http=e}filter(e,t,n){let i=`?ordering=-pk&page=${t}&page_size=${e}`;return Object.keys(n).forEach(e=>{null!==n[e]&&(i+="&"+e+"="+n[e])}),this.http.get("/api/connectorbuttonmembers/"+i)}list(e,t){return this.http.get(t?`/api/connectorbuttonmembers/?page=${t}&page_size=${e}`:"/api/connectorbuttonmembers/?page_size="+e)}getByConnector(e){return this.http.get("/api/connectorbuttonmembers/?connector_button="+e)}getByUser(e){return this.http.get("/api/connectorbuttonmembers/?app_user_id="+e)}getByCampaign(e){return this.http.get("/api/connectorbuttonmembers/?campaign="+e)}getByQueue(e){return this.http.get("/api/connectorbuttonmembers/?queue="+e)}getByTeam(e){return this.http.get("/api/connectorbuttonmembers/?team="+e)}getByAccount(e){return this.http.get("/api/connectorbuttonmembers/?account_settings="+e)}create(e){return this.http.post("/api/connectorbuttonmembers/",e)}delete(e){return this.http.delete(`/api/connectorbuttonmembers/${e}/`)}}return e.\u0275fac=function(t){return new(t||e)(i.nc(c.b))},e.\u0275prov=i.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vwZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("0IaG"),c=n("fXoL"),a=n("NFeN"),o=n("ofXK"),s=n("bTqV");function r(e,t){if(1&e){const e=c.kc();c.gc(0),c.ic(1,"div",4),c.ic(2,"button",5),c.qc("click",(function(){return c.Qc(e),c.uc(2).dialogRef.close()})),c.dd(3),c.hc(),c.ic(4,"button",6),c.qc("click",(function(){return c.Qc(e),c.uc(2).dialogRef.close(!0)})),c.dd(5),c.hc(),c.hc(),c.fc()}if(2&e){const e=c.uc(2);c.Pb(3),c.fd(" ",e.cancelButtonText," "),c.Pb(2),c.fd(" ",e.buttonText," ")}}function d(e,t){if(1&e){const e=c.kc();c.gc(0),c.ic(1,"div",7),c.ic(2,"button",6),c.qc("click",(function(){return c.Qc(e),c.uc(2).dialogRef.close()})),c.dd(3),c.hc(),c.hc(),c.fc()}if(2&e){const e=c.uc(2);c.Pb(3),c.fd(" ",e.buttonText," ")}}function l(e,t){if(1&e&&(c.gc(0),c.dc(1,"hr"),c.bd(2,r,6,2,"ng-container",3),c.bd(3,d,4,1,"ng-container",3),c.fc()),2&e){const e=c.uc();c.Pb(2),c.Bc("ngIf",e.showCancelButton),c.Pb(1),c.Bc("ngIf",!e.showCancelButton)}}let h=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.showButton=!0,this.showCancelButton=!1,this.cancelButtonText="Cancel",this.message=t.message,this.buttonText=t.buttonText?t.buttonText:"Confirm",t.hideButton&&(this.showButton=!1),t.showCancelButton&&(this.showCancelButton=!0,t.cancelButtonText&&(this.cancelButtonText=t.cancelButtonText))}}return e.\u0275fac=function(t){return new(t||e)(c.bc(i.g),c.bc(i.a))},e.\u0275cmp=c.Vb({type:e,selectors:[["ng-component"]],decls:5,vars:2,consts:[[1,"dyn-text-center"],[1,"dyn-opacity-30","error-icon",2,"font-size","80px","height","80px","width","80px"],[1,"dyn-text-center",3,"innerHTML"],[4,"ngIf"],[1,"dyn-flex","dyn-space-between","dyn-m-t-20"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"dyn-text-center","dyn-m-t-20"]],template:function(e,t){1&e&&(c.ic(0,"div",0),c.ic(1,"mat-icon",1),c.dd(2,"error_outline"),c.hc(),c.hc(),c.dc(3,"h4",2),c.bd(4,l,4,2,"ng-container",3)),2&e&&(c.Pb(3),c.Bc("innerHTML",t.message,c.Rc),c.Pb(1),c.Bc("ngIf",t.showButton))},directives:[a.a,o.p,s.b],styles:[".error-icon[_ngcontent-%COMP%]{animation:shake .82s cubic-bezier(.36,.07,.19,.97) both}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]}),e})()}}]);