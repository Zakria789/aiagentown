(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+WsV":function(e,t,a){"use strict";a.d(t,"a",(function(){return me}));var i=a("3Pt+"),c=a("0IaG"),n=a("Kj3r"),l=a("/uUt"),r=a("XNiG"),d=a("2Nh7"),o=a("rryV"),s=a("ssNL"),u=a("M1CT"),h=a("zBIn"),p=a("N/25"),g=a("Evvo"),m=a("+3se"),b=a("7JKk"),y=a("fXoL"),f=a("tk/3"),v=a("dNgK"),I=a("ofXK"),_=a("bTqV"),S=a("NFeN"),C=a("Qu3c"),x=a("kmnG"),w=a("d3UM"),F=a("Xa2L"),P=a("FKr1");function B(e,t){if(1&e&&(y.ic(0,"option",19),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("value",e),y.Pb(1),y.ed(e)}}function k(e,t){1&e&&(y.ic(0,"p",20),y.ic(1,"b"),y.dd(2,"Single:"),y.hc(),y.dd(3," will use the 1 Caller ID they you specify. "),y.hc())}function M(e,t){1&e&&(y.ic(0,"div",21),y.ic(1,"b"),y.dd(2,"Automatic:"),y.hc(),y.dd(3," will attempt region match, & state match in that order then fall back on random match. "),y.hc())}function D(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Random:"),y.hc(),y.dd(3," will get a random caller id from your Caller ID Group or your entire account. "),y.hc())}function O(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Area Code:"),y.hc(),y.dd(3," will attempt to find a Caller ID with a matching area code to the destination number but will fall back on random match if unsuccessful. "),y.hc())}function R(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Region:"),y.hc(),y.dd(3," will attempt to find a Caller ID from the same region as the destination number but will fall back on random match if unsuccessful. "),y.hc())}function A(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"State:"),y.hc(),y.dd(3," will attempt to find a Caller ID from the same state as the destination number but will fall back on random match if unsuccessful. "),y.hc())}function N(e,t){1&e&&(y.ic(0,"mat-icon",35),y.dd(1,"search"),y.hc())}function G(e,t){1&e&&y.dc(0,"mat-progress-spinner",36)}function $(e,t){if(1&e&&(y.ic(0,"mat-option",37),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("value",e.id),y.Pb(1),y.gd(" ",e.name," - ",e.phone_number," ")}}function q(e,t){1&e&&y.dc(0,"mat-progress-spinner",36)}function T(e,t){if(1&e){const e=y.kc();y.ic(0,"div",38),y.ic(1,"span",39),y.qc("click",(function(){return y.Qc(e),y.uc(3).showCreateCallerIdDialog()})),y.dd(2," Create Caller ID "),y.ic(3,"mat-icon",40),y.dd(4,"add"),y.hc(),y.hc(),y.hc()}}const V=function(){return{standalone:!0}};function j(e,t){if(1&e){const e=y.kc();y.gc(0),y.ic(1,"div",22),y.ic(2,"label",23),y.dd(3,"Caller ID (required)"),y.hc(),y.ic(4,"div",10),y.ic(5,"mat-form-field",24),y.ic(6,"mat-select",25),y.ic(7,"div",26),y.bd(8,N,2,0,"mat-icon",27),y.bd(9,G,1,0,"mat-progress-spinner",28),y.ic(10,"input",29),y.qc("keydown",(function(t){return y.Qc(e),t.stopPropagation()}))("ngModelChange",(function(t){return y.Qc(e),y.uc(2).callerIdInput=t}))("ngModelChange",(function(t){return y.Qc(e),y.uc(2).inputValueChanged(t)})),y.hc(),y.hc(),y.bd(11,$,2,3,"mat-option",30),y.ic(12,"div",31),y.ic(13,"button",32),y.qc("click",(function(){return y.Qc(e),y.uc(2).loadMoreCallerIds()})),y.bd(14,q,1,0,"mat-progress-spinner",33),y.dd(15," Load More "),y.ic(16,"mat-icon"),y.dd(17,"expand_more"),y.hc(),y.hc(),y.hc(),y.hc(),y.hc(),y.bd(18,T,5,0,"div",34),y.hc(),y.hc(),y.fc()}if(2&e){const e=y.uc(2);y.Pb(8),y.Bc("ngIf",!e.loadingCallerIds),y.Pb(1),y.Bc("ngIf",e.loadingCallerIds),y.Pb(1),y.Bc("ngModel",e.callerIdInput)("ngModelOptions",y.Fc(8,V)),y.Pb(1),y.Bc("ngForOf",e.callerIds),y.Pb(2),y.Bc("disabled",!e.nextUrl),y.Pb(1),y.Bc("ngIf",e.loadingCallerIds),y.Pb(4),y.Bc("ngIf",e.accountSettings&&e.accountSettings.create_caller_ids)}}function L(e,t){if(1&e&&(y.ic(0,"option",44),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("ngValue",e.id),y.Pb(1),y.ed(e.name)}}function U(e,t){if(1&e&&(y.gc(0),y.ic(1,"div",41),y.ic(2,"label",10),y.dd(3," Caller ID Group "),y.ic(4,"mat-icon",42),y.dd(5,"help"),y.hc(),y.hc(),y.ic(6,"div",10),y.ic(7,"select",43),y.ic(8,"option",44),y.dd(9,"All Caller IDs"),y.hc(),y.bd(10,L,2,2,"option",45),y.hc(),y.hc(),y.hc(),y.fc()),2&e){const e=y.uc(2);y.Pb(8),y.Bc("ngValue",null),y.Pb(2),y.Bc("ngForOf",e.callerIdGroups)}}function X(e,t){if(1&e&&(y.gc(0),y.ic(1,"form",8),y.ic(2,"div",9),y.ic(3,"label",10),y.dd(4,"Name (required)"),y.hc(),y.ic(5,"div",10),y.dc(6,"input",11),y.hc(),y.hc(),y.dc(7,"hr",12),y.ic(8,"div",13),y.ic(9,"label",10),y.dd(10," Type "),y.ic(11,"mat-icon",14),y.dd(12,"help"),y.hc(),y.hc(),y.dc(13,"br"),y.ic(14,"div",10),y.ic(15,"select",15),y.bd(16,B,2,2,"option",16),y.hc(),y.bd(17,k,4,0,"p",17),y.bd(18,M,4,0,"div",18),y.bd(19,D,4,0,"p",18),y.bd(20,O,4,0,"p",18),y.bd(21,R,4,0,"p",18),y.bd(22,A,4,0,"p",18),y.hc(),y.hc(),y.dc(23,"hr",12),y.bd(24,j,19,9,"ng-container",3),y.bd(25,U,11,2,"ng-container",3),y.hc(),y.fc()),2&e){const e=y.uc();y.Pb(1),y.Bc("formGroup",e.cidStrategyForm),y.Pb(10),y.Bc("matTooltip","Single - Will use the 1 Caller ID they you specify.\n\nAutomatic - will attempt region match, &state match in that order then fall back on random match.\n\nRandom - Will get a random caller id from your Caller ID Groupor your entire account.\n\n")("matTooltipClass","dyn-multi-line-tooltip dyn-tooltip-lg"),y.Pb(5),y.Bc("ngForOf",e.typeOptions),y.Pb(1),y.Bc("ngIf","Single"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Automatic"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Random"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Area Code Match"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Region Match"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","State Match"===e.cidStrategyForm.get("type").value),y.Pb(2),y.Bc("ngIf","Single"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Single"!==e.cidStrategyForm.get("type").value)}}function z(e,t){if(1&e&&(y.ic(0,"option",19),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("value",e),y.Pb(1),y.ed(e)}}function Q(e,t){1&e&&(y.ic(0,"p",20),y.ic(1,"b"),y.dd(2,"Least Recent:"),y.hc(),y.dd(3," selects the Caller ID"),y.dc(4,"br"),y.dd(5," that has not been used the longest. "),y.hc())}function E(e,t){1&e&&(y.ic(0,"p",20),y.ic(1,"b"),y.dd(2,"Single:"),y.hc(),y.dd(3," will use the 1 Caller ID"),y.dc(4,"br"),y.dd(5," they you specify. "),y.hc())}function W(e,t){1&e&&(y.ic(0,"div",21),y.ic(1,"b"),y.dd(2,"Automatic:"),y.hc(),y.dd(3," will attempt region match, & state match"),y.dc(4,"br"),y.dd(5," in that order then fall back"),y.dc(6,"br"),y.dd(7," on random match. "),y.hc())}function K(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Random:"),y.hc(),y.dd(3," will get a random caller id"),y.dc(4,"br"),y.dd(5," from your Caller ID Group or your"),y.dc(6,"br"),y.dd(7," entire account. "),y.hc())}function J(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Area Code:"),y.hc(),y.dd(3," will attempt to find a"),y.dc(4,"br"),y.dd(5," Caller ID with a matching area code"),y.dc(6,"br"),y.dd(7," to the destination number but"),y.dc(8,"br"),y.dd(9," will fall back on random match"),y.dc(10,"br"),y.dd(11," if unsuccessful. "),y.hc())}function H(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"Region:"),y.hc(),y.dd(3," will attempt to find a"),y.dc(4,"br"),y.dd(5," Caller ID from the same region as"),y.dc(6,"br"),y.dd(7," the destination number but"),y.dc(8,"br"),y.dd(9," will fall back on random match"),y.dc(10,"br"),y.dd(11," if unsuccessful. "),y.hc())}function Y(e,t){1&e&&(y.ic(0,"p",21),y.ic(1,"b"),y.dd(2,"State:"),y.hc(),y.dd(3," will attempt to find a"),y.dc(4,"br"),y.dd(5," Caller ID from the same state as"),y.dc(6,"br"),y.dd(7," the destination number but"),y.dc(8,"br"),y.dd(9," will fall back on random match"),y.dc(10,"br"),y.dd(11," if unsuccessful. "),y.hc())}function Z(e,t){1&e&&(y.ic(0,"mat-icon",35),y.dd(1,"search"),y.hc())}function ee(e,t){1&e&&y.dc(0,"mat-progress-spinner",36)}function te(e,t){if(1&e&&(y.ic(0,"mat-option",37),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("value",e.id),y.Pb(1),y.gd(" ",e.name," - ",e.phone_number," ")}}function ae(e,t){1&e&&y.dc(0,"mat-progress-spinner",36)}function ie(e,t){if(1&e){const e=y.kc();y.ic(0,"div",38),y.ic(1,"span",71),y.qc("click",(function(){return y.Qc(e),y.uc(3).showCreateCallerIdDialog()})),y.dd(2," Create Caller ID "),y.ic(3,"mat-icon",72),y.dd(4,"add"),y.hc(),y.hc(),y.hc()}}function ce(e,t){if(1&e){const e=y.kc();y.gc(0),y.ic(1,"label"),y.dd(2,"Caller ID (required)"),y.hc(),y.dc(3,"br"),y.ic(4,"div"),y.ic(5,"mat-form-field",69),y.ic(6,"mat-select",70),y.ic(7,"div",26),y.bd(8,Z,2,0,"mat-icon",27),y.bd(9,ee,1,0,"mat-progress-spinner",28),y.ic(10,"input",29),y.qc("keydown",(function(t){return y.Qc(e),t.stopPropagation()}))("ngModelChange",(function(t){return y.Qc(e),y.uc(2).callerIdInput=t}))("ngModelChange",(function(t){return y.Qc(e),y.uc(2).inputValueChanged(t)})),y.hc(),y.hc(),y.bd(11,te,2,3,"mat-option",30),y.ic(12,"div",31),y.ic(13,"button",32),y.qc("click",(function(){return y.Qc(e),y.uc(2).loadMoreCallerIds()})),y.bd(14,ae,1,0,"mat-progress-spinner",33),y.dd(15," Load More "),y.ic(16,"mat-icon"),y.dd(17,"expand_more"),y.hc(),y.hc(),y.hc(),y.hc(),y.hc(),y.bd(18,ie,5,0,"div",34),y.hc(),y.fc()}if(2&e){const e=y.uc(2);y.Pb(8),y.Bc("ngIf",!e.loadingCallerIds),y.Pb(1),y.Bc("ngIf",e.loadingCallerIds),y.Pb(1),y.Bc("ngModel",e.callerIdInput)("ngModelOptions",y.Fc(8,V)),y.Pb(1),y.Bc("ngForOf",e.callerIds),y.Pb(2),y.Bc("disabled",!e.nextUrl),y.Pb(1),y.Bc("ngIf",e.loadingCallerIds),y.Pb(4),y.Bc("ngIf",e.accountSettings&&e.accountSettings.create_caller_ids)}}function ne(e,t){if(1&e&&(y.ic(0,"option",44),y.dd(1),y.hc()),2&e){const e=t.$implicit;y.Bc("ngValue",e.id),y.Pb(1),y.ed(e.name)}}function le(e,t){if(1&e&&(y.gc(0),y.ic(1,"label"),y.dd(2," Caller ID Group "),y.ic(3,"mat-icon",42),y.dd(4,"help"),y.hc(),y.hc(),y.dc(5,"br"),y.ic(6,"div"),y.ic(7,"select",73),y.ic(8,"option",44),y.dd(9,"All Caller IDs"),y.hc(),y.bd(10,ne,2,2,"option",45),y.hc(),y.hc(),y.fc()),2&e){const e=y.uc(2);y.Pb(8),y.Bc("ngValue",null),y.Pb(2),y.Bc("ngForOf",e.callerIdGroups)}}function re(e,t){1&e&&(y.ic(0,"div"),y.ic(1,"label"),y.dd(2," Max Dials Overall "),y.ic(3,"mat-icon",74),y.dd(4,"help"),y.hc(),y.hc(),y.dc(5,"br"),y.dc(6,"input",75),y.hc())}function de(e,t){if(1&e&&(y.ic(0,"option",44),y.dd(1),y.hc()),2&e){const e=y.uc(2).$implicit;y.Bc("ngValue",e.id),y.Pb(1),y.ed(e.name)}}function oe(e,t){if(1&e&&(y.gc(0),y.bd(1,de,2,2,"option",76),y.fc()),2&e){const e=y.uc().$implicit,t=y.uc(2);y.Pb(1),y.Bc("ngIf",e.id!==t.callerIdStrategy.id)}}function se(e,t){if(1&e&&(y.gc(0),y.ic(1,"option",44),y.dd(2),y.hc(),y.fc()),2&e){const e=y.uc().$implicit;y.Pb(1),y.Bc("ngValue",e.id),y.Pb(1),y.ed(e.name)}}function ue(e,t){if(1&e&&(y.gc(0),y.bd(1,oe,2,1,"ng-container",3),y.bd(2,se,3,2,"ng-container",3),y.fc()),2&e){const e=y.uc(2);y.Pb(1),y.Bc("ngIf",e.callerIdStrategy),y.Pb(1),y.Bc("ngIf",!e.callerIdStrategy)}}const he=function(e){return{"dyn-error-border":e}};function pe(e,t){if(1&e&&(y.gc(0),y.ic(1,"form",8),y.ic(2,"div",0),y.ic(3,"div",46),y.ic(4,"label"),y.dd(5,"Name (required)"),y.hc(),y.dc(6,"br"),y.dc(7,"input",47),y.hc(),y.ic(8,"div",46),y.ic(9,"label",48),y.dd(10," Type "),y.ic(11,"mat-icon",49),y.dd(12,"help"),y.hc(),y.hc(),y.dc(13,"br"),y.ic(14,"select",50),y.bd(15,z,2,2,"option",16),y.hc(),y.bd(16,Q,6,0,"p",17),y.bd(17,E,6,0,"p",17),y.bd(18,W,8,0,"div",18),y.bd(19,K,8,0,"p",18),y.bd(20,J,12,0,"p",18),y.bd(21,H,12,0,"p",18),y.bd(22,Y,12,0,"p",18),y.hc(),y.ic(23,"div"),y.bd(24,ce,19,9,"ng-container",3),y.bd(25,le,11,2,"ng-container",3),y.hc(),y.hc(),y.dc(26,"hr",4),y.ic(27,"div",51),y.dd(28,"Individual Caller ID Usage Frequency"),y.hc(),y.ic(29,"div",0),y.ic(30,"div",46),y.ic(31,"label"),y.dd(32," Minutes Between Use "),y.ic(33,"mat-icon",52),y.dd(34,"help"),y.hc(),y.hc(),y.dc(35,"br"),y.dc(36,"input",53),y.hc(),y.ic(37,"div",46),y.ic(38,"label"),y.dd(39," Max Dials Hourly "),y.ic(40,"mat-icon",54),y.dd(41,"help"),y.hc(),y.hc(),y.dc(42,"br"),y.dc(43,"input",55),y.hc(),y.ic(44,"div",46),y.ic(45,"label"),y.dd(46," Max Dials Daily "),y.ic(47,"mat-icon",56),y.dd(48,"help"),y.hc(),y.hc(),y.dc(49,"br"),y.dc(50,"input",57),y.hc(),y.bd(51,re,7,0,"div",3),y.hc(),y.ic(52,"div",58),y.dd(53," Using these frequency settings without having enough caller IDs available for your dialing speed can slow down your campaign calling. "),y.hc(),y.dc(54,"hr"),y.ic(55,"div",51),y.dd(56,"Max SMS Settings"),y.hc(),y.ic(57,"div"),y.ic(58,"label"),y.dd(59," Max SMS Daily "),y.ic(60,"mat-icon",59),y.dd(61,"help"),y.hc(),y.hc(),y.dc(62,"br"),y.dc(63,"input",60),y.hc(),y.dc(64,"hr",61),y.ic(65,"div"),y.ic(66,"label"),y.dd(67,"Failover Caller ID Strategy"),y.hc(),y.dc(68,"br"),y.ic(69,"select",62),y.dc(70,"option",44),y.bd(71,ue,3,2,"ng-container",63),y.hc(),y.hc(),y.dc(72,"hr",61),y.ic(73,"div"),y.dc(74,"input",64),y.ic(75,"label",65),y.dd(76," Override contact level caller ID settings such as SMS conversation caller ID "),y.ic(77,"mat-icon",66),y.dd(78,"help"),y.hc(),y.hc(),y.hc(),y.ic(79,"div",4),y.dc(80,"input",67),y.ic(81,"label",68),y.dd(82," Deactivate campaign when all caller IDs hit their daily max (failover strategies included) "),y.hc(),y.hc(),y.hc(),y.fc()),2&e){const e=y.uc();y.Pb(1),y.Bc("formGroup",e.cidStrategyForm),y.Pb(10),y.Bc("matTooltipClass","dyn-multi-line-tooltip dyn-tooltip-lg"),y.Pb(4),y.Bc("ngForOf",e.typeOptions),y.Pb(1),y.Bc("ngIf","Least Recent"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Single"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Automatic"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Random"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Area Code Match"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Region Match"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","State Match"===e.cidStrategyForm.get("type").value),y.Pb(2),y.Bc("ngIf","Single"===e.cidStrategyForm.get("type").value),y.Pb(1),y.Bc("ngIf","Single"!==e.cidStrategyForm.get("type").value),y.Pb(11),y.Bc("ngClass",y.Gc(17,he,e.cidStrategyForm.get("minutes_between_use").value>10)),y.Pb(7),y.Bc("ngClass",y.Gc(19,he,e.cidStrategyForm.get("max_dials_hourly").value>20)),y.Pb(8),y.Bc("ngIf",e.cidStrategyForm.get("max_dials").value),y.Pb(19),y.Bc("ngValue",null),y.Pb(1),y.Bc("ngForOf",e.callerIdStrategies)}}const ge=function(e){return{lg:e}};let me=(()=>{class e{constructor(e,t,a,i,c,n,l,d,o,s,u,h,p,g){this.dialogRef=e,this.accountFeatureService=t,this._http=a,this._snackBar=i,this._fb=c,this._dialog=n,this._callerIdService=l,this._callerIdStrategyService=d,this._callerIdGroupService=o,this._userService=s,this._authService=u,this._utils=h,this._accountSettingService=p,this.data=g,this.callerIdSearchInput=new r.a,this.loadingCallerIds=!1,this.typeOptions=["Least Recent","Automatic"],this.callerIdStrategy=g.callerIdStrategy,this.title=this.callerIdStrategy?"Edit Caller ID Strategy":"Create Caller ID Strategy",this._callerIdStrategyService.list("max").subscribe({next:e=>{this.callerIdStrategies=e.results}})}ngOnInit(){this.callerIdStrategy?(this.cidStrategyForm=this._fb.group({id:this.callerIdStrategy.id,name:[this.callerIdStrategy.name,i.z.required],type:[this.callerIdStrategy.type,i.z.required],caller_id:this.callerIdStrategy.caller_id,caller_id_group:this.callerIdStrategy.caller_id_group,failover_caller_id_strategy:this.callerIdStrategy.failover_caller_id_strategy,max_dials_daily:this.callerIdStrategy.max_dials_daily,max_dials:this.callerIdStrategy.max_dials,max_sms_daily:this.callerIdStrategy.max_sms_daily,override_contact:this.callerIdStrategy.override_contact,max_dials_hourly:this.callerIdStrategy.max_dials_hourly,minutes_between_use:this.callerIdStrategy.minutes_between_use,deactivate_campaign_on_empty:this.callerIdStrategy.deactivate_campaign_on_empty}),this.accountFeatureService.accountFeaturesSubject.value&&(this.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings?this.typeOptions.push("Single","Area Code Match","Region Match","State Match"):"Area Code Match"===this.callerIdStrategy.type?this.typeOptions.push("Area Code Match"):"Region Match"===this.callerIdStrategy.type?this.typeOptions.push("Region Match"):"Single"===this.callerIdStrategy.type?this.typeOptions.push("Single"):"State Match"===this.callerIdStrategy.type&&this.typeOptions.push("State Match"))):(this.cidStrategyForm=this._fb.group({name:["",i.z.required],type:"Least Recent",caller_id:null,caller_id_group:null,failover_caller_id_strategy:null,max_dials_daily:75,max_dials:null,max_sms_daily:200,override_contact:!1,max_dials_hourly:null,minutes_between_use:null,deactivate_campaign_on_empty:!1}),this.accountFeatureService.accountFeaturesSubject.value&&this.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings&&this.typeOptions.push("Single","Area Code Match","Region Match","State Match")),this._getCallerIdGroups(),this._getAccountSettings(),this._callerIdService.list(25,1).subscribe({next:e=>{this.callerIds=e.results,this.nextUrl=e.next,this.callerIdStrategy&&this.callerIdStrategy.caller_id&&-1===this.callerIds.findIndex(e=>e.id===this.callerIdStrategy.caller_id)&&this._callerIdService.get(this.callerIdStrategy.caller_id).subscribe(e=>{this.callerIds.unshift(e)})}}),this.callerIdSearchInput.pipe(Object(n.a)(2e3),Object(l.a)()).subscribe(()=>{this._searchCallerIds()})}inputValueChanged(e){this.callerIdSearchInput.next(e)}loadMoreCallerIds(){this.loadingCallerIds=!0,this._callerIdService.getByUrl(this.nextUrl).subscribe({next:e=>{this.callerIds.push(...e.results),this.nextUrl=e.next,this.loadingCallerIds=!1},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Loading Caller IDs"),"X",{duration:3e3,verticalPosition:"top",panelClass:["error"]})}})}onSubmit(){if(this.cidStrategyForm.invalid)this._snackBar.open("Please fill all required fields","X",{duration:3e3,verticalPosition:"top",panelClass:"error"});else{if("Single"===this.cidStrategyForm.get("type").value){if(!this.cidStrategyForm.get("caller_id").value)return void this._snackBar.open("Caller ID is required for type Single","X",{duration:3e3,verticalPosition:"top",panelClass:"error"})}else this.cidStrategyForm.get("caller_id").setValue(null);null!==this.cidStrategyForm.get("max_sms_daily").value&&void 0!==this.cidStrategyForm.get("max_sms_daily").value?this.cidStrategyForm.get("max_sms_daily").value>200?this._snackBar.open("Max SMS Daily value must be less than 200","",{duration:3e3,verticalPosition:"top",panelClass:"error"}):this.cidStrategyForm.get("max_sms_daily").value<0?this._snackBar.open("Max SMS Daily value must be greater than 0","",{duration:3e3,verticalPosition:"top",panelClass:"error"}):this.callerIdStrategy?this._callerIdStrategyService.update(this.cidStrategyForm.value).subscribe({next:e=>{this._snackBar.open("Caller ID strategy updated successfully","",{duration:3e3,verticalPosition:"top",panelClass:"success"}),this.dialogRef.close(e)},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Updating Caller ID Strategy"),"X",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}}):this._callerIdStrategyService.create(this.cidStrategyForm.value).subscribe({next:e=>{this._snackBar.open("Created Successfully","",{duration:3e3,verticalPosition:"top",panelClass:"success"}),this.dialogRef.close(e)},error:e=>{this._snackBar.open(this._utils.handleErrorResponse(e,"Error Creating Caller ID Strategy"),"X",{duration:5e3,verticalPosition:"top",panelClass:["error"]})}}):this._snackBar.open("Max SMS Daily value cannot be blank","",{duration:3e3,verticalPosition:"top",panelClass:"error"})}}showCreateCallerIdDialog(){this._dialog.open(d.a,{width:"600px"}).afterClosed().subscribe({next:e=>{e&&(this.callerIds.push(e),this.cidStrategyForm.get("caller_id").setValue(e.id))}})}_getAccountSettings(){this._userService.get(this._authService.getUserId()).subscribe({next:e=>{this._accountSettingService.getByAccountId(e.account_id).subscribe({next:e=>{this.accountSettings=e}})}})}_getCallerIdGroups(){this._callerIdGroupService.list("max").subscribe({next:e=>{this.callerIdGroups=e.results}})}_searchCallerIds(){this.loadingCallerIds=!0,this._callerIdService.search(1,this.callerIdInput).subscribe({next:e=>{this.loadingCallerIds=!1,this.nextUrl=e.next,this.callerIds=e.results}})}}return e.\u0275fac=function(t){return new(t||e)(y.bc(c.g),y.bc(b.a),y.bc(f.b),y.bc(v.a),y.bc(i.f),y.bc(c.b),y.bc(o.a),y.bc(s.a),y.bc(u.a),y.bc(h.a),y.bc(p.a),y.bc(m.a),y.bc(g.a),y.bc(c.a))},e.\u0275cmp=y.Vb({type:e,selectors:[["ng-component"]],decls:14,vars:7,consts:[[1,"dyn-flex"],[1,"img-container",3,"ngClass"],[1,"dyn-full-width","dyn-p-20"],[4,"ngIf"],[1,"dyn-m-t-10"],[1,"dyn-m-t-20","dyn-flex","dyn-space-between"],["mat-stroked-button","","color","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"formGroup"],[1,"dyn-flex","dyn-space-between","dyn-full-width","dyn-m-r-20"],[1,"dyn-full-width"],["type","text","formControlName","name",1,"dyn-full-width"],[1,"dyn-m-t-10","dyn-m-b-10"],[1,"dyn-flex","dyn-space-between","dyn-full-width"],[1,"dyn-button-help-icon",3,"matTooltip","matTooltipClass"],["formControlName","type",1,"dyn-full-width"],[3,"value",4,"ngFor","ngForOf"],["class","dyn-text-sm dyn-m-b-0",4,"ngIf"],["class","dyn-text-sm dyn-m-t-10 dyn-m-b-0",4,"ngIf"],[3,"value"],[1,"dyn-text-sm","dyn-m-b-0"],[1,"dyn-text-sm","dyn-m-t-10","dyn-m-b-0"],[1,"dyn-flex","dyn-space-between"],[1,"dyn-full-width","dyn-p-t-5"],["appearance","outline",1,"dyn-full-width","dyn-search-select"],["formControlName","caller_id","panelClass","dyn-mat-select-xl","disableRipple","",1,"dyn-full-width"],[1,"dyn-flex","dyn-align-items",2,"padding","10px"],["class","dyn-icon-sm",4,"ngIf"],["class","dyn-inline-block dyn-vertical-middle","diameter","20","mode","indeterminate",4,"ngIf"],["type","search","placeholder","Search",1,"dyn-full-width","dyn-m-l-10",3,"ngModel","ngModelOptions","keydown","ngModelChange"],["class","dyn-menu-option-sm",3,"value",4,"ngFor","ngForOf"],[1,"dyn-text-center","dyn-m-10"],["mat-button","","color","primary",3,"disabled","click"],["diameter","20","mode","indeterminate","class","dyn-inline-block dyn-vertical-middle",4,"ngIf"],["class","dyn-text-right",4,"ngIf"],[1,"dyn-icon-sm"],["diameter","20","mode","indeterminate",1,"dyn-inline-block","dyn-vertical-middle"],[1,"dyn-menu-option-sm",3,"value"],[1,"dyn-text-right"],[1,"dyn-text-sm","dyn-link","dyn-underline",3,"click"],[1,"dyn-icon-sm","dyn-vertical-middle"],[1,"dyn-flex","dyn-space-between","dyn-align-items"],["matTooltip","\n                                    A Caller ID Group is optional.\n                                    All your account Caller IDs are used if no group is provided.",1,"dyn-button-help-icon"],["formControlName","caller_id_group",1,"dyn-full-width"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"dyn-m-r-20"],["type","text","formControlName","name",2,"width","250px"],[1,""],["matTooltip","\n                                    Least Recent - Selects the Caller ID that has not been used the longest.\n\n                                    Single - Will use the 1 Caller ID they you specify.\n\n                                    Automatic - will attempt region match, &\n                                    state match in that order then fall back on random match.\n\n                                    Random - Will get a random caller id from your Caller ID Group\n                                    or your entire account.\n\n                                    Area Code Match - Will attempt to find a Caller ID with a matching area code to\n                                    the destination number but will fall back on random match if unsuccessful.\n\n                                    Region Match - Will attempt to find a Caller ID from the same region as\n                                    the destination number but will fall back on random match if unsuccessful.\n\n                                    State Match - Will attempt to find a Caller ID from the same state as the\n                                    destination number but will fall back on random match if unsuccessful.",1,"dyn-button-help-icon",3,"matTooltipClass"],["formControlName","type",2,"width","200px"],[1,"dyn-rounded-btn","dyn-m-b-10"],["matTooltip","\n                                    Setting one will make sure at least 1 minute passes between call attempts using this caller ID. Allowed: 1-10",1,"dyn-button-help-icon"],["formControlName","minutes_between_use","type","number","max","10",2,"width","100px",3,"ngClass"],["matTooltip","\n                                Max dials per hour before a caller ID is suspended until the next day for use by voice calls.\n                                Allowed: 1-20 ",1,"dyn-button-help-icon"],["formControlName","max_dials_hourly","type","number","max","20",2,"width","100px",3,"ngClass"],["matTooltip","\n                                Max dials per day before a caller ID is suspended\n                                until the next day for use by voice calls.",1,"dyn-button-help-icon"],["formControlName","max_dials_daily","type","number",2,"width","100px"],[1,"dyn-bg-yellow","dyn-p-10","dyn-text-sm","dyn-m-t-10",2,"border-radius","5px"],["matTooltip","\n                                Max SMS per day before a caller ID is suspended\n                                until the next day for use by SMS. Max Allowed: 200",1,"dyn-button-help-icon"],["formControlName","max_sms_daily","type","number",2,"width","100px"],[1,"dyn-m-b-10"],["formControlName","failover_caller_id_strategy"],[4,"ngFor","ngForOf"],["type","checkbox","formControlName","override_contact","id","override_contact"],["for","override_contact"],["matTooltip","\n                                Override any contact caller ID settings such as a SMS\n                                conversation caller ID or contact caller id personalization set by an automation.",1,"dyn-button-help-icon"],["type","checkbox","formControlName","deactivate_campaign_on_empty","id","deactivate_campaign_on_empty"],["for","deactivate_campaign_on_empty"],["appearance","outline",1,"dyn-search-select"],["formControlName","caller_id","panelClass","dyn-mat-select-xl","disableRipple",""],[1,"dyn-link","dyn-text-sm","dyn-underline",3,"click"],["color","primary",1,"dyn-icon-sm","dyn-vertical-middle"],["formControlName","caller_id_group"],["matTooltip","\n                                Max dials overall before a caller ID is suspended\n                                permanently for use by voice calls.",1,"dyn-button-help-icon"],["formControlName","max_dials","type","number",2,"width","100px"],[3,"ngValue",4,"ngIf"]],template:function(e,t){1&e&&(y.ic(0,"div",0),y.dc(1,"div",1),y.ic(2,"div",2),y.ic(3,"h1"),y.dd(4),y.hc(),y.dc(5,"hr"),y.bd(6,X,26,12,"ng-container",3),y.bd(7,pe,83,21,"ng-container",3),y.dc(8,"hr",4),y.ic(9,"div",5),y.ic(10,"button",6),y.dd(11,"Cancel"),y.hc(),y.ic(12,"button",7),y.qc("click",(function(){return t.onSubmit()})),y.dd(13,"Save"),y.hc(),y.hc(),y.hc(),y.hc()),2&e&&(y.Pb(1),y.Bc("ngClass",y.Gc(5,ge,t.accountFeatureService.accountFeaturesSubject.value&&t.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings)),y.Pb(3),y.ed(t.title),y.Pb(2),y.Bc("ngIf",t.accountFeatureService.accountFeaturesSubject.value&&!t.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings),y.Pb(1),y.Bc("ngIf",t.accountFeatureService.accountFeaturesSubject.value&&t.accountFeatureService.accountFeaturesSubject.value.callerid_strategy_advanced_settings),y.Pb(5),y.Bc("disabled",t.cidStrategyForm.invalid))},directives:[I.n,I.p,_.b,c.d,i.B,i.q,i.i,i.d,i.p,i.h,S.a,C.a,i.y,I.o,i.t,i.A,x.b,w.a,i.s,F.a,P.o,i.u,i.a],styles:[".img-container[_ngcontent-%COMP%]{width:210px;min-width:210px;background-image:url(/assets/img/woman-on-phone.jpg);background-color:#f1f1f1;background-size:650px;background-repeat:no-repeat;background-position:60%;position:relative;background-attachment:local}.img-container.lg[_ngcontent-%COMP%]{width:250px;min-width:250px;background-size:1250px;background-position:60%}"]}),e})()},M1CT:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("fXoL"),c=a("tk/3");let n=(()=>{class e{constructor(e){this.http=e}list(e,t){return this.http.get(t?`/api/calleridgroups/?ordering=-pk&page=${t}&page_size=${e}`:"/api/calleridgroups/?ordering=-pk&page_size="+e)}get(e){return this.http.get(`/api/calleridgroups/${e}/`)}getStats(e){return this.http.get(`/api/calleridgroups/${e}/stats/`)}delete(e){return this.http.delete(`/api/calleridgroups/${e.id}/`)}create(e){return this.http.post("/api/calleridgroups/",e)}update(e,t){return this.http.patch(`/api/calleridgroups/${e}/`,t)}}return e.\u0275fac=function(t){return new(t||e)(i.nc(c.b))},e.\u0275prov=i.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ssNL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("fXoL"),c=a("tk/3");let n=(()=>{class e{constructor(e){this.http=e}list(e,t){return this.http.get(t?`/api/calleridstrategies/?page=${t}&page_size=${e}&ordering=-pk`:`/api/calleridstrategies/?page_size=${e}&ordering=name`)}getFailoverHierarchy(e){return this.http.get(`/api/calleridstrategies/${e}/failoverhierarchy/`)}get(e){return this.http.get(`/api/calleridstrategies/${e}/`)}create(e){return this.http.post("/api/calleridstrategies/",e)}delete(e){return this.http.delete(`/api/calleridstrategies/${e}/`)}update(e){return this.http.patch(`/api/calleridstrategies/${e.id}/`,e)}}return e.\u0275fac=function(t){return new(t||e)(i.nc(c.b))},e.\u0275prov=i.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);